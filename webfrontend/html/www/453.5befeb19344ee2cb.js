"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[453],{2726:(X,Y,l)=>{l.d(Y,{Uw:()=>S,fo:()=>N});var f=l(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var L=function(e){return e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE",e}(L||{});class o extends Error{constructor(n,a,g){super(n),this.message=n,this.code=a,this.data=g}}const b=e=>{var n,a,g,c,m;const h=e.CapacitorCustomPlatform||null,d=e.Capacitor||{},v=d.Plugins=d.Plugins||{},C=e.CapacitorPlatforms,x=(null===(n=C?.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==h?h.name:(e=>{var n,a;return e?.androidBridge?"android":null!==(a=null===(n=e?.webkit)||void 0===n?void 0:n.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(e)),I=(null===(a=C?.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==x()),D=(null===(g=C?.currentPlatform)||void 0===g?void 0:g.isPluginAvailable)||(G=>{const H=q.get(G);return!(!H?.platforms.has(x())&&!K(G))}),K=(null===(c=C?.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(G=>{var H;return null===(H=d.PluginHeaders)||void 0===H?void 0:H.find(z=>z.name===G)}),q=new Map,nt=(null===(m=C?.currentPlatform)||void 0===m?void 0:m.registerPlugin)||((G,H={})=>{const z=q.get(G);if(z)return console.warn(`Capacitor plugin "${G}" already registered. Cannot register plugins twice.`),z.proxy;const tt=x(),rt=K(G);let ct;const vt=function(){var et=(0,f.Z)(function*(){return!ct&&tt in H?ct=ct="function"==typeof H[tt]?yield H[tt]():H[tt]:null!==h&&!ct&&"web"in H&&(ct=ct="function"==typeof H.web?yield H.web():H.web),ct});return function(){return et.apply(this,arguments)}}(),mt=et=>{let it;const st=(..._t)=>{const ut=vt().then(at=>{const dt=((et,it)=>{var st,_t;if(!rt){if(et)return null===(_t=et[it])||void 0===_t?void 0:_t.bind(et);throw new o(`"${G}" plugin is not implemented on ${tt}`,L.Unimplemented)}{const ut=rt?.methods.find(at=>it===at.name);if(ut)return"promise"===ut.rtype?at=>d.nativePromise(G,it.toString(),at):(at,dt)=>d.nativeCallback(G,it.toString(),at,dt);if(et)return null===(st=et[it])||void 0===st?void 0:st.bind(et)}})(at,et);if(dt){const gt=dt(..._t);return it=gt?.remove,gt}throw new o(`"${G}.${et}()" is not implemented on ${tt}`,L.Unimplemented)});return"addListener"===et&&(ut.remove=(0,f.Z)(function*(){return it()})),ut};return st.toString=()=>`${et.toString()}() { [capacitor code] }`,Object.defineProperty(st,"name",{value:et,writable:!1,configurable:!1}),st},ft=mt("addListener"),ht=mt("removeListener"),Tt=(et,it)=>{const st=ft({eventName:et},it),_t=function(){var at=(0,f.Z)(function*(){const dt=yield st;ht({eventName:et,callbackId:dt},it)});return function(){return at.apply(this,arguments)}}(),ut=new Promise(at=>st.then(()=>at({remove:_t})));return ut.remove=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield _t()}),ut},pt=new Proxy({},{get(et,it){switch(it){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return rt?Tt:ft;case"removeListener":return ht;default:return mt(it)}}});return v[G]=pt,q.set(G,{name:G,proxy:pt,platforms:new Set([...Object.keys(H),...rt?[tt]:[]])}),pt});return d.convertFileSrc||(d.convertFileSrc=G=>G),d.getPlatform=x,d.handleError=G=>e.console.error(G),d.isNativePlatform=I,d.isPluginAvailable=D,d.pluginMethodNoop=(G,H,z)=>Promise.reject(`${z} does not have an implementation of "${H}".`),d.registerPlugin=nt,d.Exception=o,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},U=(e=>e.Capacitor=b(e))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),N=U.registerPlugin;class S{constructor(n){this.listeners={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,a){var g=this;this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(a);const m=this.windowListeners[n];m&&!m.registered&&this.addWindowListener(m);const h=function(){var v=(0,f.Z)(function*(){return g.removeListener(n,a)});return function(){return v.apply(this,arguments)}}(),d=Promise.resolve({remove:h});return Object.defineProperty(d,"remove",{value:(v=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield h()}),function(){return v.apply(this,arguments)})}),d;var v}removeAllListeners(){var n=this;return(0,f.Z)(function*(){n.listeners={};for(const a in n.windowListeners)n.removeWindowListener(n.windowListeners[a]);n.windowListeners={}})()}notifyListeners(n,a){const g=this.listeners[n];g&&g.forEach(c=>c(a))}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,a){this.windowListeners[a]={registered:!1,windowEventName:n,pluginEventName:a,handler:g=>{this.notifyListeners(a,g)}}}unimplemented(n="not implemented"){return new U.Exception(n,L.Unimplemented)}unavailable(n="not available"){return new U.Exception(n,L.Unavailable)}removeListener(n,a){var g=this;return(0,f.Z)(function*(){const c=g.listeners[n];if(!c)return;const m=c.indexOf(a);g.listeners[n].splice(m,1),g.listeners[n].length||g.removeWindowListener(g.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}}const k=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),V=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends S{getCookies(){return(0,f.Z)(function*(){const n=document.cookie,a={};return n.split(";").forEach(g=>{if(g.length<=0)return;let[c,m]=g.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=V(c).trim(),m=V(m).trim(),a[c]=m}),a})()}setCookie(n){return(0,f.Z)(function*(){try{const a=k(n.key),g=k(n.value),c=`; expires=${(n.expires||"").replace("expires=","")}`,m=(n.path||"/").replace("path=",""),h=null!=n.url&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${a}=${g||""}${c}; path=${m}; ${h};`}catch(a){return Promise.reject(a)}})()}deleteCookie(n){return(0,f.Z)(function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,f.Z)(function*(){try{const n=document.cookie.split(";")||[];for(const a of n)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})()}clearAllCookies(){var n=this;return(0,f.Z)(function*(){try{yield n.clearCookies()}catch(a){return Promise.reject(a)}})()}}N("CapacitorCookies",{web:()=>new E});const B=function(){var e=(0,f.Z)(function*(n){return new Promise((a,g)=>{const c=new FileReader;c.onload=()=>{const m=c.result;a(m.indexOf(",")>=0?m.split(",")[1]:m)},c.onerror=m=>g(m),c.readAsDataURL(n)})});return function(a){return e.apply(this,arguments)}}();class i extends S{request(n){return(0,f.Z)(function*(){const a=((e,n={})=>{const a=Object.assign({method:e.method||"GET",headers:e.headers},n),c=((e={})=>{const n=Object.keys(e);return Object.keys(e).map(c=>c.toLocaleLowerCase()).reduce((c,m,h)=>(c[m]=e[n[h]],c),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)a.body=e.data;else if(c.includes("application/x-www-form-urlencoded")){const m=new URLSearchParams;for(const[h,d]of Object.entries(e.data||{}))m.set(h,d);a.body=m.toString()}else if(c.includes("multipart/form-data")){const m=new FormData;if(e.data instanceof FormData)e.data.forEach((d,v)=>{m.append(v,d)});else for(const d of Object.keys(e.data))m.append(d,e.data[d]);a.body=m;const h=new Headers(a.headers);h.delete("content-type"),a.headers=h}else(c.includes("application/json")||"object"==typeof e.data)&&(a.body=JSON.stringify(e.data));return a})(n,n.webFetchExtra),g=((e,n=!0)=>e?Object.entries(e).reduce((g,c)=>{const[m,h]=c;let d,v;return Array.isArray(h)?(v="",h.forEach(C=>{d=n?encodeURIComponent(C):C,v+=`${m}=${d}&`}),v.slice(0,-1)):(d=n?encodeURIComponent(h):h,v=`${m}=${d}`),`${g}&${v}`},"").substr(1):null)(n.params,n.shouldEncodeUrlParams),c=g?`${n.url}?${g}`:n.url,m=yield fetch(c,a),h=m.headers.get("content-type")||"";let v,C,{responseType:d="text"}=m.ok?n:{};switch(h.includes("application/json")&&(d="json"),d){case"arraybuffer":case"blob":C=yield m.blob(),v=yield B(C);break;case"json":v=yield m.json();break;default:v=yield m.text()}const O={};return m.headers.forEach((x,P)=>{O[P]=x}),{data:v,headers:O,status:m.status,url:m.url}})()}get(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"GET"}))})()}post(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"POST"}))})()}put(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"PUT"}))})()}patch(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})()}delete(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})()}}N("CapacitorHttp",{web:()=>new i})},4898:(X,Y,l)=>{l.d(Y,{B:()=>u});var f=l(7398),Q=l(7081),y=l(5879),M=l(711),t=l(6119);let u=(()=>{var s;class L{constructor(A,b){this.dataService=A,this.loxberryService=b}get controls$(){return this.dataService.controls$}get categories$(){return this.dataService.categories$}get rooms$(){return this.dataService.rooms$}getControl$(A,b){return this.dataService.controls$.pipe((0,f.U)(Z=>Z.find(U=>U.uuid===b&&U.serialNr===A)),(0,Q.d)())}getSubControl$(A,b,Z){return this.dataService.controls$.pipe((0,f.U)(U=>{const N=U.find(J=>J.uuid===b&&J.serialNr===A&&J.subControls[Z].uuid===Z);if(N)return N.subControls[Z]}),(0,Q.d)())}updateControl(A,b){this.loxberryService.sendMessage(A,b)}}return(s=L).\u0275fac=function(A){return new(A||s)(y.LFG(M.D),y.LFG(t.$))},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),L})()},6308:(X,Y,l)=>{l.d(Y,{G:()=>Q,W:()=>f});var f=function(y){return y[y.DOWN=0]="DOWN",y[y.DOWN_OFF=1]="DOWN_OFF",y[y.FULL_CLOSE=2]="FULL_CLOSE",y[y.FULL_OPEN=3]="FULL_OPEN",y[y.MINUS=4]="MINUS",y[y.PLUS=5]="PLUS",y[y.PUSH=6]="PUSH",y[y.SHADE=7]="SHADE",y[y.UP=8]="UP",y[y.UP_OFF=9]="UP_OFF",y}(f||{}),Q=function(y){return y[y.DETAILED=0]="DETAILED",y[y.FAVORITE=1]="FAVORITE",y[y.LIST_ITEM=2]="LIST_ITEM",y[y.LIST_ITEM_POPUP=3]="LIST_ITEM_POPUP",y}(Q||{})},7658:(X,Y,l)=>{l.d(Y,{c:()=>f});class f{static hsv2rgb(y,M,t){const u=(k,V,E)=>Math.round(Math.max(Math.min(k,Math.max(V,E)),Math.min(V,E))),s=y/60,L=M/100,o=t/100,A=Math.floor(s),b=s-A,Z=o*(1-L),U=o*(1-b*L),N=o*(1-(1-b)*L),J=A%6,S=[N,o,o,U,Z,Z][J],W=[Z,Z,N,o,o,U][J];return[u(255*[o,U,Z,Z,N,o][J],0,255),u(255*S,0,255),u(255*W,0,255)]}static getColor(y){let M;switch(y){case"primary":M="#69c350";break;case"secondary":default:M="#9d9e9e";break;case"tertiary":M="#6a64ff";break;case"success":M="#2fdf75";break;case"warning":M="#ffd534";break;case"danger":M="#ff4961";break;case"dark":M="#f4f5f8";break;case"medium":M="#989aa2";break;case"light":M="#222428"}return M}}},2571:(X,Y,l)=>{l.d(Y,{W:()=>$});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6223),b=l(6089);function Z(S,W){if(1&S&&(t.ynx(0),t.TgZ(1,"ion-fab-button",11),t._UZ(2,"ion-icon",12),t.qZA(),t.BQk()),2&S){const k=t.oxw(2).ngIf;t.xp6(1),t.Jzz("background-color: ",k.ui.buttonColor,"")}}function U(S,W){if(1&S&&(t.ynx(0),t.TgZ(1,"ion-fab-button",13),t._UZ(2,"ion-icon",14),t.qZA(),t.BQk()),2&S){const k=t.oxw(2).ngIf,V=t.oxw();t.xp6(1),t.Jzz("background-color: ",k.ui.buttonColor,""),t.s9C("routerLink",V.subControl.uuid)}}function N(S,W){if(1&S&&(t.ynx(0),t.YNc(1,Z,3,3,"ng-container",6),t.YNc(2,U,3,4,"ng-container",6),t.BQk()),2&S){const k=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf","Dimmer"===k.subControl.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===k.subControl.type)}}function J(S,W){if(1&S){const k=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-label",4)(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-label",5)(7,"h2"),t._uU(8),t.qZA()(),t.YNc(9,N,3,2,"ng-container",6),t.qZA(),t.TgZ(10,"ion-item",3)(11,"ion-fab-button",7),t.NdJ("click",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.clickDimmerButton(T.buttonType.DOWN,B,E))}),t._UZ(12,"ion-icon",8),t.qZA(),t.TgZ(13,"ion-range",9),t.NdJ("ionChange",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.sliderChange(B,E))}),t.qZA(),t.TgZ(14,"ion-fab-button",10),t.NdJ("click",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.clickDimmerButton(T.buttonType.UP,B,E))}),t._UZ(15,"ion-icon",8),t.qZA()()()()}if(2&S){const k=W.ngIf,V=t.oxw();t.xp6(5),t.Oqu(k.ui.name),t.xp6(3),t.hij("",k.ui.slider.position," %"),t.xp6(1),t.Q6J("ngIf",V.view===V.viewType.DETAILED),t.xp6(4),t.Jzz("--bar-background: ",k.ui.slider.color,";"),t.s9C("min",k.ui.slider.min),t.s9C("max",k.ui.slider.max),t.s9C("step",k.ui.slider.step),t.Q6J("ngModel",k.ui.slider.position)}}let $=(()=>{var S;class W{constructor(V,E){this.translate=V,this.controlService=E,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,Q.U)(([V,E])=>this.updateVM(V,E))):console.error("Component 'card-dimmer' not available for rendering.")}updateVM(V,E){let R=null==E.states.min||""===E.states.min?0:Number(E.states.min),B=null==E.states.max||""===E.states.max?100:Number(E.states.max),T=null==E.states.step||""===E.states.step?1:Number(E.states.step),p=0,_="",i="";if("Dimmer"===E.type&&(p=E.states.position?Number(E.states.position):0,_="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb(255, 229, 127))",i="rgba(255, 229, 127,"+p/100+")"),"ColorPickerV2"===E.type){let n=E.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(n){p=n[3]?Number(n[3]):0;let a=M.c.hsv2rgb(Number(n[1]),Number(n[2]),100);_="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb("+a[0]+","+a[1]+","+a[2]+"))",i="rgba("+a[0]+","+a[1]+","+a[2]+","+p/100+")"}}return{control:V,subControl:E,ui:{name:this.view===y.G.DETAILED?E.name:this.translate.instant("Brightness"),buttonColor:p<10?"#31373e":i,slider:{position:p,min:R,max:B,step:T,color:_}},rgb:[]}}sliderChange(V,E){if("Dimmer"===V.subControl.type&&V.subControl.states.position!=E.detail.value&&this.controlService.updateControl(V.subControl,String(E.detail.value)),"ColorPickerV2"===V.subControl.type){let R=V.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(R[3]!=E.detail.value){let B="hsv("+R[1]+","+R[2]+","+String(E.detail.value)+")";this.controlService.updateControl(V.subControl,B)}}}clickDimmerButton(V,E,R){let B;if(R.preventDefault(),R.stopPropagation(),B=V===y.W.UP?E.ui.slider.position+E.ui.slider.step:E.ui.slider.position-E.ui.slider.step,B<E.ui.slider.min)B=E.ui.slider.min;else if(B>E.ui.slider.max)B=E.ui.slider.max;else if("Dimmer"===E.subControl.type&&this.controlService.updateControl(E.subControl,String(B)),"ColorPickerV2"===E.subControl.type){let T=E.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/),p="hsv("+T[1]+","+T[2]+","+String(B)+")";this.controlService.updateControl(E.subControl,p)}}}return(S=W).\u0275fac=function(V){return new(V||S)(t.Y36(u.sK),t.Y36(s.B))},S.\u0275cmp=t.Xpm({type:S,selectors:[["card-dimmer-view"]],inputs:{control:"control",subControl:"subControl",view:"view"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],[1,"label"],[1,"label-right"],[4,"ngIf"],[1,"fab-button-slider","icon-slider-left-small",3,"click"],["name","sunny",2,"color","#4e5761"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],[1,"fab-button-slider","btn_dimmer"],["name","contrast-outline",1,"hsv_icon"],[1,"fab-button-slider","btn_dimmer",3,"routerLink"],["name","color-filter-outline",1,"rgb_icon"]],template:function(V,E){1&V&&(t.YNc(0,J,16,10,"ion-card",0),t.ALo(1,"async")),2&V&&t.Q6J("ngIf",t.lcZ(1,1,E.vm$))},dependencies:[L.O5,o.PM,o.FN,o.W4,o.gu,o.Ie,o.Q$,o.I_,o.QI,o.YI,A.JJ,A.On,b.rH,L.Ov]}),W})()},7383:(X,Y,l)=>{l.d(Y,{x:()=>L});var f=l(5879),Q=l(9515),y=l(4898),M=l(6814),t=l(7027);function u(o,A){if(1&o&&(f.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",3),f._uU(3),f.ALo(4,"translate"),f.qZA()()()),2&o){const b=f.oxw().$implicit,Z=f.oxw();f.xp6(1),f.Gre("radio-item selected-",Z.radio_vm.ui.status.text==b.name,""),f.xp6(1),f.s9C("value",b.name),f.xp6(1),f.hij(" ",f.lcZ(4,5,b.name)," ")}}function s(o,A){if(1&o&&(f.TgZ(0,"div"),f.YNc(1,u,5,7,"div",2),f.qZA()),2&o){const b=A.$implicit;f.xp6(1),f.Q6J("ngIf",""!=b.name)}}let L=(()=>{var o;class A{constructor(Z,U){this.translate=Z,this.controlService=U}radioGroupChange(Z,U){if("Radio"===Z.control.type){let N=Z.ui.radioList.findIndex(J=>J.name===U.detail.value);if(Z.ui.radioList[N]&&Z.ui.radioList[N].id!=Z.ui.selectedId){let J=String(Z.ui.radioList[N].id);"0"===J&&(J="reset"),this.controlService.updateControl(Z.control,J)}}if("LightControllerV2"===Z.control.type){let N=Z.ui.radioList.findIndex(J=>J.name===U.detail.value);if(Z.ui.radioList[N]&&Z.ui.radioList[N].id!=Z.ui.selectedId){let J="changeTo/"+String(Z.ui.radioList[N].id);this.controlService.updateControl(Z.control,J)}}}}return(o=A).\u0275fac=function(Z){return new(Z||o)(f.Y36(Q.sK),f.Y36(y.B))},o.\u0275cmp=f.Xpm({type:o,selectors:[["card-radio-list-view"]],inputs:{radio_vm:"radio_vm"},decls:2,vars:2,consts:[[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"radio","radio-text",3,"value"]],template:function(Z,U){1&Z&&(f.TgZ(0,"ion-radio-group",0),f.NdJ("ionChange",function(J){return U.radioGroupChange(U.radio_vm,J)}),f.YNc(1,s,2,1,"div",1),f.qZA()),2&Z&&(f.s9C("value",U.radio_vm.ui.status.text),f.xp6(1),f.Q6J("ngForOf",U.radio_vm.ui.radioList))},dependencies:[M.sg,M.O5,t.Ie,t.B7,t.se,t.U5,t.QI,Q.X$]}),A})()},717:(X,Y,l)=>{l.d(Y,{h:()=>o});var f=l(5879),Q=l(9515),y=l(4898),M=l(6814),t=l(7027);function u(A,b){if(1&A&&f._UZ(0,"ion-icon",8),2&A){const Z=f.oxw();f.s9C("color",Z.text_vm.control.icon.color),f.s9C("src",Z.text_vm.control.icon.href)}}function s(A,b){if(1&A&&(f.TgZ(0,"div",9)(1,"div")(2,"span",10),f._uU(3),f.qZA(),f.TgZ(4,"span",11),f._uU(5),f.qZA()()()),2&A){const Z=f.oxw();f.xp6(3),f.Oqu(Z.text_vm.ui.icon.tempBase),f.xp6(2),f.Oqu(Z.text_vm.ui.icon.tempDec)}}function L(A,b){if(1&A&&(f.TgZ(0,"h2"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&A){const Z=f.oxw();f.Udp("color",Z.text_vm.ui.status.color),f.xp6(1),f.hij(" ",f.lcZ(2,3,Z.text_vm.ui.status.text)," ")}}let o=(()=>{var A;class b{constructor(U,N){this.translate=U,this.controlService=N}}return(A=b).\u0275fac=function(U){return new(U||A)(f.Y36(Q.sK),f.Y36(y.B))},A.\u0275cmp=f.Xpm({type:A,selectors:[["card-text-view"]],inputs:{text_vm:"text_vm"},decls:14,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"item"],["class","icon",3,"color","src",4,"ngIf"],["class","icon text-icon",4,"ngIf"],[1,"card-content"],[1,"label","label-fav"],[3,"color",4,"ngIf"],[1,"icon",3,"color","src"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"]],template:function(U,N){1&U&&(f.TgZ(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-item",2),f.YNc(3,u,1,2,"ion-icon",3),f.YNc(4,s,6,2,"div",4),f._UZ(5,"ion-label"),f.qZA()(),f.TgZ(6,"ion-card-content",5)(7,"ion-item",2)(8,"ion-label",6)(9,"p"),f._uU(10),f.qZA(),f.TgZ(11,"h1"),f._uU(12),f.qZA(),f.YNc(13,L,3,5,"h2",7),f.qZA()()()()),2&U&&(f.xp6(3),f.Q6J("ngIf",null==N.text_vm.ui.icon),f.xp6(1),f.Q6J("ngIf",N.text_vm.ui.icon),f.xp6(6),f.AsE("",N.text_vm.ui.room," \u2022 ",N.text_vm.ui.category,""),f.xp6(2),f.Oqu(N.text_vm.ui.name),f.xp6(1),f.Q6J("ngIf",""!==N.text_vm.ui.status.text))},dependencies:[M.O5,t.PM,t.FN,t.Zi,t.gu,t.Ie,t.Q$,Q.X$]}),b})()},7066:(X,Y,l)=>{l.d(Y,{a:()=>T});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6223),b=l(6089),Z=l(717);function U(p,_){if(1&p&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function N(p,_){if(1&p&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,U,2,3,"h2",7),t.qZA()()()()),2&p){const i=_.ngIf;t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(3),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function J(p,_){if(1&p&&(t.ynx(0),t.YNc(1,N,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function $(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.AsE("",i.ui.room," \u2022 ",i.ui.category,"")}}function S(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.room)}}function W(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.category)}}function k(p,_){if(1&p&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function V(p,_){if(1&p&&(t.TgZ(0,"ion-card",10)(1,"ion-card-header",11)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",12),t.YNc(8,$,2,2,"p",0),t.YNc(9,S,2,1,"p",0),t.YNc(10,W,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,k,2,3,"h2",7),t.qZA()()()()),2&p){const i=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function E(p,_){if(1&p&&(t.ynx(0),t.YNc(1,V,14,9,"ion-card",9),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function R(p,_){if(1&p){const i=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",16),t.NdJ("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.arm(a,e))}),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-card",17)(11,"ion-card-content",3)(12,"ion-item",4)(13,"ion-toggle",18),t.NdJ("ngModelChange",function(e){t.CHM(i);const n=t.oxw(2);return t.KtG(n.presence=e)})("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.presenceToggle(a,e))}),t._uU(14," Presence detection "),t.qZA()()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-card",17)(18,"ion-card-content",3)(19,"ion-item",4)(20,"ion-toggle",19),t.NdJ("ngModelChange",function(e){t.CHM(i);const n=t.oxw(2);return t.KtG(n.delayedon=e)}),t._uU(21," Arming delayed "),t.qZA()()()()()(),t.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-button",20),t._uU(25," History "),t.qZA()()()()}if(2&p){const i=_.ngIf,r=t.oxw(2);t.xp6(3),t.Q6J("text_vm",i),t.xp6(4),t.hij(" ",i.ui.button.text," "),t.xp6(6),t.Q6J("ngModel",r.presence),t.xp6(7),t.Q6J("ngModel",r.delayedon),t.xp6(4),t.MGl("routerLink","",i.control.uuid,"/sensors")}}function B(p,_){if(1&p&&(t.ynx(0),t.YNc(1,R,26,5,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}let T=(()=>{var p;class _{constructor(r,e){this.translate=r,this.controlService=e,this.buttonType=y.W,this.viewType=y.G,this.delayedon=!1,this.presence=!0}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([r,e,n])=>this.updateVM(r,e,n))):console.error("Component 'control-alarm' not available for rendering.")}updateVM(r,e,n){let a=n.find(v=>v.uuid===r.room&&v.serialNr===r.serialNr),g=e.find(v=>v.uuid===r.category&&v.serialNr===r.serialNr),c=!!Number(r.states.armed),m=c?"Armed":"Disarmed",h=c?"Disarm alarm":"Arm alarm";return{control:{...r,icon:{href:"assets/icons/svg/shield.svg",color:c?"primary":M.c.getColor("dark")}},ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:g&&g.name?g.name:"unknown",status:{text:this.translate.instant(m),color:M.c.getColor(c?"primary":"secondary")},button:{text:this.translate.instant(h)}},state:c}}arm(r,e){let n;r.state?n="off":(n=this.delayedon?"delayedon/":"on/",n+=this.presence?"1":"0"),this.controlService.updateControl(r.control,n)}presenceToggle(r,e){let n;r.state&&(n="dismv/"+(this.presence?"1":"0"),this.controlService.updateControl(r.control,n))}showHistory(r,e){}}return(p=_).\u0275fac=function(r){return new(r||p)(t.Y36(u.sK),t.Y36(s.B))},p.\u0275cmp=t.Xpm({type:p,selectors:[["control-alarm-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],["translate","",3,"color",4,"ngIf"],["translate",""],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"card"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange","click"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange"],["expand","block","translate","",1,"push-button",3,"routerLink"]],template:function(r,e){1&r&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",e.view===e.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.DETAILED))},dependencies:[L.O5,o.YG,o.PM,o.FN,o.Zi,o.wI,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.ho,o.w,o.YI,A.JJ,A.On,b.rH,u.Pi,Z.h,L.Ov]}),_})()},4403:(X,Y,l)=>{l.d(Y,{x:()=>_});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(717),Z=l(8513);function U(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function N(i,r){if(1&i&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,U,2,3,"h2",7),t.qZA(),t.GkF(8),t.qZA()()()),2&i){const e=r.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.ui.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function J(i,r){if(1&i&&(t.ynx(0),t.YNc(1,N,9,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function $(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function S(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function W(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function k(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function V(i,r){if(1&i&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,$,2,2,"p",0),t.YNc(9,S,2,1,"p",0),t.YNc(10,W,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,k,2,3,"h2",7),t.qZA()()()()),2&i){const e=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(e.ui.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function E(i,r){if(1&i&&(t.ynx(0),t.YNc(1,V,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function R(i,r){if(1&i&&(t.TgZ(0,"ion-col",16),t._UZ(1,"control-light-v2-view",17),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("control",e)("view",n.viewType.LIST_ITEM_POPUP)}}function B(i,r){if(1&i&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,R,2,2,"ion-col",15),t.qZA()()),2&i){const e=r.ngIf;t.xp6(3),t.Q6J("text_vm",e),t.xp6(2),t.Q6J("ngForOf",e.controls)}}function T(i,r){if(1&i&&(t.ynx(0),t.YNc(1,B,6,2,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}var p=l(9572).sprintf;let _=(()=>{var i;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.controls$,this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([n,a,g,c])=>this.updateVM(n,a,g,c))):console.error("Component 'control-central-light' not available for rendering.")}updateVM(n,a,g,c){let m=c.find(w=>w.uuid===n.room&&w.serialNr===n.serialNr),h=g.find(w=>w.uuid===n.category&&w.serialNr===n.serialNr),d=n.details.controls.map(w=>w.uuid),v=a.filter(w=>d.indexOf(w.uuid)>-1),C=d.length,O="",x=!1;v.forEach(w=>{w.states.activeMoods&&w.states.activeMoods[0]&&778===w.states.activeMoods[0]&&C--});let P=v.sort((w,D)=>this.getRoomName(c,w.serialNr,w.room).localeCompare(this.getRoomName(c,D.serialNr,D.room)));switch(C){case 0:O=this.translate.instant("All off"),x=!1;break;case 1:O=p(this.translate.instant("On in %s room"),1),x=!0;break;default:O=p(this.translate.instant("On in %s rooms"),C),x=!0}return{control:{...n,icon:{href:n.icon.href,color:x?"primary":"dark"}},controls:P,ui:{name:n.name,room:m.name,category:h.name,status:{text:O,color:M.c.getColor(x?"primary":"secondary")}}}}getRoomName(n,a,g){return n.find(c=>c.uuid===g&&c.serialNr===a).name}updateSegment(){}clickLightButton(n,a,g){g.preventDefault(),g.stopPropagation()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(u.sK),t.Y36(s.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["control-central-light-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","view"]],template:function(n,a){1&n&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,T,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[L.sg,L.O5,o.PM,o.FN,o.Zi,o.wI,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,b.h,Z.M,L.Ov]}),r})()},8759:(X,Y,l)=>{l.d(Y,{j:()=>n});var f=l(7027),Q=l(2572),y=l(7398),M=l(6814),t=l(6308),u=l(7658),s=l(6676),o=l(5879),A=l(9515),b=l(4898),Z=l(6223),U=l(6089),N=l(717);function J(a,g){if(1&a&&(o.TgZ(0,"h2"),o._uU(1),o.qZA()),2&a){const c=o.oxw().ngIf;o.Udp("color",c.ui.status.color),o.xp6(1),o.hij(" ",c.ui.status.text,"")}}function $(a,g){if(1&a&&(o.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),o._UZ(3,"ion-icon",5),o.TgZ(4,"ion-label",6)(5,"h1"),o._uU(6),o.qZA(),o.YNc(7,J,2,3,"h2",7),o.qZA()()()()),2&a){const c=g.ngIf;o.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),o.xp6(3),o.s9C("color",c.control.icon.color),o.s9C("src",c.control.icon.href),o.xp6(3),o.Oqu(c.control.name),o.xp6(1),o.Q6J("ngIf",""!==c.ui.status.text)}}function S(a,g){if(1&a&&(o.ynx(0),o.YNc(1,$,8,6,"ion-card",1),o.ALo(2,"async"),o.BQk()),2&a){const c=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,c.vm$))}}function W(a,g){if(1&a&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&a){const c=o.oxw().ngIf;o.xp6(1),o.AsE("",c.ui.room," \u2022 ",c.ui.category,"")}}function k(a,g){if(1&a&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&a){const c=o.oxw().ngIf;o.xp6(1),o.Oqu(c.ui.room)}}function V(a,g){if(1&a&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&a){const c=o.oxw().ngIf;o.xp6(1),o.Oqu(c.ui.category)}}function E(a,g){if(1&a&&(o.TgZ(0,"h2"),o._uU(1),o.qZA()),2&a){const c=o.oxw().ngIf;o.Udp("color",c.ui.status.color),o.xp6(1),o.hij(" ",c.ui.status.text,"")}}function R(a,g){if(1&a&&(o.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),o._UZ(3,"ion-icon",5)(4,"ion-label"),o.qZA()(),o.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),o.YNc(8,W,2,2,"p",0),o.YNc(9,k,2,1,"p",0),o.YNc(10,V,2,1,"p",0),o.TgZ(11,"h1"),o._uU(12),o.qZA(),o.YNc(13,E,2,3,"h2",7),o.qZA()()()()),2&a){const c=g.ngIf,m=o.oxw(2);o.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),o.xp6(3),o.s9C("color",c.control.icon.color),o.s9C("src",c.control.icon.href),o.xp6(5),o.Q6J("ngIf","home"===m.key),o.xp6(1),o.Q6J("ngIf","room"===m.key),o.xp6(1),o.Q6J("ngIf","category"===m.key),o.xp6(2),o.Oqu(c.control.name),o.xp6(1),o.Q6J("ngIf",""!==c.ui.status.text)}}function B(a,g){if(1&a&&(o.ynx(0),o.YNc(1,R,14,9,"ion-card",8),o.ALo(2,"async"),o.BQk()),2&a){const c=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,c.vm$))}}function T(a,g){if(1&a){const c=o.EpF();o.TgZ(0,"ion-button",17),o._uU(1),o.TgZ(2,"ion-alert",18),o.NdJ("didDismiss",function(h){o.CHM(c);const d=o.oxw().ngIf,v=o.oxw(2);return o.KtG(v.cancelTimer(h,d))}),o.qZA()()}if(2&a){const c=o.oxw().ngIf,m=o.oxw(2);o.xp6(1),o.hij(" ",c.ui.timer.text," "),o.xp6(1),o.MGl("header","",c.ui.timer.text,"?"),o.Q6J("buttons",m.cancelTimerButtons)}}function p(a,g){if(1&a){const c=o.EpF();o.TgZ(0,"ion-item",21)(1,"ion-toggle",22),o.NdJ("ngModelChange",function(h){o.CHM(c);const d=o.oxw(4);return o.KtG(d.output=h)}),o._uU(2,"Output"),o.qZA()(),o.TgZ(3,"ion-datetime",23,24),o.NdJ("ionChange",function(h){o.CHM(c);const d=o.oxw(2).ngIf,v=o.oxw(2);return o.KtG(v.dateChanged(h,d))}),o.TgZ(5,"span",25),o._uU(6,"Time"),o.qZA(),o.TgZ(7,"ion-buttons",26)(8,"ion-button",27),o.NdJ("click",function(){o.CHM(c);const h=o.oxw(4);return o.KtG(h.cancel())}),o._uU(9,"Cancel"),o.qZA(),o.TgZ(10,"ion-button",28),o.NdJ("click",function(){o.CHM(c);const h=o.oxw(4);return o.KtG(h.confirm())}),o._uU(11,"OK"),o.qZA()()()}if(2&a){const c=o.oxw(2).ngIf,m=o.oxw(2);o.xp6(1),o.Q6J("ngModel",m.output),o.xp6(2),o.s9C("locale",c.ui.calendar.locale),o.Q6J("ngModel",c.ui.calendar.datetime)}}function _(a,g){if(1&a&&(o.TgZ(0,"ion-button",19),o._uU(1),o.TgZ(2,"ion-popover",20),o.YNc(3,p,12,3,"ng-template"),o.qZA()()),2&a){const c=o.oxw().ngIf;o.xp6(1),o.hij(" ",c.ui.timer.text," ")}}function i(a,g){if(1&a&&(o.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),o._UZ(3,"card-text-view",14),o.qZA()(),o.TgZ(4,"ion-row")(5,"ion-col"),o.YNc(6,T,3,3,"ion-button",15),o.YNc(7,_,4,1,"ion-button",16),o.qZA()()()),2&a){const c=g.ngIf;o.xp6(3),o.Q6J("text_vm",c),o.xp6(3),o.Q6J("ngIf",c.ui.timer.enabled),o.xp6(1),o.Q6J("ngIf",!c.ui.timer.enabled)}}function r(a,g){if(1&a&&(o.ynx(0),o.YNc(1,i,8,3,"ion-grid",12),o.ALo(2,"async"),o.BQk()),2&a){const c=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,c.vm$))}}var e=l(9572).sprintf;let n=(()=>{var a;class g{constructor(m,h){this.translate=m,this.controlService=h,this.buttonType=t.W,this.viewType=t.G,this.cancelTimerButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,Q.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,y.U)(([m,h,d])=>this.updateVM(m,h,d))):console.error("Component 'control-daytimer' not available for rendering.")}updateVM(m,h,d){let v=d.find(q=>q.uuid===m.room&&q.serialNr===m.serialNr),C=h.find(q=>q.uuid===m.category&&q.serialNr===m.serialNr),O=Number(m.states.value)||m.details.analog,x=s({h:(new Date).getHours(),s:(new Date).getMinutes()}),P="00:00",I="00:00";if(m.states.entriesAndDefaultValue){let q=m.states.entriesAndDefaultValue;q=q.replaceAll("}\n{","},\n{"),q=q.replace(/([a-zA-Z]+)(: )/gm,'"$1"$2'),q=q.replace(/(: )([a-zA-Z\-\d:]+)/gm,': "$2"');let lt=JSON.parse(q);if(Number(lt.entries)>0){let nt=lt.entry.filter(G=>G.mode===m.states.mode);for(let G=0;G<nt.length;G++){let H=nt[G];if(x.isAfter(s(H.to,"HH:mm"))&&(I=H.to),x.isBefore(s(H.from,"HH:mm"))&&(P=H.from),x.isAfter(s(H.from,"HH:mm"))&&x.isBefore(s(H.to,"HH:mm"))){I=H.from,P=H.to;break}}}}let w=Number(m.states.override)>0,D=m.details.analog?e(m.details.format,m.states.value):Number(m.states.value)?m.details.text.on:m.details.text.off,F=new M.uU("en-US");const K=Date.now()+1e3*Number(m.states.override);let j=F.transform(K,"dd.MM.yyyy HH:mm");return w?D+=" "+this.translate.instant("Till").toLowerCase()+" "+j:I!==P&&(D+=" "+this.translate.instant("From").toLowerCase()+" "+I+" "+this.translate.instant("Till").toLowerCase()+" "+P),null==this.output&&(this.output=!O),{control:{...m,icon:{href:m.icon.href,color:O?"primary":u.c.getColor("dark")}},ui:{name:m.name,room:v&&v.name?v.name:"unknown",category:C&&C.name?C.name:"unknown",status:{text:D,color:u.c.getColor(O?"primary":"secondary")},timer:{enabled:w,endTime:Number(m.states.override),text:w?"Stop timer":"Start timer"},calendar:{output:this.output,datetime:void 0,locale:this.translate.currentLang}}}}cancelTimer(m,h){"ok"===m.detail.role&&this.controlService.updateControl(h.control,"stopOverride")}cancel(){this.datetime.cancel(!0)}confirm(){this.datetime.confirm(!0)}dateChanged(m,h){h.ui.calendar.datetime=m.detail.value;let v=6e4*Math.round((new Date(h.ui.calendar.datetime).getTime()-Date.now())/6e4)/1e3,C=h.ui.calendar.output?"1":"0";if(!(v>10))return void(h.calendar.datetime=void 0);let x="startOverride/"+String(C)+"/"+String(v);this.controlService.updateControl(h.control,x)}}return(a=g).\u0275fac=function(m){return new(m||a)(o.Y36(A.sK),o.Y36(b.B))},a.\u0275cmp=o.Xpm({type:a,selectors:[["control-daytimer-view"]],viewQuery:function(m,h){if(1&m&&o.Gf(f.x4,5),2&m){let d;o.iGM(d=o.CRH())&&(h.datetime=d.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","stop-timer",4,"ngIf"],["class","push-button","expand","block","id","datetime-popover",4,"ngIf"],["expand","block","id","stop-timer",1,"push-button"],["trigger","stop-timer",3,"header","buttons","didDismiss"],["expand","block","id","datetime-popover",1,"push-button"],["trigger","datetime-popover","cssClass","width-100"],[1,"date-item"],["color","primary","mode","ios","translate","",1,"toggle-active",3,"ngModel","ngModelChange"],["size","cover",3,"locale","ngModel","ionChange"],["datetime",""],["slot","time-label","translate",""],["slot","buttons"],["color","primary","translate","",3,"click"],["color","primary",3,"click"]],template:function(m,h){1&m&&(o.YNc(0,S,3,3,"ng-container",0),o.YNc(1,B,3,3,"ng-container",0),o.YNc(2,r,3,3,"ng-container",0)),2&m&&(o.Q6J("ngIf",h.view===h.viewType.LIST_ITEM),o.xp6(1),o.Q6J("ngIf",h.view===h.viewType.FAVORITE),o.xp6(1),o.Q6J("ngIf",h.view===h.viewType.DETAILED))},dependencies:[M.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.ho,f.d8,f.w,f.QI,f.YI,Z.JJ,Z.On,U.rH,A.Pi,N.h,M.Ov],styles:["ion-popover.width-100[_ngcontent-%COMP%]{--width: 300px}.date-item[_ngcontent-%COMP%]{font-size:18px;margin:0}.toggle-active[_ngcontent-%COMP%]{padding:10px 10px 0}ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}"]}),g})()},3914:(X,Y,l)=>{l.d(Y,{p:()=>T});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(717);function Z(p,_){if(1&p&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function U(p,_){if(1&p&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA()()()()),2&p){const i=_.ngIf;t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(3),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function N(p,_){if(1&p&&(t.ynx(0),t.YNc(1,U,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function J(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.AsE("",i.ui.room," \u2022 ",i.ui.category,"")}}function $(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.room)}}function S(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.category)}}function W(p,_){if(1&p&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function k(p,_){if(1&p&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,J,2,2,"p",0),t.YNc(9,$,2,1,"p",0),t.YNc(10,S,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,W,2,3,"h2",7),t.qZA()()()()),2&p){const i=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function V(p,_){if(1&p&&(t.ynx(0),t.YNc(1,k,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function E(p,_){if(1&p&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()()()),2&p){const i=_.ngIf;t.xp6(3),t.Q6J("text_vm",i)}}function R(p,_){if(1&p&&(t.ynx(0),t.YNc(1,E,4,1,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}var B=l(9572).sprintf;let T=(()=>{var p;class _{constructor(r,e){this.translate=r,this.controlService=e,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([r,e,n])=>this.updateVM(r,e,n))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(r,e,n){let a=n.find(v=>v.uuid===r.room&&v.serialNr===r.serialNr),g=e.find(v=>v.uuid===r.category&&v.serialNr===r.serialNr),m="V ";"en"==this.translate.currentLang&&(m="C ");let h="P "+Number(B("%.2f",r.states.prodCurr)).toLocaleString(this.translate.currentLang)+" kW \u2022 "+m+Number(B("%.2f",r.states.consCurr)).toLocaleString(this.translate.currentLang)+" kW";return{control:{...r,icon:{href:"assets/icons/svg/leaf.svg",color:"primary"},states:{prodCurr:this.format(r.states.prodCurr,"kW"),prodCurrDay:this.format(r.states.prodCurrDay,"kWh"),prodCurrMonth:this.format(r.states.prodCurrMonth,"kWh"),prodCurrYear:this.format(r.states.prodCurrYear,"kWh"),prodTotal:this.format(r.states.prodTotal,"kWh"),consCurr:this.format(r.states.consCurr,"kW"),consCurrDay:this.format(r.states.consCurrDay,"kWh"),gridCurr:this.format(r.states.gridCurr,"kW"),batteryCurr:this.format(r.states.batteryCurr,"kW"),stateOfCharge:this.format(r.states.stateOfCharge,""),earningsDay:this.format(r.states.earningsDay,"euro"),earningsMonth:this.format(r.states.earningsMonth,"euro"),earningsYear:this.format(r.states.earningsYear,"euro"),earningsTotal:this.format(r.states.earningsTotal,"euro"),priceDelivery:this.format(r.states.priceDelivery,""),priceConsumption:this.format(r.states.priceConsumption,""),co2Factor:r.states.prodCurr.co2Factor,generatorType:r.states.prodCurr.generatorType,mode:r.states.mode,online:r.states.prodCurr.online}},ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:g&&g.name?g.name:"unknown",status:{text:h,color:M.c.getColor("primary")}}}}format(r,e){let n=Number(r);return String(Number(B("%.2f",n)).toLocaleString(this.translate.currentLang))+" "+e}}return(p=_).\u0275fac=function(r){return new(r||p)(t.Y36(u.sK),t.Y36(s.B))},p.\u0275cmp=t.Xpm({type:p,selectors:[["control-fronius-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(r,e){1&r&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,V,3,3,"ng-container",0),t.YNc(2,R,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",e.view===e.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.DETAILED))},dependencies:[L.O5,o.PM,o.FN,o.Zi,o.wI,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,b.h,L.Ov]}),_})()},6353:(X,Y,l)=>{l.d(Y,{p:()=>g});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6223),b=l(6089),Z=l(9140);const U=["thermostat"];let N=(()=>{var c;class m{constructor(d,v,C,O){this.translateService=d,this.controlService=v,this.renderer=C,this.storageService=O,this.onChange=new t.vpe,this.ambientTemperatureStr="",this.targetTemperatureStr=["",""],this.emitChange=!1,this.disabled=!0,this.ticks={points:[],pointsAmbient:[],pointsTarget:[],min:null,max:null,rangeValue:null,theta:null,degrees:null,offsetDegrees:null,outerRadius:null,innerRadius:null},this.svg={root:null,group:null,dial:null,tickArray:[],ring:null,touchArea:null,txtTarget:null,txtTemperature:null,txtTargetTemp:null,txtTargetTempDot:null,txtAmbientTemp:null,leaf:null,heating:null,cooling:null,txtAway:null,iconUp:null,iconDown:null,btnUp:null,btnDown:null,unit:null},this.props={height:"350px",width:"350px",numTicks:150,minValue:10,maxValue:30,away:!1,leaf:!1,is_heating:!1,is_cooling:!1,ambientTemperature:10,targetTemperature:10,hvacMode:"heating"},this.diameter=350,this.radius=this.diameter/2,this.ticks.rangeValue=this.props.maxValue-this.props.minValue,this.ticks.outerRadius=this.diameter/30,this.ticks.innerRadius=this.diameter/8,this.ticks.degrees=300,this.ticks.offsetDegrees=180-(360-this.ticks.degrees)/2,this.ticks.theta=this.ticks.degrees/this.props.numTicks,this.ticks.points=[[this.radius-1,this.ticks.outerRadius],[this.radius+1,this.ticks.outerRadius],[this.radius+1,this.ticks.innerRadius],[this.radius-1,this.ticks.innerRadius]],this.ticks.pointsTarget=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius+20],[this.radius-2.5,this.ticks.innerRadius+20]],this.ticks.pointsAmbient=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius],[this.radius-2.5,this.ticks.innerRadius]],this.storageSubscription=this.storageService.settings$.subscribe(x=>{x&&x.app&&x.app.darkTheme&&(this.darkTheme=x.app.darkTheme)})}ngOnChanges(){this.props.ambientTemperature=Number(this.tempActual),this.props.targetTemperature=Number(this.tempTarget);let d=Number(this.mode),v=Number(this.preset);this.disabled=5!=d&&6!=d,this.props.leaf=0==v,this.render()}ngOnInit(){this.styles=this.getStyles(),this.initSVG(),this.render(),this.svg.touchArea.addEventListener("mouseup",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousedown",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("click",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("touchend",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousemove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.btnDown.addEventListener("click",this.btnDown.bind(this)),this.svg.btnDown.addEventListener("touchstart",this.btnDownStart.bind(this)),this.svg.btnDown.addEventListener("touchend",this.btnDownEnd.bind(this)),this.svg.btnUp.addEventListener("click",this.btnUp.bind(this)),this.svg.btnUp.addEventListener("touchstart",this.btnUpStart.bind(this)),this.svg.btnUp.addEventListener("touchend",this.btnUpEnd.bind(this))}ngOnDestroy(){this.storageSubscription.unsubscribe()}btnUp(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)+.5,this.props.targetTemperature>this.props.maxValue&&(this.props.targetTemperature=this.props.maxValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDown(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)-.5,this.props.targetTemperature<this.props.minValue&&(this.props.targetTemperature=this.props.minValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDownStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnDown(d)},80))}btnUpStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnUp(d)},80))}btnDownEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}btnUpEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}getStyles(){return{svg:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},dial:{fill:"transparent",WebkitTransition:"fill 0.5s",transition:"fill 0.5s"},ring:{fill:"transparent",stroke:this.darkTheme?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.9)","stroke-width":"40",filter:"drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.2))"},description:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"18px","font-weight":"normal",visibility:this.props.away?"hidden":"visible"},targettemp:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"98px","letter-spacing":"0.01em","font-weight":"bold",visibility:this.props.away?"hidden":"visible"},targettempdot:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"40px","font-weight":"bold"},ambienttemp:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"18px","letter-spacing":"0.01em","font-weight":"bold"},away:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"72px","font-weight":"bold",opacity:this.props.away?1:0,"pointer-events":"none"},leaf:{fill:"#13EB13",opacity:this.props.leaf?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},heating:{fill:"#e73246",opacity:this.props.is_heating?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},cooling:{fill:"#00b0db",opacity:this.props.is_cooling?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},unit:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"20px"}}}pointsToPath(d){return[d.map((v,C)=>[C>0?"L":"M",v[0]," ",v[1]].join("")).join(" "),"Z"].join("")}rotatePoint(d,v,C){const O=v*Math.PI/180,x=d[0]-C[0],P=d[1]-C[1];return[x*Math.cos(O)-P*Math.sin(O)+C[0],x*Math.sin(O)+P*Math.cos(O)+C[1]]}rotatePoints(d,v,C){const O=this;return d.map(x=>O.rotatePoint(x,v,C))}restrictToRange(d,v,C){return d<v?v:d>C?C:d}scalePoint(d,v){return isNaN(d)?d:d*v}createSVGElement(d,v,C){let O=document.createElementNS("http://www.w3.org/2000/svg",d);return this.attr(O,v),C&&C.appendChild(O),O}createSVGTextElement(d,v,C){let O=this.createSVGElement("text",v,C);return O.appendChild(document.createTextNode(d)),O}attr(d,v){for(let C in v)"object"==typeof v[C]&&null!==v[C]?this.attr(d,v[C]):d.setAttribute(C,v[C])}setMixMaxRange(){let d,v;this.props.away?(d=this.props.ambientTemperature,v=d):(d=Math.min(this.props.ambientTemperature,this.props.targetTemperature),v=Math.max(this.props.ambientTemperature,this.props.targetTemperature)),this.ticks.min=this.restrictToRange(Math.round((d-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1),this.ticks.max=this.restrictToRange(Math.round((v-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1)}initSVG(){const d=this;this.setMixMaxRange(),this.svg.tickArray=[],this.svg.root=this.createSVGElement("svg",{width:this.props.width,height:this.props.height,viewBox:"0 0 "+this.diameter+" "+this.diameter,style:this.styles.svg},this.thermostat.nativeElement),this.svg.ring=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:.842*this.radius,style:this.styles.ring},this.svg.root),this.svg.group=this.createSVGElement("g",{},this.svg.root);for(let O=0;O<this.props.numTicks;O++){const x=this.createSVGElement("path",{key:["tick-",O].join(""),d:this.pointsToPath(this.rotatePoints(this.ticks.points,O*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:"rgba(255, 255, 255, 0.3)"}},this.svg.group);this.svg.tickArray.push(x)}this.svg.dial=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:this.styles.dial},this.svg.root),this.svg.touchArea=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:{fill:"transparent"}},this.svg.root),this.svg.txtTarget=this.createSVGTextElement(this.translateService.instant("Target"),{x:this.radius,y:this.radius-this.radius/2.2,style:this.styles.description},this.svg.root),this.svg.txtTemperature=this.createSVGTextElement(this.translateService.instant("Temperature").toLowerCase(),{x:this.radius,y:this.radius-this.radius/3,style:this.styles.description},this.svg.root),this.svg.txtTargetTemp=this.createSVGTextElement(this.targetTemperatureStr[0],{x:this.radius,y:this.radius,style:this.styles.targettemp},this.svg.root),this.svg.txtTargetTempDot=this.createSVGTextElement(this.targetTemperatureStr[1],{x:this.radius+this.radius/2.5,y:this.radius-this.radius/8.5,style:this.styles.targettempdot},this.svg.root),this.svg.txtAmbientTemp=this.createSVGTextElement(this.ambientTemperatureStr,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp},this.svg.root),this.svg.txtAway=this.createSVGTextElement("AWAY",{x:this.radius,y:this.radius,style:this.styles.away},this.svg.root);const v=this.radius/5/100;let C=["M",3,84,"c",24,17,51,18,73,-6,"C",100,52,100,22,100,4,"c",-13,15,-37,9,-70,19,"C",4,32,0,63,0,76,"c",6,-7,18,-17,33,-23,24,-9,34,-9,48,-20,-9,10,-20,16,-43,24,"C",22,63,8,78,3,84,"z"].map(O=>d.scalePoint(O,v)).join(" ");this.translate=[this.radius-100*v*.5,1.4*this.radius],this.svg.leaf=this.createSVGElement("path",{d:C,style:this.styles.leaf,transform:"translate("+this.translate[0]+","+this.translate[1]+")"},this.svg.root),this.svg.heating=this.createSVGElement("path",{d:"M394.23 197.56a300.43 300.43 0 00-53.37-90C301.2 61.65 249.05 32 208 32a16 16 0 00-15.48 20c13.87 53-14.88 97.07-45.31 143.72C122 234.36 96 274.27 96 320c0 88.22 71.78 160 160 160s160-71.78 160-160c0-43.3-7.32-84.49-21.77-122.44zm-105.9 221.13C278 429.69 265.05 432 256 432s-22-2.31-32.33-13.31S208 390.24 208 368c0-25.14 8.82-44.28 17.34-62.78 4.95-10.74 10-21.67 13-33.37a8 8 0 0112.49-4.51A126.48 126.48 0 01275 292c18.17 24 29 52.42 29 76 0 22.24-5.42 39.77-15.67 50.69z",style:this.styles.heating,transform:"scale(0.05) translate(1700, 3000)"},this.svg.root),this.svg.cooling=this.createSVGElement("path",{d:"M461 349l-34-19.64a89.53 89.53 0 0120.94-16 22 22 0 00-21.28-38.51 133.62 133.62 0 00-38.55 32.1L300 256l88.09-50.86a133.46 133.46 0 0038.55 32.1 22 22 0 1021.28-38.51 89.74 89.74 0 01-20.94-16l34-19.64A22 22 0 10439 125l-34 19.63a89.74 89.74 0 01-3.42-26.15A22 22 0 00380 96h-.41a22 22 0 00-22 21.59 133.61 133.61 0 008.5 49.41L278 217.89V116.18a133.5 133.5 0 0047.07-17.33 22 22 0 00-22.71-37.69A89.56 89.56 0 01278 71.27V38a22 22 0 00-44 0v33.27a89.56 89.56 0 01-24.36-10.11 22 22 0 10-22.71 37.69A133.5 133.5 0 00234 116.18v101.71L145.91 167a133.61 133.61 0 008.52-49.43 22 22 0 00-22-21.59H132a22 22 0 00-21.59 22.41 89.74 89.74 0 01-3.41 26.19L73 125a22 22 0 10-22 38.1l34 19.64a89.74 89.74 0 01-20.94 16 22 22 0 1021.28 38.51 133.62 133.62 0 0038.55-32.1L212 256l-88.09 50.86a133.62 133.62 0 00-38.55-32.1 22 22 0 10-21.28 38.51 89.74 89.74 0 0120.94 16L51 349a22 22 0 1022 38.1l34-19.63a89.74 89.74 0 013.42 26.15A22 22 0 00132 416h.41a22 22 0 0022-21.59 133.61 133.61 0 00-8.5-49.41L234 294.11v101.71a133.5 133.5 0 00-47.07 17.33 22 22 0 1022.71 37.69A89.56 89.56 0 01234 440.73V474a22 22 0 0044 0v-33.27a89.56 89.56 0 0124.36 10.11 22 22 0 0022.71-37.69A133.5 133.5 0 00278 395.82V294.11L366.09 345a133.61 133.61 0 00-8.52 49.43 22 22 0 0022 21.59h.43a22 22 0 0021.59-22.41 89.74 89.74 0 013.41-26.19l34 19.63A22 22 0 10461 349z",style:this.styles.cooling,transform:"scale(0.05) translate(1700, 3600)"},this.svg.root),this.svg.iconDown=this.createSVGElement("path",{d:"M 7 12 l 9 9 9-9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(125, 299)"},this.svg.root),this.svg.iconUp=this.createSVGElement("path",{d:"M 7 12 l 9-9 9 9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(200, 307)"},this.svg.root),this.svg.btnDown=this.createSVGElement("circle",{cx:140,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.btnUp=this.createSVGElement("circle",{cx:215,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.unit=this.createSVGTextElement("\xb0C",{x:this.radius+70,y:this.radius+30,style:this.styles.unit},this.svg.root)}render(){if(!this.svg.root)return;this.setMixMaxRange(),this.svg.tickArray.forEach((x,P)=>{let I=this.props.targetTemperature>this.props.ambientTemperature?P===this.ticks.max:P===this.ticks.min,D=P>=this.ticks.min&&P<=this.ticks.max;this.attr(x,{d:this.pointsToPath(this.rotatePoints(I||(this.props.targetTemperature>this.props.ambientTemperature?P===this.ticks.min:P===this.ticks.max)?I?this.ticks.pointsTarget:this.ticks.pointsAmbient:this.ticks.points,P*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:this.darkTheme?D?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.3)":D?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.2)"}})});const d=[this.radius,this.ticks.outerRadius-(this.ticks.outerRadius-this.ticks.innerRadius)/2],v=this.restrictToRange(this.props.ambientTemperature,this.props.minValue,this.props.maxValue);let C=this.ticks.degrees*(v-this.props.minValue)/this.ticks.rangeValue-this.ticks.offsetDegrees;v>this.props.targetTemperature?C+=9:C-=9,this.ambientPosition=this.rotatePoint(d,C,[this.radius,this.radius]),this.ambientTemperatureStr=Number(this.props.ambientTemperature).toFixed(1),this.targetTemperatureStr=String(Math.round(2*this.props.targetTemperature)/2).split("."),this.svg.txtTargetTemp.textContent=this.targetTemperatureStr[0],this.svg.txtTargetTempDot.textContent=this.targetTemperatureStr[1],this.svg.txtAmbientTemp.textContent=this.ambientTemperatureStr,this.attr(this.svg.txtAmbientTemp,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp});let O=this.getTextSize(this.svg.txtTargetTemp);this.attr(this.svg.txtTargetTempDot,{x:175+O.width/2+12,y:175-O.height/2+39}),this.disabled?(this.attr(this.svg.iconDown,{style:{display:"none"}}),this.attr(this.svg.iconUp,{style:{display:"none"}}),this.attr(this.svg.btnDown,{style:{display:"none"}}),this.attr(this.svg.btnUp,{style:{display:"none"}})):(this.attr(this.svg.iconDown,{style:{display:"true"}}),this.attr(this.svg.iconUp,{style:{display:"true"}}),this.attr(this.svg.btnDown,{style:{display:"true"}}),this.attr(this.svg.btnUp,{style:{display:"true"}})),this.attr(this.svg.leaf,this.props.leaf?{style:{opacity:1}}:{style:{opacity:0}})}eventPosition(d){let v=this.svg.touchArea.getBoundingClientRect(),C=v.left+v.width/2,O=v.top+v.height/2;return d.targetTouches&&d.targetTouches.length?[C-d.targetTouches[0].clientX,O-d.targetTouches[0].clientY]:[C-d.x,O-d.y]}calcAngleDegrees(d,v){let C=180*Math.atan2(v,d)/Math.PI+(360-this.ticks.degrees);C<0&&(C+=360),C<=this.ticks.degrees&&(this.props.targetTemperature=C/this.ticks.degrees*(this.props.maxValue-this.props.minValue)+this.props.minValue,this.props.targetTemperature=Math.round(2*this.props.targetTemperature)/2,this.render())}dragEnd(d){if(this.disabled)return;let v=this.eventPosition(d);this.calcAngleDegrees(v[0],v[1]),this.onChange.emit(this.props.targetTemperature)}dragMove(d){if(this.disabled)return;d.preventDefault();let v=this.eventPosition(d);this.calcAngleDegrees(v[0],v[1])}getTextSize(d){const v=d.cloneNode(!0),C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.appendChild(v),document.body.appendChild(C);const{x:O,y:x,width:P,height:I}=v.getBBox();return document.body.removeChild(C),{x:O,y:x,width:P,height:I}}}return(c=m).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(s.B),t.Y36(t.Qsj),t.Y36(Z.V1))},c.\u0275cmp=t.Xpm({type:c,selectors:[["element-thermostat-view"]],viewQuery:function(d,v){if(1&d&&t.Gf(U,7),2&d){let C;t.iGM(C=t.CRH())&&(v.thermostat=C.first)}},inputs:{tempActual:"tempActual",tempTarget:"tempTarget",mode:"mode",preset:"preset"},outputs:{onChange:"onChange"},features:[t.TTD],decls:3,vars:0,consts:[[2,"display","flex","justify-content","center"],["thermostat",""]],template:function(d,v){1&d&&(t.TgZ(0,"div",0),t._UZ(1,"div",null,1),t.qZA())}}),m})();function J(c,m){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function $(c,m){if(1&c&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()(),t.TgZ(9,"ion-label",8)(10,"h1"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,J,3,5,"h2",9),t.qZA()()()()),2&c){const h=m.ngIf;t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(3),t.Oqu(t.lcZ(12,6,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function S(c,m){if(1&c&&(t.ynx(0),t.YNc(1,$,14,8,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function W(c,m){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.AsE("",h.ui.room," \u2022 ",h.ui.category,"")}}function k(c,m){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.room)}}function V(c,m){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.category)}}function E(c,m){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function R(c,m){if(1&c&&(t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",13),t.YNc(12,W,2,2,"p",0),t.YNc(13,k,2,1,"p",0),t.YNc(14,V,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,E,3,5,"h2",9),t.qZA()()()()),2&c){const h=m.ngIf,d=t.oxw(2);t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(4),t.Q6J("ngIf","home"===d.key),t.xp6(1),t.Q6J("ngIf","room"===d.key),t.xp6(1),t.Q6J("ngIf","category"===d.key),t.xp6(2),t.Oqu(t.lcZ(17,9,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function B(c,m){if(1&c&&(t.ynx(0),t.YNc(1,R,19,11,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function T(c,m){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.Oqu(t.lcZ(2,2,h.name))}}function p(c,m){if(1&c&&(t.ynx(0),t.YNc(1,T,3,4,"ion-select-option",22),t.BQk()),2&c){const h=m.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function _(c,m){if(1&c&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&c){const h=t.oxw(2).$implicit,d=t.oxw().ngIf;t.xp6(1),t.AsE(" (",h.abs," ",d.ui.tempUnit,")")}}function i(c,m){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.YNc(3,_,2,2,"span",0),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.hij("",t.lcZ(2,3,h.name)," "),t.xp6(2),t.Q6J("ngIf",7!=h.id)}}function r(c,m){if(1&c&&(t.ynx(0),t.YNc(1,i,4,5,"ion-select-option",22),t.BQk()),2&c){const h=m.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function e(c,m){if(1&c){const h=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col")(3,"element-thermostat-view",16),t.NdJ("onChange",function(v){const O=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setTargetTemperature(O,v))}),t.qZA()()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-card",17)(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-select",18,19),t.NdJ("ionChange",function(v){const O=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setOperatingMode(O,v))}),t.ALo(11,"translate"),t.YNc(12,p,2,1,"ng-container",20),t.qZA()()()()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-card",17)(16,"ion-card-content",3)(17,"ion-item",4)(18,"ion-select",18,21),t.NdJ("ionChange",function(v){const O=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setTemperaturePreset(O,v))}),t.ALo(20,"translate"),t.YNc(21,r,2,1,"ng-container",20),t.qZA()()()()()()()}if(2&c){const h=m.ngIf,d=t.oxw(2);t.xp6(3),t.s9C("tempActual",h.ui.tempActual),t.s9C("tempTarget",h.ui.tempTarget),t.s9C("mode",h.ui.mode),t.s9C("preset",h.ui.preset),t.xp6(6),t.s9C("label",d.labelMode),t.Q6J("cancelText",t.lcZ(11,14,"Cancel"))("interfaceOptions",d.selectOperatingMode)("ngModel",h.ui.modeList[h.ui.mode].name),t.xp6(3),t.Q6J("ngForOf",h.ui.modeList),t.xp6(6),t.s9C("label",d.labelTemperature),t.Q6J("cancelText",t.lcZ(20,16,"Cancel"))("interfaceOptions",d.selectTemperaturePreset)("ngModel",h.ui.status.text),t.xp6(3),t.Q6J("ngForOf",h.ui.presetList)}}function n(c,m){if(1&c&&(t.ynx(0),t.YNc(1,e,22,18,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}var a=l(9572).sprintf;let g=(()=>{var c;class m{constructor(d,v){this.translate=d,this.controlService=v,this.viewType=y.G,this.ircModesDefaults=[{id:0,name:"Automatic",show:!0},{id:1,name:"Automatic (currently heating)",show:!1},{id:2,name:"Automatic (currently cooling)",show:!1},{id:3,name:"Automatic heating",show:!0},{id:4,name:"Automatic cooling",show:!0},{id:5,name:"Manual heating",show:!0},{id:6,name:"Manual cooling",show:!0}],this.temperatureModesDefaults=[{id:0,name:"Economy",value:null,abs:null,corr:1,show:!0},{id:1,name:"Comfort heating",value:null,abs:null,corr:0,show:!0},{id:2,name:"Comfort cooling",value:null,abs:null,corr:0,show:!0},{id:3,name:"Empty house",value:null,abs:null,corr:0,show:!0},{id:4,name:"Heat protection",value:null,abs:null,corr:0,show:!0},{id:5,name:"Increased heat",value:null,abs:null,corr:1,show:!0},{id:6,name:"Party",value:null,abs:null,corr:1,show:!0},{id:7,name:"Manual",value:null,abs:null,corr:0,show:!0}],this.selectTemperaturePreset={header:this.translate.instant("Temperature preset"),cssClass:"actionsheet"},this.selectOperatingMode={header:this.translate.instant("Operating mode"),cssClass:"actionsheet"},this.labelTemperature=this.translate.instant("Temperature"),this.labelMode=this.translate.instant("Mode")}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([d,v,C])=>this.updateVM(d,v,C))):console.error("Control component not available for rendering.")}updateVM(d,v,C){let O=C.find(z=>z.uuid===d.room&&z.serialNr===d.serialNr),x=v.find(z=>z.uuid===d.category&&z.serialNr===d.serialNr),P=[...this.temperatureModesDefaults],I=[...this.ircModesDefaults],w=["",""],D=d.states.mode,F=1==D||3==D||5==D?1:2;d.states.tempActual&&(w=a("%.1f",d.states.tempActual).split("."),w[1]="."+w[1]);let K=d.details.temperatures;P.forEach((z,tt)=>{if((K[tt]&&K[tt].isAbsolute||7==tt)&&(z.corr=0,z.value=Number(tt<7?d.states.temperatures[tt]:d.states.tempTarget),z.abs=z.value),K[tt]&&!K[tt].isAbsolute){let rt=-1;5==tt&&(rt=1),0==tt&&2==F&&(rt=1),z.corr=rt,z.value=Number(d.states.temperatures[tt]),z.abs=Number(d.states.temperatures[F])+rt*Number(d.states.temperatures[tt])}}),I[0].name=!d.states.mode||1!=d.states.mode&&2!=d.states.mode?"Automatic":I[d.states.mode].name;let j=Object.keys(d.subControls),ot=null;d.subControls[j[0]].states.value&&(ot=d.subControls[j[0]].states.value);let q=P.findIndex(z=>z.id===3-F);P[q].show=!1;let lt=P,nt=lt.find(z=>z.id==ot),G=nt&&nt.id?nt.id:0;return{control:d,ui:{name:this.translate.instant("Thermostat"),room:O&&O.name?O.name:"unknown",category:x&&x.name?x.name:"unknown",tempTarget:d.states.tempTarget,tempActual:d.states.tempActual,tempUnit:"\xb0C",modeList:I,mode:d.states.mode?d.states.mode:0,presetList:lt,preset:G,icon:{tempBase:w[0],tempDec:w[1]},status:{text:ot?nt.name:"unknown",color:M.c.getColor(G>0?"primary":"secondary")}}}}setOperatingMode(d,v){let C=d.ui.modeList.find(O=>O.name==v.detail.value);C&&C.id!=d.ui.mode&&this.controlService.updateControl(d.control,"mode/"+C.id)}setTemperaturePreset(d,v){let C=d.ui.presetList.find(O=>O.name==v.detail.value);if(C&&C.id!=d.ui.preset){let O="starttimer/"+String(C.id)+"/60";this.controlService.updateControl(d.control,O)}}setTargetTemperature(d,v){let C=Math.round(2*v)/2,O="settemp/7/"+String(C);this.controlService.updateControl(d.control,O)}}return(c=m).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(s.B))},c.\u0275cmp=t.Xpm({type:c,selectors:[["control-irc-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"],[1,"label"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"tempActual","tempTarget","mode","preset","onChange"],[1,"card"],["interface","action-sheet","hidden","true",1,"select-no-icon",3,"label","cancelText","interfaceOptions","ngModel","ionChange"],["modes",""],[4,"ngFor","ngForOf"],["presets",""],[3,"value",4,"ngIf"],[3,"value"]],template:function(d,v){1&d&&(t.YNc(0,S,3,3,"ng-container",0),t.YNc(1,B,3,3,"ng-container",0),t.YNc(2,n,3,3,"ng-container",0)),2&d&&(t.Q6J("ngIf",v.view===v.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",v.view===v.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",v.view===v.viewType.DETAILED))},dependencies:[L.sg,L.O5,o.PM,o.FN,o.Zi,o.wI,o.jY,o.Ie,o.Q$,o.Nd,o.t9,o.n0,o.QI,o.YI,A.JJ,A.On,b.rH,N,L.Ov,u.X$]}),m})()},267:(X,Y,l)=>{l.d(Y,{f:()=>p});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089);let b=(()=>{var _;class i{constructor(e,n){this.gestureCtrl=e,this.onStart=new t.vpe,this.onEnd=new t.vpe,this.nativeElement=n.nativeElement}ngOnInit(){this.pressGesture=this.gestureCtrl.create({gestureName:"long-press",el:this.nativeElement,threshold:0,onStart:e=>{this.delay=700,this.endDelay=700,this.onStartTimer(),this.onStart.emit(e.event)},onEnd:e=>{this.onEndTimer(e.event)}}),this.pressGesture.enable()}onStartTimer(){setTimeout(()=>{this.endDelay=0},this.delay)}onEndTimer(e){setTimeout(()=>{this.onEnd.emit(e)},this.endDelay)}}return(_=i).\u0275fac=function(e){return new(e||_)(t.Y36(o.TH),t.Y36(t.SBq))},_.\u0275dir=t.lG2({type:_,selectors:[["","long-press",""]],outputs:{onStart:"onStart",onEnd:"onEnd"}}),i})();var Z=l(717);function U(_,i){if(1&_&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function N(_,i){if(1&_){const r=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,U,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,g,n))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,g,n))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&_){const r=i.ngIf;t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(3),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function J(_,i){if(1&_&&(t.ynx(0),t.YNc(1,N,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function $(_,i){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function S(_,i){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.room)}}function W(_,i){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.category)}}function k(_,i){if(1&_&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function V(_,i){if(1&_){const r=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,g,n))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,g,n))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,$,2,2,"p",0),t.YNc(13,S,2,1,"p",0),t.YNc(14,W,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,k,2,3,"h2",7),t.qZA()()()()}if(2&_){const r=i.ngIf,e=t.oxw(2);t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function E(_,i){if(1&_&&(t.ynx(0),t.YNc(1,V,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function R(_,i){if(1&_){const r=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("onStart",function(){const a=t.CHM(r).ngIf,g=t.oxw(2);return t.KtG(g.clickButton(g.buttonType.DOWN,a,null))})("onEnd",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN_OFF,g,n))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("onStart",function(){const a=t.CHM(r).ngIf,g=t.oxw(2);return t.KtG(g.clickButton(g.buttonType.UP,a,null))})("onEnd",function(n){const g=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP_OFF,g,n))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,g=t.oxw(2);return t.KtG(g.clickButton(g.buttonType.FULL_CLOSE,a,null))}),t.TgZ(18,"ion-label",19)(19,"h1",20),t._uU(20,"Fully close"),t.qZA()()()(),t.TgZ(21,"ion-col")(22,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,g=t.oxw(2);return t.KtG(g.clickButton(g.buttonType.FULL_OPEN,a,null))}),t.TgZ(23,"ion-label",19)(24,"h1",20),t._uU(25,"Fully open"),t.qZA()()()()(),t.TgZ(26,"ion-row")(27,"ion-col")(28,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,g=t.oxw(2);return t.KtG(g.clickButton(g.buttonType.SHADE,a,null))}),t.TgZ(29,"ion-label",19)(30,"h1",20),t._uU(31,"Shade"),t.qZA()()()()()()}if(2&_){const r=i.ngIf;t.xp6(3),t.Q6J("text_vm",r)}}function B(_,i){if(1&_&&(t.ynx(0),t.YNc(1,R,32,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}var T=l(9572).sprintf;let p=(()=>{var _;class i{constructor(e,n){this.translate=e,this.controlService=n,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([e,n,a])=>this.updateVM(e,n,a))):console.error("Component 'control-jalousie' not available for rendering.")}updateVM(e,n,a){let g=a.find(v=>v.uuid===e.room&&v.serialNr===e.serialNr),c=n.find(v=>v.uuid===e.category&&v.serialNr===e.serialNr),m=100*e.states.position,h=T("%1.0f%% ",m)+this.translate.instant("Closed").toLowerCase();return m<1&&(h=this.translate.instant("Opened")),m>99&&(h=this.translate.instant("Closed")),{control:{...e,icon:{href:e.icon.href,color:m>0?"primary":"dark"}},ui:{name:e.name,room:g&&g.name?g.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:h,color:M.c.getColor(m>0?"primary":"secondary")}}}}clickButton(e,n,a){switch(a&&(a.preventDefault(),a.stopPropagation()),e){case y.W.UP:this.controlService.updateControl(n.control,"up");break;case y.W.UP_OFF:this.controlService.updateControl(n.control,"UpOff");break;case y.W.DOWN:this.controlService.updateControl(n.control,"down");break;case y.W.DOWN_OFF:this.controlService.updateControl(n.control,"DownOff");break;case y.W.FULL_OPEN:this.controlService.updateControl(n.control,"FullUp");break;case y.W.FULL_CLOSE:this.controlService.updateControl(n.control,"FullDown");break;case y.W.SHADE:this.controlService.updateControl(n.control,"shade")}}}return(_=i).\u0275fac=function(e){return new(e||_)(t.Y36(u.sK),t.Y36(s.B))},_.\u0275cmp=t.Xpm({type:_,selectors:[["control-jalousie-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block","long-press","",1,"push-button",3,"onStart","onEnd"],[1,"label"],["translate",""],["expand","block",1,"push-button",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[L.O5,o.YG,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,u.Pi,b,Z.h,L.Ov]}),i})()},8513:(X,Y,l)=>{l.d(Y,{M:()=>O});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6223),b=l(6089),Z=l(2571),U=l(7383);function N(x,P){if(1&x){const I=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-toggle",4),t.NdJ("click",function(D){const K=t.CHM(I).ngIf,j=t.oxw();return t.KtG(j.clickToggle(K,D))}),t._uU(4),t.qZA()()()()}if(2&x){const I=P.ngIf;t.xp6(3),t.Q6J("ngModel",I.ui.toggle),t.xp6(1),t.hij(" ",I.ui.name," ")}}let J=(()=>{var x;class P{constructor(w,D){this.translate=w,this.controlService=D}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,Q.U)(([w,D])=>this.updateVM(w,D))):console.error("SubControl component 'card-switch' not available for rendering.")}updateVM(w,D){let F="1"===D.states.active;return{control:w,subControl:D,ui:{name:D.name,status:{text:this.translate.instant(F?"On":"Off"),color:M.c.getColor(F?"primary":"secondary")},toggle:F}}}clickToggle(w,D){D.preventDefault(),D.stopPropagation(),this.controlService.updateControl(w.subControl,w.ui.toggle?"Off":"On")}}return(x=P).\u0275fac=function(w){return new(w||x)(t.Y36(u.sK),t.Y36(s.B))},x.\u0275cmp=t.Xpm({type:x,selectors:[["card-switch-view"]],inputs:{control:"control",subControl:"subControl"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],["color","primary","mode","ios",1,"toggle",3,"ngModel","click"]],template:function(w,D){1&w&&(t.YNc(0,N,5,2,"ion-card",0),t.ALo(1,"async")),2&w&&t.Q6J("ngIf",t.lcZ(1,1,D.vm$))},dependencies:[L.O5,o.PM,o.FN,o.Ie,o.ho,o.w,A.JJ,A.On,L.Ov]}),P})();var $=l(717);function S(x,P){if(1&x&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&x){const I=t.oxw().ngIf;t.Udp("color",I.ui.status.color),t.xp6(1),t.hij(" ",I.ui.status.text,"")}}function W(x,P){if(1&x){const I=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(D){const K=t.CHM(I).ngIf,j=t.oxw(2);return t.KtG(j.clickLightButton(j.buttonType.UP,K,D))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&x){const I=P.ngIf;t.hYB("routerLink","",I.control.serialNr,"/",I.control.uuid,""),t.xp6(3),t.s9C("color",I.control.icon.color),t.s9C("src",I.control.icon.href),t.xp6(3),t.Oqu(I.ui.name),t.xp6(1),t.Q6J("ngIf",""!==I.ui.status.text)}}function k(x,P){if(1&x&&(t.ynx(0),t.YNc(1,W,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&x){const I=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.vm$))}}function V(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const I=t.oxw().ngIf;t.xp6(1),t.AsE("",I.ui.room," \u2022 ",I.ui.category,"")}}function E(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const I=t.oxw().ngIf;t.xp6(1),t.Oqu(I.ui.room)}}function R(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const I=t.oxw().ngIf;t.xp6(1),t.Oqu(I.ui.category)}}function B(x,P){if(1&x&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&x){const I=t.oxw().ngIf;t.Udp("color",I.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,I.ui.status.text),"")}}function T(x,P){if(1&x){const I=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(D){const K=t.CHM(I).ngIf,j=t.oxw(2);return t.KtG(j.clickLightButton(j.buttonType.UP,K,D))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,V,2,2,"p",0),t.YNc(11,E,2,1,"p",0),t.YNc(12,R,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,B,3,5,"h2",7),t.qZA()()()()}if(2&x){const I=P.ngIf,w=t.oxw(2);t.hYB("routerLink","",I.control.serialNr,"/",I.control.uuid,""),t.xp6(3),t.s9C("color",I.control.icon.color),t.s9C("src",I.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===w.key),t.xp6(1),t.Q6J("ngIf","room"===w.key),t.xp6(1),t.Q6J("ngIf","category"===w.key),t.xp6(2),t.Oqu(I.ui.name),t.xp6(1),t.Q6J("ngIf",""!==I.ui.status.text)}}function p(x,P){if(1&x&&(t.ynx(0),t.YNc(1,T,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&x){const I=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.vm$))}}function _(x,P){if(1&x&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",20),t.qZA()()()),2&x){const I=P.ngIf;t.xp6(3),t.Q6J("text_vm",I),t.xp6(3),t.Q6J("radio_vm",I)}}function i(x,P){if(1&x&&(t.ynx(0),t.YNc(1,_,7,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&x){const I=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.vm$))}}function r(x,P){if(1&x&&t._UZ(0,"card-dimmer-view",25),2&x){const I=t.oxw().$implicit,w=t.oxw(4);t.Q6J("control",w.control)("subControl",I)("view",w.viewType.DETAILED)}}function e(x,P){if(1&x&&t._UZ(0,"card-dimmer-view",25),2&x){const I=t.oxw().$implicit,w=t.oxw(4);t.Q6J("control",w.control)("subControl",I)("view",w.viewType.DETAILED)}}function n(x,P){if(1&x&&t._UZ(0,"card-switch-view",26),2&x){const I=t.oxw().$implicit,w=t.oxw(4);t.Q6J("control",w.control)("subControl",I)}}function a(x,P){if(1&x&&(t.TgZ(0,"ion-col",22),t.YNc(1,r,1,3,"card-dimmer-view",23),t.YNc(2,e,1,3,"card-dimmer-view",23),t.YNc(3,n,1,2,"card-switch-view",24),t.qZA()),2&x){const I=P.$implicit;t.xp6(1),t.Q6J("ngIf","Dimmer"===I.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===I.type),t.xp6(1),t.Q6J("ngIf","Switch"===I.type)}}function g(x,P){if(1&x&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,a,4,3,"ion-col",21),t.qZA()()),2&x){const I=P.ngIf;t.xp6(3),t.Q6J("text_vm",I),t.xp6(2),t.Q6J("ngForOf",I.subControls)}}function c(x,P){if(1&x&&(t.ynx(0),t.YNc(1,g,6,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&x){const I=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.vm$))}}function m(x,P){if(1&x){const I=t.EpF();t.ynx(0),t.TgZ(1,"ion-segment",14),t.NdJ("ngModelChange",function(D){t.CHM(I);const F=t.oxw();return t.KtG(F.segment=D)})("ionChange",function(){t.CHM(I);const D=t.oxw();return t.KtG(D.updateSegment())}),t.TgZ(2,"ion-segment-button",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-segment-button",16),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,i,3,3,"ng-container",0),t.YNc(9,c,3,3,"ng-container",0),t.BQk()}if(2&x){const I=t.oxw();t.xp6(1),t.Q6J("ngModel",I.segment),t.xp6(2),t.hij(" ",t.lcZ(4,5,"Moods")," "),t.xp6(3),t.hij(" ",t.lcZ(7,7,"Lightzones")," "),t.xp6(2),t.Q6J("ngIf","moods"===I.segment),t.xp6(1),t.Q6J("ngIf","lightzones"===I.segment)}}function h(x,P){if(1&x&&(t.TgZ(0,"ion-select-option",35),t._uU(1),t.qZA()),2&x){const I=P.$implicit;t.Q6J("value",I.name),t.xp6(1),t.Oqu(I.name)}}function d(x,P){1&x&&(t.TgZ(0,"ion-select-option",36),t._uU(1,"Manual"),t.qZA())}function v(x,P){if(1&x){const I=t.EpF();t.TgZ(0,"ion-card",28)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",29),t.TgZ(4,"ion-select",30),t.NdJ("ionChange",function(D){const K=t.CHM(I).ngIf,j=t.oxw(2);return t.KtG(j.selectChange(K,D))}),t.ALo(5,"translate"),t.TgZ(6,"div",31)(7,"ion-text",32),t._uU(8),t.qZA()(),t.YNc(9,h,2,2,"ion-select-option",33),t.YNc(10,d,2,0,"ion-select-option",34),t.ALo(11,"translate"),t.qZA()()()()}if(2&x){const I=P.ngIf,w=t.oxw(2);t.xp6(3),t.s9C("color",I.control.icon.color),t.s9C("src",I.control.icon.href),t.xp6(1),t.Udp("color",I.ui.status.color),t.Q6J("cancelText",t.lcZ(5,11,"Cancel"))("interfaceOptions",w.customActionSheetOptions)("ngModel",I.ui.status.text),t.xp6(3),t.s9C("color",I.control.icon.color),t.xp6(1),t.Oqu(I.ui.room),t.xp6(1),t.Q6J("ngForOf",I.ui.radioList),t.xp6(1),t.Q6J("ngIf",I.ui.status.text===t.lcZ(11,13,"Manual"))}}function C(x,P){if(1&x&&(t.ynx(0),t.YNc(1,v,12,15,"ion-card",27),t.ALo(2,"async"),t.BQk()),2&x){const I=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,I.vm$))}}let O=(()=>{var x;class P{constructor(w,D){this.translate=w,this.controlService=D,this.buttonType=y.W,this.viewType=y.G,this.segment="moods",this.moodList=[],this.text="",this.customActionSheetOptions={header:"",cssClass:"actionsheet"}}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([w,D,F])=>this.updateVM(w,D,F))):console.error("Component 'control-light-v2' not available for rendering.")}updateVM(w,D,F){let ot,K=F.find(nt=>nt.uuid===w.room&&nt.serialNr===w.serialNr),j=D.find(nt=>nt.uuid===w.category&&nt.serialNr===w.serialNr);if(Array.isArray(w.states.activeMoods)&&(ot=w.states.activeMoods[0]),w.states.moodList&&this.moodList!==w.states.moodList&&(this.moodList=w.states.moodList,this.moveOffUp(this.moodList)),ot&&w.states.moodList&&Array.isArray(this.moodList)){let nt=this.moodList.findIndex(G=>G.id==ot);this.text=this.moodList[nt].name}w.states.activeMoods&&0==w.states.activeMoods.length&&(this.text=this.translate.instant("Manual"));let q=[];return w.subControls&&(q=Object.values(w.subControls).filter(G=>G.isVisible)),this.customActionSheetOptions.header=j.name+" "+(K&&K.name)?K.name:"unknown",{control:{...w,icon:{href:w.icon.href,color:778!==ot&&this.text.length?"primary":"dark"}},ui:{name:w.name===this.translate.instant("Lightcontroller")?K.name:w.name,room:K&&K.name?K.name:"unknown",category:j&&j.name?j.name:"unknown",radioList:this.moveOffUp(this.moodList),selectedId:ot,status:{text:this.text,color:M.c.getColor(778!==ot&&this.text.length?"primary":"secondary")}},subControls:q}}updateSegment(){}clickLightButton(w,D,F){F.preventDefault(),F.stopPropagation();let K,j=this.control.states.moodList,ot=D.ui.radioList.length-1;D.ui.selectedId&&D.ui.radioList?(K=D.ui.radioList.findIndex(q=>q.id==D.ui.selectedId),K++,K>ot&&(K=0)):K=0,this.controlService.updateControl(D.control,"changeTo/"+String(j[K].id))}selectChange(w,D){let F=w.ui.radioList,K=w.ui.radioList.findIndex(j=>j.name==D.detail.value);F[K]&&F[K].id!=w.ui.selectedId&&this.controlService.updateControl(w.control,"changeTo/"+String(F[K].id))}moveOffUp(w){let D=[];for(let F=0;F<w.length;F++)0==F?D[0]=w[w.length-1]:D[F]=w[F-1];return D}}return(x=P).\u0275fac=function(w){return new(w||x)(t.Y36(u.sK),t.Y36(s.B))},x.\u0275cmp=t.Xpm({type:x,selectors:[["control-light-v2-view"]],inputs:{control:"control",view:"view",key:"key"},decls:4,vars:4,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],[3,"ngModel","ngModelChange","ionChange"],["value","moods",1,"segment-button"],["value","lightzones",1,"segment-button"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","subControl","view",4,"ngIf"],[3,"control","subControl",4,"ngIf"],[3,"control","subControl","view"],[3,"control","subControl"],["class","card",4,"ngIf"],[1,"card"],[1,"icon_50",3,"color","src"],["interface","action-sheet",1,"select-no-icon","select-ml",3,"cancelText","interfaceOptions","ngModel","ionChange"],["slot","label"],[3,"color"],[3,"value",4,"ngFor","ngForOf"],["translate","",4,"ngIf"],[3,"value"],["translate",""]],template:function(w,D){1&w&&(t.YNc(0,k,3,3,"ng-container",0),t.YNc(1,p,3,3,"ng-container",0),t.YNc(2,m,10,9,"ng-container",0),t.YNc(3,C,3,3,"ng-container",0)),2&w&&(t.Q6J("ngIf",D.view===D.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",D.view===D.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",D.view===D.viewType.DETAILED),t.xp6(1),t.Q6J("ngIf",D.view===D.viewType.LIST_ITEM_POPUP))},dependencies:[L.sg,L.O5,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.cJ,o.GO,o.t9,o.n0,o.yW,o.QI,o.YI,A.JJ,A.On,b.rH,u.Pi,Z.W,U.x,J,$.h,L.Ov,u.X$]}),P})()},2356:(X,Y,l)=>{l.d(Y,{k:()=>B});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(717);function Z(T,p){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function U(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&T){const _=p.ngIf;t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(3),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function N(T,p){if(1&T&&(t.ynx(0),t.YNc(1,U,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function J(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.AsE("",_.ui.room," \u2022 ",_.ui.category,"")}}function $(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.room)}}function S(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.category)}}function W(T,p){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function k(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,J,2,2,"p",0),t.YNc(11,$,2,1,"p",0),t.YNc(12,S,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,W,2,3,"h2",7),t.qZA()()()()}if(2&T){const _=p.ngIf,i=t.oxw(2);t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===i.key),t.xp6(1),t.Q6J("ngIf","room"===i.key),t.xp6(1),t.Q6J("ngIf","category"===i.key),t.xp6(2),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function V(T,p){if(1&T&&(t.ynx(0),t.YNc(1,k,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function E(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",16),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t.TgZ(7,"ion-label",18)(8,"h1",19),t._uU(9,"Push"),t.qZA()()()()()()}if(2&T){const _=p.ngIf;t.xp6(3),t.Q6J("text_vm",_)}}function R(T,p){if(1&T&&(t.ynx(0),t.YNc(1,E,10,1,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}let B=(()=>{var T;class p{constructor(i,r){this.translate=i,this.controlService=r,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([i,r,e])=>this.updateVM(i,r,e))):console.error("Component 'control-pushbutton' not available for rendering.")}updateVM(i,r,e){let n=e.find(c=>c.uuid===i.room&&c.serialNr===i.serialNr),a=r.find(c=>c.uuid===i.category&&c.serialNr===i.serialNr);return{control:i,ui:{name:i.name,room:n&&n.name?n.name:"unknown",category:a&&a.name?a.name:"unknown",status:{text:"",color:M.c.getColor("secondary")}}}}clickPushButton(i,r,e){e.preventDefault(),e.stopPropagation(),this.controlService.updateControl(r.control,"pulse")}}return(T=p).\u0275fac=function(i){return new(i||T)(t.Y36(u.sK),t.Y36(s.B))},T.\u0275cmp=t.Xpm({type:T,selectors:[["control-pushbutton-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["name","radio-button-off-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(i,r){1&i&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,V,3,3,"ng-container",0),t.YNc(2,R,3,3,"ng-container",0)),2&i&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[L.O5,o.YG,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,u.Pi,b.h,L.Ov]}),p})()},5222:(X,Y,l)=>{l.d(Y,{d:()=>T});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(7383),Z=l(717);function U(p,_){if(1&p&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function N(p,_){if(1&p){const i=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,U,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.clickRadioButton(g.buttonType.MINUS,a,e))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.clickRadioButton(g.buttonType.PLUS,a,e))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&p){const i=_.ngIf;t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(3),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function J(p,_){if(1&p&&(t.ynx(0),t.YNc(1,N,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function $(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.AsE("",i.ui.room," \u2022 ",i.ui.category,"")}}function S(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.room)}}function W(p,_){if(1&p&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.ui.category)}}function k(p,_){if(1&p&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&p){const i=t.oxw().ngIf;t.Udp("color",i.ui.status.color),t.xp6(1),t.hij(" ",i.ui.status.text,"")}}function V(p,_){if(1&p){const i=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.clickRadioButton(g.buttonType.MINUS,a,e))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(e){const a=t.CHM(i).ngIf,g=t.oxw(2);return t.KtG(g.clickRadioButton(g.buttonType.PLUS,a,e))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,$,2,2,"p",0),t.YNc(13,S,2,1,"p",0),t.YNc(14,W,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,k,2,3,"h2",7),t.qZA()()()()}if(2&p){const i=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",i.control.serialNr,"/",i.control.uuid,""),t.xp6(3),t.s9C("color",i.control.icon.color),t.s9C("src",i.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(i.control.name),t.xp6(1),t.Q6J("ngIf",""!==i.ui.status.text)}}function E(p,_){if(1&p&&(t.ynx(0),t.YNc(1,V,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}function R(p,_){if(1&p&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",18),t.qZA()()()),2&p){const i=_.ngIf;t.xp6(3),t.Q6J("text_vm",i),t.xp6(3),t.Q6J("radio_vm",i)}}function B(p,_){if(1&p&&(t.ynx(0),t.YNc(1,R,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&p){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.vm$))}}let T=(()=>{var p;class _{constructor(r,e){this.translate=r,this.controlService=e,this.buttonType=y.W,this.viewType=y.G,this.segment="moods"}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([r,e,n])=>this.updateVM(r,e,n))):console.error("Component 'control-radio' not available for rendering.")}updateVM(r,e,n){let a=n.find(d=>d.uuid===r.room&&d.serialNr===r.serialNr),g=e.find(d=>d.uuid===r.category&&d.serialNr===r.serialNr),c=Number(r.states.activeOutput);c||(c=0),this.entries!==r.details.outputs&&(this.entries=r.details.outputs,this.radioList=[{id:0,name:r.details.allOff}].concat(Object.entries(r.details.outputs).map(d=>({id:Number(d[0]),name:String(d[1])}))));let m=this.radioList.findIndex(d=>d.id===c);return{control:r,ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:g&&g.name?g.name:"unknown",radioList:this.radioList,selectedId:c,status:{text:String(this.radioList[m].name),color:M.c.getColor(c>0?"primary":"secondary")}}}}clickRadioButton(r,e,n){n.preventDefault(),n.stopPropagation();let g=e.ui.radioList.length-1,c=e.ui.radioList.findIndex(h=>h.id===e.ui.selectedId);r===y.W.PLUS?c++:c--,c>g?c=0:c<0&&(c=g),e.ui.selectedId=e.ui.radioList[c].id;let m=String(e.ui.radioList[c].id);"0"===m&&(m="reset"),this.controlService.updateControl(e.control,m)}}return(p=_).\u0275fac=function(r){return new(r||p)(t.Y36(u.sK),t.Y36(s.B))},p.\u0275cmp=t.Xpm({type:p,selectors:[["control-radio-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"]],template:function(r,e){1&r&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",e.view===e.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.DETAILED))},dependencies:[L.O5,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,b.x,Z.h,L.Ov]}),_})()},7432:(X,Y,l)=>{l.d(Y,{B:()=>_});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(6223);let Z=(()=>{var i;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=y.W}sliderChange(n,a){n.control.states.value!=a.detail.value&&this.controlService.updateControl(n.control,String(a.detail.value))}clickSliderButton(n,a,g){g.preventDefault(),g.stopPropagation();let d,c=Number(a.control.details.min),m=Number(a.control.details.max),h=Number(a.control.details.step);d=n===y.W.PLUS?a.ui.slider.position+h:a.ui.slider.position-h,d<c&&(d=c),d>m&&(d=m),this.controlService.updateControl(a.control,String(d))}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(u.sK),t.Y36(s.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["card-slider-view"]],inputs:{slider_vm:"slider_vm"},decls:8,vars:4,consts:[[1,"card"],[1,"card-content"],[1,"item"],[1,"fab-button-slider","icon-slider-left",3,"click"],["name","remove-outline",2,"color","var(--ion-text-color, #2c2c2c)"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],["name","add-outline",2,"color","var(--ion-text-color, #2c2c2c)"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-card",0)(1,"ion-card-content",1)(2,"ion-item",2)(3,"ion-fab-button",3),t.NdJ("click",function(c){return a.clickSliderButton(a.buttonType.MINUS,a.slider_vm,c)}),t._UZ(4,"ion-icon",4),t.qZA(),t.TgZ(5,"ion-range",5),t.NdJ("ionChange",function(c){return a.sliderChange(a.slider_vm,c)}),t.qZA(),t.TgZ(6,"ion-fab-button",6),t.NdJ("click",function(c){return a.clickSliderButton(a.buttonType.PLUS,a.slider_vm,c)}),t._UZ(7,"ion-icon",7),t.qZA()()()()),2&n&&(t.xp6(5),t.s9C("min",a.slider_vm.control.details.min),t.s9C("max",a.slider_vm.control.details.max),t.s9C("step",a.slider_vm.control.details.step),t.Q6J("ngModel",a.slider_vm.ui.slider.position))},dependencies:[o.PM,o.FN,o.W4,o.gu,o.Ie,o.I_,o.QI,b.JJ,b.On]}),r})();var U=l(717);function N(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function J(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,N,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickSliderButton(m.buttonType.MINUS,c,a))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickSliderButton(m.buttonType.PLUS,c,a))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&i){const e=r.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function $(i,r){if(1&i&&(t.ynx(0),t.YNc(1,J,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function S(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function W(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function k(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function V(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function E(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickSliderButton(m.buttonType.MINUS,c,a))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickSliderButton(m.buttonType.PLUS,c,a))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,S,2,2,"p",0),t.YNc(13,W,2,1,"p",0),t.YNc(14,k,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,V,2,3,"h2",7),t.qZA()()()()}if(2&i){const e=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function R(i,r){if(1&i&&(t.ynx(0),t.YNc(1,E,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function B(i,r){if(1&i&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-slider-view",18),t.qZA()()()),2&i){const e=r.ngIf;t.xp6(3),t.Q6J("text_vm",e),t.xp6(3),t.Q6J("slider_vm",e)}}function T(i,r){if(1&i&&(t.ynx(0),t.YNc(1,B,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}var p=l(9572).sprintf;let _=(()=>{var i;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([n,a,g])=>this.updateVM(n,a,g))):console.error("Component 'control-slider' not available for rendering.")}updateVM(n,a,g){let c=g.find(C=>C.uuid===n.room&&C.serialNr===n.serialNr),m=a.find(C=>C.uuid===n.category&&C.serialNr===n.serialNr),h="",d=0;return n.states.value&&n.details.format&&(h=p(n.details.format,n.states.value)),n.states.value&&(d=Number(n.states.value)),{control:n,ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:m&&m.name?m.name:"unknown",slider:{position:d},status:{text:h,color:M.c.getColor("secondary")}}}}clickSliderButton(n,a,g){g.preventDefault(),g.stopPropagation();let d,c=Number(a.control.details.min),m=Number(a.control.details.max),h=Number(a.control.details.step);d=n===y.W.PLUS?a.ui.slider.position+h:a.ui.slider.position-h,d<c&&(d=c),d>m&&(d=m),this.controlService.updateControl(a.control,String(d))}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(u.sK),t.Y36(s.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["control-slider-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"slider_vm"]],template:function(n,a){1&n&&(t.YNc(0,$,3,3,"ng-container",0),t.YNc(1,R,3,3,"ng-container",0),t.YNc(2,T,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[L.O5,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,Z,U.h,L.Ov]}),r})()},7953:(X,Y,l)=>{l.d(Y,{e:()=>i});var f=l(7027),Q=l(2572),y=l(7398),M=l(6308),t=l(7658),u=l(5879),s=l(9515),L=l(4898),o=l(6814),A=l(6223),b=l(6089),Z=l(717);function U(r,e){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.Udp("color",n.ui.status.color),u.xp6(1),u.hij(" ",n.ui.status.text,"")}}function N(r,e){if(1&r&&(u.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),u._UZ(3,"ion-icon",5),u.TgZ(4,"ion-label",6)(5,"h1"),u._uU(6),u.qZA(),u.YNc(7,U,2,3,"h2",7),u.qZA()()()()),2&r){const n=e.ngIf;u.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),u.xp6(3),u.s9C("color",n.control.icon.color),u.s9C("src",n.control.icon.href),u.xp6(3),u.Oqu(n.control.name),u.xp6(1),u.Q6J("ngIf",""!==n.ui.status.text)}}function J(r,e){if(1&r&&(u.ynx(0),u.YNc(1,N,8,6,"ion-card",1),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}function $(r,e){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function S(r,e){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.Oqu(n.ui.room)}}function W(r,e){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.Oqu(n.ui.category)}}function k(r,e){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.Udp("color",n.ui.status.color),u.xp6(1),u.hij(" ",n.ui.status.text,"")}}function V(r,e){if(1&r&&(u.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),u._UZ(3,"ion-icon",5)(4,"ion-label"),u.qZA()(),u.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),u.YNc(8,$,2,2,"p",0),u.YNc(9,S,2,1,"p",0),u.YNc(10,W,2,1,"p",0),u.TgZ(11,"h1"),u._uU(12),u.qZA(),u.YNc(13,k,2,3,"h2",7),u.qZA()()()()),2&r){const n=e.ngIf,a=u.oxw(2);u.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),u.xp6(3),u.s9C("color",n.control.icon.color),u.s9C("src",n.control.icon.href),u.xp6(5),u.Q6J("ngIf","home"===a.key),u.xp6(1),u.Q6J("ngIf","room"===a.key),u.xp6(1),u.Q6J("ngIf","category"===a.key),u.xp6(2),u.Oqu(n.control.name),u.xp6(1),u.Q6J("ngIf",""!==n.ui.status.text)}}function E(r,e){if(1&r&&(u.ynx(0),u.YNc(1,V,14,9,"ion-card",8),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}function R(r,e){if(1&r){const n=u.EpF();u.TgZ(0,"ion-item",20)(1,"ion-text",21),u._uU(2,"Ending time service"),u.qZA()(),u.TgZ(3,"ion-datetime",22,23),u.NdJ("ionChange",function(g){u.CHM(n);const c=u.oxw(2).ngIf,m=u.oxw(2);return u.KtG(m.timeChanged(g,c))}),u.TgZ(5,"ion-buttons",24)(6,"ion-button",25),u.NdJ("click",function(){u.CHM(n);const g=u.oxw(4);return u.KtG(g.cancel())}),u._uU(7,"Cancel"),u.qZA(),u.TgZ(8,"ion-button",26),u.NdJ("click",function(){u.CHM(n);const g=u.oxw(4);return u.KtG(g.confirm())}),u._uU(9,"OK"),u.qZA()()()}if(2&r){const n=u.oxw(4);u.xp6(3),u.s9C("locale",n.translate.currentLang),u.Q6J("ngModel",n.servicetime)}}function B(r,e){if(1&r&&(u.TgZ(0,"ion-button",18),u._uU(1),u.TgZ(2,"ion-popover",19),u.YNc(3,R,10,2,"ng-template"),u.qZA()()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.hij(" ",n.ui.button.text," ")}}function T(r,e){if(1&r){const n=u.EpF();u.TgZ(0,"ion-button",27),u._uU(1),u.TgZ(2,"ion-alert",28),u.NdJ("didDismiss",function(g){u.CHM(n);const c=u.oxw().ngIf,m=u.oxw(2);return u.KtG(m.cancelService(g,c))}),u.qZA()()}if(2&r){const n=u.oxw().ngIf,a=u.oxw(2);u.xp6(1),u.hij(" ",n.ui.button.text," "),u.xp6(1),u.MGl("header","",n.ui.button.text,"?"),u.Q6J("buttons",a.cancelButtons)}}function p(r,e){if(1&r&&(u.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),u._UZ(3,"card-text-view",14),u.qZA()(),u.TgZ(4,"ion-row")(5,"ion-col"),u.YNc(6,B,4,1,"ion-button",15),u.YNc(7,T,3,3,"ion-button",16),u.qZA()(),u.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-button",17),u._uU(11," History "),u.qZA()()()()),2&r){const n=e.ngIf;u.xp6(3),u.Q6J("text_vm",n),u.xp6(3),u.Q6J("ngIf",!n.state),u.xp6(1),u.Q6J("ngIf",n.state),u.xp6(3),u.MGl("routerLink","",n.control.uuid,"/sensors")}}function _(r,e){if(1&r&&(u.ynx(0),u.YNc(1,p,12,4,"ion-grid",12),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}let i=(()=>{var r;class e{constructor(a,g){this.translate=a,this.controlService=g,this.buttonType=M.W,this.viewType=M.G,this.cancelButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,Q.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,y.U)(([a,g,c])=>this.updateVM(a,g,c))):console.error("Component 'control-smokealarm' not available for rendering.")}updateVM(a,g,c){let m=c.find(w=>w.uuid===a.room&&w.serialNr===a.serialNr),h=g.find(w=>w.uuid===a.category&&w.serialNr===a.serialNr),d="",v="",C="primary",O=Number(a.states.timeServiceMode)>0,x=O?"Stop alarm suppression":"Start alarm suppression",P=Number(a.states.level);switch(O&&(P=99),P){case 0:d="Everything OK";break;case 1:d="Pre-alarm active",C="danger";break;case 2:d="Main alarm active",C="danger";break;case 99:d="Alarm suppression enabled",v=" ("+a.states.timeServiceMode+"s)",C="warning";break;default:d="Unknown state",C="secondary"}return{control:{...a,icon:{href:"assets/icons/svg/flame-sharp.svg",color:C}},ui:{name:a.name,room:m&&m.name?m.name:"unknown",category:h&&h.name?h.name:"unknown",status:{text:this.translate.instant(d)+v,color:t.c.getColor(C)},button:{text:this.translate.instant(x)}},state:O}}timeChanged(a,g){this.servicetime=a.detail.value;let c=Math.round((new Date(this.servicetime).getTime()-Date.now())/1e3);if(console.log("serviceSec",c),c>1){let m="servicemode/"+String(c);this.controlService.updateControl(g.control,m)}}cancel(){this.datetime.cancel(!0)}cancelService(a,g){"ok"===a.detail.role&&this.controlService.updateControl(g.control,"servicemode/0")}confirm(){this.datetime.confirm(!0)}service(a,g){}showHistory(a,g){}}return(r=e).\u0275fac=function(a){return new(a||r)(u.Y36(s.sK),u.Y36(L.B))},r.\u0275cmp=u.Xpm({type:r,selectors:[["control-smokealarm-view"]],viewQuery:function(a,g){if(1&a&&u.Gf(f.x4,5),2&a){let c;u.iGM(c=u.CRH())&&(g.datetime=c.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","time-popover",4,"ngIf"],["class","push-button","expand","block","id","stop-service",4,"ngIf"],["expand","block","translate","",1,"push-button",3,"routerLink"],["expand","block","id","time-popover",1,"push-button"],["trigger","time-popover","cssClass","width-100"],[1,"item-title"],["translate","",1,"text-center"],["presentation","time",3,"locale","ngModel","ionChange"],["datetime",""],["slot","buttons"],["color","primary","fill","clear","translate","",3,"click"],["color","primary","fill","clear",3,"click"],["expand","block","id","stop-service",1,"push-button"],["trigger","stop-service",3,"header","buttons","didDismiss"]],template:function(a,g){1&a&&(u.YNc(0,J,3,3,"ng-container",0),u.YNc(1,E,3,3,"ng-container",0),u.YNc(2,_,3,3,"ng-container",0)),2&a&&(u.Q6J("ngIf",g.view===g.viewType.LIST_ITEM),u.xp6(1),u.Q6J("ngIf",g.view===g.viewType.FAVORITE),u.xp6(1),u.Q6J("ngIf",g.view===g.viewType.DETAILED))},dependencies:[o.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.yW,f.d8,f.QI,f.YI,A.JJ,A.On,b.rH,s.Pi,Z.h,o.Ov],styles:["ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}.item-title[_ngcontent-%COMP%]{font-size:18px;margin:0}.text-center[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),e})()},5427:(X,Y,l)=>{l.d(Y,{z:()=>_});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6223),b=l(6089),Z=l(717);function U(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function N(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item"),t._UZ(3,"ion-icon",4),t.TgZ(4,"ion-label",5)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,U,2,3,"h2",6),t.qZA(),t.TgZ(8,"ion-toggle",7),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickToggle(c,a))}),t.qZA()()()()}if(2&i){const e=r.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text),t.xp6(1),t.Q6J("ngModel",e.ui.toggle)}}function J(i,r){if(1&i&&(t.ynx(0),t.YNc(1,N,9,7,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function $(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function S(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function W(i,r){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function k(i,r){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function V(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",11),t._UZ(3,"ion-icon",4)(4,"ion-label",5),t.TgZ(5,"ion-toggle",7),t.NdJ("click",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickToggle(c,a))}),t.qZA()()(),t.TgZ(6,"ion-card-content",3)(7,"ion-item",11)(8,"ion-label",12),t.YNc(9,$,2,2,"p",0),t.YNc(10,S,2,1,"p",0),t.YNc(11,W,2,1,"p",0),t.TgZ(12,"h1"),t._uU(13),t.qZA(),t.YNc(14,k,2,3,"h2",6),t.qZA()()()()}if(2&i){const e=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(2),t.Q6J("ngModel",e.ui.toggle),t.xp6(4),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function E(i,r){if(1&i&&(t.ynx(0),t.YNc(1,V,15,10,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function R(i,r){if(1&i&&(t.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",18),t._uU(3),t.qZA()()()),2&i){const e=t.oxw().$implicit,n=t.oxw().ngIf;t.xp6(1),t.Gre("radio-item selected-",n.ui.status.text===e.name,""),t.xp6(1),t.s9C("value",e.name),t.xp6(1),t.hij(" ",e.name,"")}}function B(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,R,4,5,"div",0),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",""!==e.name)}}function T(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-radio-group",16),t.NdJ("ionChange",function(a){const c=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.radioChange(c,a))}),t.YNc(7,B,2,1,"div",17),t.qZA()()()()}if(2&i){const e=r.ngIf;t.xp6(3),t.Q6J("text_vm",e),t.xp6(3),t.s9C("value",e.ui.status.text),t.xp6(1),t.Q6J("ngForOf",e.ui.radioList)}}function p(i,r){if(1&i&&(t.ynx(0),t.YNc(1,T,8,3,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}let _=(()=>{var i;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([n,a,g])=>this.updateVM(n,a,g))):console.error("Component 'control-switch' not available for rendering.")}updateVM(n,a,g){let c=g.find(v=>v.uuid===n.room&&v.serialNr===n.serialNr),m=a.find(v=>v.uuid===n.category&&v.serialNr===n.serialNr),h="1"===n.states.active;return this.radioList||(this.radioList=[{id:0,name:this.translate.instant("Off")},{id:1,name:this.translate.instant("On")}]),{control:{...n,icon:{href:n.icon.href,color:h?"primary":"dark"}},ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:m&&m.name?m.name:"unknown",radioList:this.radioList,selectedId:h?1:0,status:{text:this.translate.instant(h?"On":"Off"),color:M.c.getColor(h?"primary":"secondary")},toggle:h}}}clickToggle(n,a){a.preventDefault(),a.stopPropagation(),this.controlService.updateControl(n.control,n.ui.toggle?"Off":"On")}radioChange(n,a){a.preventDefault(),a.stopPropagation(),n.ui.radioList.findIndex(c=>c.name===a.detail.value)?this.controlService.updateControl(n.control,"On"):this.controlService.updateControl(n.control,"Off")}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(u.sK),t.Y36(s.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["control-switch-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["aria-label","vm.ui.toggle","color","primary","mode","ios",1,"toggle-only",3,"ngModel","click"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"item"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[1,"radio","radio-text",3,"value"]],template:function(n,a){1&n&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,p,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[L.sg,L.O5,o.PM,o.FN,o.Zi,o.wI,o.jY,o.gu,o.Ie,o.Q$,o.B7,o.se,o.Nd,o.ho,o.w,o.U5,o.QI,o.YI,A.JJ,A.On,b.rH,Z.h,L.Ov]}),r})()},9249:(X,Y,l)=>{l.d(Y,{v:()=>_});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(6676),s=l(5879),L=l(9515),o=l(4898),A=l(6814),b=l(7027),Z=l(6089),U=l(717);function N(i,r){if(1&i&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&i){const e=s.oxw().ngIf;s.Udp("color",e.ui.status.color),s.xp6(1),s.hij(" ",e.ui.status.text,"")}}function J(i,r){if(1&i&&(s.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),s._UZ(3,"ion-icon",5),s.TgZ(4,"ion-label",6)(5,"h1"),s._uU(6),s.qZA(),s.YNc(7,N,2,3,"h2",7),s.qZA()()()()),2&i){const e=r.ngIf;s.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),s.xp6(3),s.s9C("color",e.control.icon.color),s.s9C("src",e.control.icon.href),s.xp6(3),s.Oqu(e.control.name),s.xp6(1),s.Q6J("ngIf",""!==e.ui.status.text)}}function $(i,r){if(1&i&&(s.ynx(0),s.YNc(1,J,8,6,"ion-card",1),s.ALo(2,"async"),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,e.vm$))}}function S(i,r){if(1&i&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&i){const e=s.oxw().ngIf;s.xp6(1),s.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function W(i,r){if(1&i&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&i){const e=s.oxw().ngIf;s.xp6(1),s.Oqu(e.ui.room)}}function k(i,r){if(1&i&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&i){const e=s.oxw().ngIf;s.xp6(1),s.Oqu(e.ui.category)}}function V(i,r){if(1&i&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&i){const e=s.oxw().ngIf;s.Udp("color",e.ui.status.color),s.xp6(1),s.hij(" ",e.ui.status.text,"")}}function E(i,r){if(1&i&&(s.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),s._UZ(3,"ion-icon",5)(4,"ion-label"),s.qZA()(),s.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),s.YNc(8,S,2,2,"p",0),s.YNc(9,W,2,1,"p",0),s.YNc(10,k,2,1,"p",0),s.TgZ(11,"h1"),s._uU(12),s.qZA(),s.YNc(13,V,2,3,"h2",7),s.qZA()()()()),2&i){const e=r.ngIf,n=s.oxw(2);s.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),s.xp6(3),s.s9C("color",e.control.icon.color),s.s9C("src",e.control.icon.href),s.xp6(5),s.Q6J("ngIf","home"===n.key),s.xp6(1),s.Q6J("ngIf","room"===n.key),s.xp6(1),s.Q6J("ngIf","category"===n.key),s.xp6(2),s.Oqu(e.control.name),s.xp6(1),s.Q6J("ngIf",""!==e.ui.status.text)}}function R(i,r){if(1&i&&(s.ynx(0),s.YNc(1,E,14,9,"ion-card",8),s.ALo(2,"async"),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,e.vm$))}}function B(i,r){if(1&i&&(s.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),s._UZ(3,"card-text-view",14),s.qZA()()()),2&i){const e=r.ngIf;s.xp6(3),s.Q6J("text_vm",e)}}function T(i,r){if(1&i&&(s.ynx(0),s.YNc(1,B,4,1,"ion-grid",12),s.ALo(2,"async"),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,e.vm$))}}var p=l(9572).sprintf;let _=(()=>{var i;class r{constructor(n,a){this.translate=n,this.controlService=a,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([n,a,g])=>this.updateVM(n,a,g))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(n,a,g){let c=g.find(v=>v.uuid===n.room&&v.serialNr===n.serialNr),m=a.find(v=>v.uuid===n.category&&v.serialNr===n.serialNr),h=this.processControl(n);return{control:n,ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:h.text,color:h.color}}}}processControl(n){let a={text:"",color:M.c.getColor("secundary")};switch(n.type){case"InfoOnlyText":a.text=n.states.text?p(n.details.format,n.states.text):"";break;case"InfoOnlyDigital":let g="1"===n.states.active;a.text=g?n.details.text.on:n.details.text.off,a.color=g?n.details.color.on:n.details.color.off;break;case"TextState":a.text=n.states.textAndIcon?n.states.textAndIcon:"";break;case"InfoOnlyAnalog":switch(n.details.format){case"<v.u>":let c=new Date(1e3*Number(n.states.value)+1230768e6);a.text=t(c).format("DD-MM-YYYY HH:MM").toString();break;case"<v.t>":let m=Number(n.states.value)/60,h=Math.floor(m/1440),d=Math.floor(m%1440/60),v=Math.floor(m%1440%60);a.text=h+"d "+d+"h "+v+"m";break;case"<v.d>":let C=new Date(1e3*Number(n.states.value)+1230768e6);a.text=t(C).format("DD:MM:YYYY").toString();break;case"<v.x>":a.text=n.states.value?"1":"0";break;case"<v.j>":n.details.format="%f";case"<v.i>":n.details.format="%f";case"<v.c>":n.details.format="#%6h";case"<v.m>":n.details.format="%d";case"<v>":n.details.format="%d";case"<v.1>":n.details.format="%.1f";case"<v.2>":n.details.format="%.2f";case"<v.3>":n.details.format="%.3f";default:n.states.value&&n.details.format&&(a.text=p(n.details.format,n.states.value))}}return a}}return(i=r).\u0275fac=function(n){return new(n||i)(s.Y36(L.sK),s.Y36(o.B))},i.\u0275cmp=s.Xpm({type:i,selectors:[["control-text-state-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(n,a){1&n&&(s.YNc(0,$,3,3,"ng-container",0),s.YNc(1,R,3,3,"ng-container",0),s.YNc(2,T,3,3,"ng-container",0)),2&n&&(s.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),s.xp6(1),s.Q6J("ngIf",a.view===a.viewType.FAVORITE),s.xp6(1),s.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[A.O5,b.PM,b.FN,b.Zi,b.wI,b.jY,b.gu,b.Ie,b.Q$,b.Nd,b.YI,Z.rH,U.h,A.Ov]}),r})()},9460:(X,Y,l)=>{l.d(Y,{y:()=>B});var f=l(2572),Q=l(7398),y=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),L=l(6814),o=l(7027),A=l(6089),b=l(717);function Z(T,p){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function U(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&T){const _=p.ngIf;t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(3),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function N(T,p){if(1&T&&(t.ynx(0),t.YNc(1,U,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function J(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.AsE("",_.ui.room," \u2022 ",_.ui.category,"")}}function $(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.room)}}function S(T,p){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.category)}}function W(T,p){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function k(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,J,2,2,"p",0),t.YNc(13,$,2,1,"p",0),t.YNc(14,S,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,W,2,3,"h2",7),t.qZA()()()()}if(2&T){const _=p.ngIf,i=t.oxw(2);t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===i.key),t.xp6(1),t.Q6J("ngIf","room"===i.key),t.xp6(1),t.Q6J("ngIf","category"===i.key),t.xp6(2),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function V(T,p){if(1&T&&(t.ynx(0),t.YNc(1,k,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function E(T,p){if(1&T){const _=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()()()}if(2&T){const _=p.ngIf;t.xp6(3),t.Q6J("text_vm",_)}}function R(T,p){if(1&T&&(t.ynx(0),t.YNc(1,E,15,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}let B=(()=>{var T;class p{constructor(i,r){this.translate=i,this.controlService=r,this.buttonType=y.W,this.viewType=y.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([i,r,e])=>this.updateVM(i,r,e))):console.error("Component 'control-up-down-digital' not available for rendering.")}updateVM(i,r,e){let n=e.find(c=>c.uuid===i.room&&c.serialNr===i.serialNr),a=r.find(c=>c.uuid===i.category&&c.serialNr===i.serialNr);return{control:i,ui:{name:i.name,room:n&&n.name?n.name:"unknown",category:a&&a.name?a.name:"unknown",status:{text:"",color:M.c.getColor("secondary")}}}}clickButton(i,r,e){switch(e.preventDefault(),e.stopPropagation(),i){case y.W.UP:this.controlService.updateControl(r.control,"PulseUp");break;case y.W.DOWN:this.controlService.updateControl(r.control,"PulseDown")}}}return(T=p).\u0275fac=function(i){return new(i||T)(t.Y36(u.sK),t.Y36(s.B))},T.\u0275cmp=t.Xpm({type:T,selectors:[["control-up-down-digital-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(i,r){1&i&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,V,3,3,"ng-container",0),t.YNc(2,R,3,3,"ng-container",0)),2&i&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[L.O5,o.YG,o.PM,o.FN,o.Zi,o.wI,o.W4,o.jY,o.gu,o.Ie,o.Q$,o.Nd,o.YI,A.rH,u.Pi,b.h,L.Ov]}),p})()},3415:(X,Y,l)=>{l.d(Y,{b:()=>p});var f=l(2572),Q=l(7398);const M=(0,l(2726).fo)("Browser",{web:()=>l.e(3671).then(l.bind(l,3671)).then(_=>new _.BrowserWeb)});var t=l(6308),u=l(7658),s=l(5879),L=l(9515),o=l(4898),A=l(6814),b=l(7027),Z=l(6089),U=l(717);function N(_,i){if(1&_&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.Udp("color",r.ui.status.color),s.xp6(1),s.hij(" ",r.ui.status.text,"")}}function J(_,i){if(1&_){const r=s.EpF();s.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),s._UZ(3,"ion-icon",5),s.TgZ(4,"ion-label",6)(5,"h1"),s._uU(6),s.qZA(),s.YNc(7,N,2,3,"h2",7),s.qZA(),s.ynx(8),s.TgZ(9,"ion-fab-button",8),s.NdJ("click",function(n){const g=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,g,n))}),s._UZ(10,"ion-icon",9),s.qZA(),s.BQk(),s.qZA()()()}if(2&_){const r=i.ngIf;s.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),s.xp6(3),s.s9C("color",r.control.icon.color),s.s9C("src",r.control.icon.href),s.xp6(3),s.Oqu(r.control.name),s.xp6(1),s.Q6J("ngIf",""!==r.ui.status.text)}}function $(_,i){if(1&_&&(s.ynx(0),s.YNc(1,J,11,6,"ion-card",1),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}function S(_,i){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function W(_,i){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.Oqu(r.ui.room)}}function k(_,i){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.Oqu(r.ui.category)}}function V(_,i){if(1&_&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.Udp("color",r.ui.status.color),s.xp6(1),s.hij(" ",r.ui.status.text,"")}}function E(_,i){if(1&_){const r=s.EpF();s.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),s._UZ(3,"ion-icon",5)(4,"ion-label"),s.TgZ(5,"ion-fab-button",8),s.NdJ("click",function(n){const g=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,g,n))}),s._UZ(6,"ion-icon",9),s.qZA()()(),s.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),s.YNc(10,S,2,2,"p",0),s.YNc(11,W,2,1,"p",0),s.YNc(12,k,2,1,"p",0),s.TgZ(13,"h1"),s._uU(14),s.qZA(),s.YNc(15,V,2,3,"h2",7),s.qZA()()()()}if(2&_){const r=i.ngIf,e=s.oxw(2);s.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),s.xp6(3),s.s9C("color",r.control.icon.color),s.s9C("src",r.control.icon.href),s.xp6(7),s.Q6J("ngIf","home"===e.key),s.xp6(1),s.Q6J("ngIf","room"===e.key),s.xp6(1),s.Q6J("ngIf","category"===e.key),s.xp6(2),s.Oqu(r.control.name),s.xp6(1),s.Q6J("ngIf",""!==r.ui.status.text)}}function R(_,i){if(1&_&&(s.ynx(0),s.YNc(1,E,16,9,"ion-card",10),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}function B(_,i){if(1&_){const r=s.EpF();s.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),s._UZ(3,"card-text-view",16),s.qZA()(),s.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),s.NdJ("click",function(n){const g=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,g,n))}),s.TgZ(7,"ion-label",18)(8,"h1",19),s._uU(9,"Open link"),s.qZA()()()()()()}if(2&_){const r=i.ngIf;s.xp6(3),s.Q6J("text_vm",r)}}function T(_,i){if(1&_&&(s.ynx(0),s.YNc(1,B,10,1,"ion-grid",14),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}let p=(()=>{var _;class i{constructor(e,n){this.translate=e,this.controlService=n,this.buttonType=t.W,this.viewType=t.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Q.U)(([e,n,a])=>this.updateVM(e,n,a))):console.error("Component 'control-webpage' not available for rendering.")}updateVM(e,n,a){let g=a.find(h=>h.uuid===e.room&&h.serialNr===e.serialNr),c=n.find(h=>h.uuid===e.category&&h.serialNr===e.serialNr);return{control:e,ui:{name:e.name,room:g&&g.name?g.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:"Web Link",color:u.c.getColor("secondary")}}}}clickPushButton(e,n,a){a.preventDefault(),a.stopPropagation();let g=n.control.details.url_hd;g||(g=n.control.details.url),console.log("url:",g),M.open({url:g})}}return(_=i).\u0275fac=function(e){return new(e||_)(s.Y36(L.sK),s.Y36(o.B))},_.\u0275cmp=s.Xpm({type:_,selectors:[["control-webpage-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["src","assets/icons/svg/external-link.svg",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(e,n){1&e&&(s.YNc(0,$,3,3,"ng-container",0),s.YNc(1,R,3,3,"ng-container",0),s.YNc(2,T,3,3,"ng-container",0)),2&e&&(s.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),s.xp6(1),s.Q6J("ngIf",n.view===n.viewType.FAVORITE),s.xp6(1),s.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[A.O5,b.YG,b.PM,b.FN,b.Zi,b.wI,b.W4,b.jY,b.gu,b.Ie,b.Q$,b.Nd,b.YI,Z.rH,L.Pi,U.h,A.Ov]}),i})()},6592:(X,Y,l)=>{l.d(Y,{Y:()=>L});var f=l(6814),Q=l(7027),y=l(6223),M=l(6089),t=l(9515),u=l(577),s=l(5879);let L=(()=>{var o;class A{}return(o=A).\u0275fac=function(Z){return new(Z||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[f.ez,Q.Pc,y.u5,M.Bz,t.aw,u.o,Q.Pc,M.Bz]}),A})()}}]);