(self.webpackChunkapp=self.webpackChunkapp||[]).push([[453],{2726:(j,W,_)=>{"use strict";_.d(W,{Uw:()=>R,fo:()=>k});var f=_(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var O=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(O||{});class i extends Error{constructor(e,s,m){super(e),this.message=e,this.code=s,this.data=m}}const L=n=>{var e,s,m,c,p;const h=n.CapacitorCustomPlatform||null,d=n.Capacitor||{},T=d.Plugins=d.Plugins||{},y=n.CapacitorPlatforms,C=(null===(e=y?.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==h?h.name:(n=>{var e,s;return n?.androidBridge?"android":null!==(s=null===(e=n?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==s&&s.bridge?"ios":"web"})(n)),b=(null===(s=y?.currentPlatform)||void 0===s?void 0:s.isNativePlatform)||(()=>"web"!==C()),Y=(null===(m=y?.currentPlatform)||void 0===m?void 0:m.isPluginAvailable)||(q=>{const F=z.get(q);return!(!F?.platforms.has(C())&&!$(q))}),$=(null===(c=y?.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(q=>{var F;return null===(F=d.PluginHeaders)||void 0===F?void 0:F.find(X=>X.name===q)}),z=new Map,et=(null===(p=y?.currentPlatform)||void 0===p?void 0:p.registerPlugin)||((q,F={})=>{const X=z.get(q);if(X)return console.warn(`Capacitor plugin "${q}" already registered. Cannot register plugins twice.`),X.proxy;const it=C(),dt=$(q);let at;const vt=function(){var tt=(0,f.Z)(function*(){return!at&&it in F?at=at="function"==typeof F[it]?yield F[it]():F[it]:null!==h&&!at&&"web"in F&&(at=at="function"==typeof F.web?yield F.web():F.web),at});return function(){return tt.apply(this,arguments)}}(),mt=tt=>{let ot;const st=(...lt)=>{const _t=vt().then(rt=>{const ut=((tt,ot)=>{var st,lt;if(!dt){if(tt)return null===(lt=tt[ot])||void 0===lt?void 0:lt.bind(tt);throw new i(`"${q}" plugin is not implemented on ${it}`,O.Unimplemented)}{const _t=dt?.methods.find(rt=>ot===rt.name);if(_t)return"promise"===_t.rtype?rt=>d.nativePromise(q,ot.toString(),rt):(rt,ut)=>d.nativeCallback(q,ot.toString(),rt,ut);if(tt)return null===(st=tt[ot])||void 0===st?void 0:st.bind(tt)}})(rt,tt);if(ut){const gt=ut(...lt);return ot=gt?.remove,gt}throw new i(`"${q}.${tt}()" is not implemented on ${it}`,O.Unimplemented)});return"addListener"===tt&&(_t.remove=(0,f.Z)(function*(){return ot()})),_t};return st.toString=()=>`${tt.toString()}() { [capacitor code] }`,Object.defineProperty(st,"name",{value:tt,writable:!1,configurable:!1}),st},ft=mt("addListener"),ht=mt("removeListener"),Tt=(tt,ot)=>{const st=ft({eventName:tt},ot),lt=function(){var rt=(0,f.Z)(function*(){const ut=yield st;ht({eventName:tt,callbackId:ut},ot)});return function(){return rt.apply(this,arguments)}}(),_t=new Promise(rt=>st.then(()=>rt({remove:lt})));return _t.remove=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield lt()}),_t},pt=new Proxy({},{get(tt,ot){switch(ot){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return dt?Tt:ft;case"removeListener":return ht;default:return mt(ot)}}});return T[q]=pt,z.set(q,{name:q,proxy:pt,platforms:new Set([...Object.keys(F),...dt?[it]:[]])}),pt});return d.convertFileSrc||(d.convertFileSrc=q=>q),d.getPlatform=C,d.handleError=q=>n.console.error(q),d.isNativePlatform=b,d.isPluginAvailable=Y,d.pluginMethodNoop=(q,F,X)=>Promise.reject(`${X} does not have an implementation of "${F}".`),d.registerPlugin=et,d.Exception=i,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},S=(n=>n.Capacitor=L(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),k=S.registerPlugin;class R{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,s){var m=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s);const p=this.windowListeners[e];p&&!p.registered&&this.addWindowListener(p);const h=function(){var T=(0,f.Z)(function*(){return m.removeListener(e,s)});return function(){return T.apply(this,arguments)}}(),d=Promise.resolve({remove:h});return Object.defineProperty(d,"remove",{value:(T=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield h()}),function(){return T.apply(this,arguments)})}),d;var T}removeAllListeners(){var e=this;return(0,f.Z)(function*(){e.listeners={};for(const s in e.windowListeners)e.removeWindowListener(e.windowListeners[s]);e.windowListeners={}})()}notifyListeners(e,s){const m=this.listeners[e];m&&m.forEach(c=>c(s))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:m=>{this.notifyListeners(s,m)}}}unimplemented(e="not implemented"){return new S.Exception(e,O.Unimplemented)}unavailable(e="not available"){return new S.Exception(e,O.Unavailable)}removeListener(e,s){var m=this;return(0,f.Z)(function*(){const c=m.listeners[e];if(!c)return;const p=c.indexOf(s);m.listeners[e].splice(p,1),m.listeners[e].length||m.removeWindowListener(m.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const P=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends R{getCookies(){return(0,f.Z)(function*(){const e=document.cookie,s={};return e.split(";").forEach(m=>{if(m.length<=0)return;let[c,p]=m.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=D(c).trim(),p=D(p).trim(),s[c]=p}),s})()}setCookie(e){return(0,f.Z)(function*(){try{const s=P(e.key),m=P(e.value),c=`; expires=${(e.expires||"").replace("expires=","")}`,p=(e.path||"/").replace("path=",""),h=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${m||""}${c}; path=${p}; ${h};`}catch(s){return Promise.reject(s)}})()}deleteCookie(e){return(0,f.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}})()}clearCookies(){return(0,f.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,f.Z)(function*(){try{yield e.clearCookies()}catch(s){return Promise.reject(s)}})()}}k("CapacitorCookies",{web:()=>new E});const A=function(){var n=(0,f.Z)(function*(e){return new Promise((s,m)=>{const c=new FileReader;c.onload=()=>{const p=c.result;s(p.indexOf(",")>=0?p.split(",")[1]:p)},c.onerror=p=>m(p),c.readAsDataURL(e)})});return function(s){return n.apply(this,arguments)}}();class o extends R{request(e){return(0,f.Z)(function*(){const s=((n,e={})=>{const s=Object.assign({method:n.method||"GET",headers:n.headers},e),c=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(c=>c.toLocaleLowerCase()).reduce((c,p,h)=>(c[p]=n[e[h]],c),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)s.body=n.data;else if(c.includes("application/x-www-form-urlencoded")){const p=new URLSearchParams;for(const[h,d]of Object.entries(n.data||{}))p.set(h,d);s.body=p.toString()}else if(c.includes("multipart/form-data")){const p=new FormData;if(n.data instanceof FormData)n.data.forEach((d,T)=>{p.append(T,d)});else for(const d of Object.keys(n.data))p.append(d,n.data[d]);s.body=p;const h=new Headers(s.headers);h.delete("content-type"),s.headers=h}else(c.includes("application/json")||"object"==typeof n.data)&&(s.body=JSON.stringify(n.data));return s})(e,e.webFetchExtra),m=((n,e=!0)=>n?Object.entries(n).reduce((m,c)=>{const[p,h]=c;let d,T;return Array.isArray(h)?(T="",h.forEach(y=>{d=e?encodeURIComponent(y):y,T+=`${p}=${d}&`}),T.slice(0,-1)):(d=e?encodeURIComponent(h):h,T=`${p}=${d}`),`${m}&${T}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),c=m?`${e.url}?${m}`:e.url,p=yield fetch(c,s),h=p.headers.get("content-type")||"";let T,y,{responseType:d="text"}=p.ok?e:{};switch(h.includes("application/json")&&(d="json"),d){case"arraybuffer":case"blob":y=yield p.blob(),T=yield A(y);break;case"json":T=yield p.json();break;default:T=yield p.text()}const N={};return p.headers.forEach((C,B)=>{N[B]=C}),{data:T,headers:N,status:p.status,url:p.url}})()}get(e){var s=this;return(0,f.Z)(function*(){return s.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var s=this;return(0,f.Z)(function*(){return s.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var s=this;return(0,f.Z)(function*(){return s.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var s=this;return(0,f.Z)(function*(){return s.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var s=this;return(0,f.Z)(function*(){return s.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}k("CapacitorHttp",{web:()=>new o})},5e3:(j,W,_)=>{"use strict";_.d(W,{B:()=>K});var f=_(7081),J=_(5879),I=_(711),U=_(5861),t=_(2181),u=_(9360),a=_(2420),O=_(8251),i=_(4829);function M(P){return(0,u.e)((D,E)=>{let w=[];return D.subscribe((0,O.x)(E,A=>w.push(A),()=>{E.next(w),E.complete()})),(0,i.Xf)(P).subscribe((0,O.x)(E,()=>{const A=w;w=[],E.next(A)},a.Z)),()=>{w=null}})}var L=_(2832);function x(P,D=L.z){return(0,u.e)((E,w)=>{let A=null,v=null,g=null;const l=()=>{if(A){A.unsubscribe(),A=null;const r=v;v=null,w.next(r)}};function o(){const r=g+P,n=D.now();if(n<r)return A=this.schedule(void 0,r-n),void w.add(A);l()}E.subscribe((0,O.x)(w,r=>{v=r,g=D.now(),A||(A=D.schedule(o,P),w.add(A))},()=>{l(),w.complete()},void 0,()=>{v=A=null}))})}var S=_(7398),k=_(4244);const Q=["/name","/icon/#","/type","/room","/category","/isFavorite","/isVisible","/isSecured","/order","/details/#","/states/#","/subControls/#"];var V=_(9515);let R=(()=>{var P;class D{constructor(w,A,v){this.mqttService=w,this.translate=A,this.dataService=v,this.mqttSubscription=[],this.mqttTopicMapping={},this.mqttPrefixList=[],this.registeredTopics=[],this.loxberryMqttConnected=!1,this.loxberryMqttTopic="",this.initService(),this.mqttService.state.subscribe(g=>{this.loxberryMqttConnected=g===k.B.CONNECTED,console.log("LoxBerry Mqtt client connection status:",this.loxberryMqttConnected?"connected":"disconnected"),this.loxberryMqttConnected&&!this.mqttSubscription[0]&&this.registerStructureTopic(),this.loxberryMqttConnected||this.unregisterTopics()})}initService(){this.dataService.settings$.subscribe(w=>{w&&w.mqtt&&w.mqtt.username&&w.mqtt.password&&w.mqtt.hostname&&w.mqtt.port&&w.mqtt.topic&&(this.loxberryMqttTopic=w.mqtt.topic,this.connectToMqtt(w))})}connectToMqtt(w){console.log("Connecting to LoxBerry MQTT server..."),this.mqttService.connect({username:w.mqtt.username,password:w.mqtt.password,hostname:w.mqtt.hostname,port:w.mqtt.port,keepalive:5,connectTimeout:5e3,reconnectPeriod:5e3,protocol:"wss"})}registerStructureTopic(){var w=this;console.log("Subscribe to structure..."),this.mqttSubscription[0]=this.mqttService.observe(this.loxberryMqttTopic+"/+/structure").subscribe(function(){var v=(0,U.Z)(function*(g){let l=g.payload.toString();0==l.length?(console.log("Clear structure in store..."),w.dataService.flushControlsInStore(g.topic.split("/")[1])):yield w.processStructure(JSON.parse(l),w.loxberryMqttTopic)});return function(g){return v.apply(this,arguments)}}())}processStructure(w,A){var v=this;return(0,U.Z)(function*(){let g={categories:{},rooms:{},controls:{}},l="",o="assets/icons/svg",r=w.msInfo.serialNr;w&&(console.log("Processing received structure..."),Object.keys(w.cats).forEach(n=>{let e=w.cats[n];g.categories[r+"/"+e.uuid]={...e,serialNr:r,icon:{href:o+"/"+e.image},isVisible:!0,order:[e.name.toLowerCase().charCodeAt(0)-86,11-e.defaultRating]}}),Object.keys(w.rooms).forEach(n=>{let e=w.rooms[n];g.rooms[r+"/"+e.uuid]={...e,serialNr:r,icon:{href:o+"/"+e.image,color:e.color},isVisible:!0,order:[e.name.toLowerCase().charCodeAt(0)-86,11-e.defaultRating]}}),Object.keys(w.controls).forEach(n=>{let e=w.controls[n],s=r+"/"+e.uuidAction;e.defaultIcon&&e.defaultIcon.length>0?(l=o+"/"+e.defaultIcon,-1==l.search(".svg")&&(l+=".svg")):l="Daytimer"===e.type?o+"/daytimer.svg":Object.values(g.categories).find(m=>m.uuid===e.cat).icon.href,g.controls[s]={...e,serialNr:r,uuid:e.uuidAction,mqtt:A+"/"+r+"/"+e.uuidAction+"/cmd",icon:{href:l},category:e.cat,isFavorite:e.defaultRating>0,isVisible:!0,states:v.processStates(e.states,e.uuidAction,A,r),subControls:v.processSubControls(e,A,r),order:[e.name.toLowerCase().charCodeAt(0)-86,e.name.toLowerCase().charCodeAt(0)-86,e.isFavorite?11-e.defaultRating:0]}}),yield v.dataService.updateStructureInStore(g),v.registerTopics(r))})()}processSubControls(w,A,v){let g={};return w.subControls&&Object.keys(w.subControls).forEach(l=>{let o=w.subControls[l];g[o.uuidAction]={...o,uuid:o.uuidAction,mqtt:A+"/"+v+"/"+o.uuidAction+"/cmd",isVisible:!0,states:this.processStates(o.states,w.uuidAction+"/subControls/"+o.uuidAction,A,v)}}),g}processStates(w,A,v,g){let l={};return w&&Object.keys(w).forEach(o=>{let r=w[o];if(Array.isArray(r)){let n=[];r.forEach((e,s)=>{n.push(void 0);let m=v+"/"+g+"/"+e;this.mqttTopicMapping[m]=g+"/"+A+"/states/"+o+"/"+s,this.registerTopicPrefix(m)}),l[o]=n}else{l[o]=void 0;let n=v+"/"+g+"/"+w[o];this.mqttTopicMapping[n]=g+"/"+A+"/states/"+o,this.registerTopicPrefix(n)}}),l}registerTopicPrefix(w){let A=w.split("/")[0];this.mqttPrefixList.find(v=>v===A)||(this.mqttPrefixList.push(A),console.log("Registered topic prefix: ",A))}registerTopics(w){var A=this;Q.forEach(v=>{let g=this.loxberryMqttTopic+"/"+w+"/+/+"+v;this.registeredTopics.includes(g)?console.log("Topic already exists and ignored:",g):(console.log("Register topic name:",g),this.registeredTopics.push(g),this.mqttSubscription.push(this.mqttService.observe(g).pipe((0,t.h)(l=>l.length>0),M(this.mqttService.observe(g).pipe(x(10)))).subscribe(function(){var l=(0,U.Z)(function*(o){yield A.dataService.updateElementsInStore(o)});return function(o){return l.apply(this,arguments)}}())))}),this.mqttPrefixList.forEach(v=>{let g=v+"/#";this.registeredTopics.includes(g)?console.log("Topic already exists and ignored:",g):(console.log("Register topic name:",g),this.registeredTopics.push(g),this.mqttSubscription.push(this.mqttService.observe(g).pipe((0,S.U)(l=>({...l,topic:this.mqttTopicMapping[l.topic]})),(0,t.h)(l=>l.length>0),M(this.mqttService.observe(g).pipe(x(10)))).subscribe(function(){var l=(0,U.Z)(function*(o){yield A.dataService.updateElementsInStore(o)});return function(o){return l.apply(this,arguments)}}())))})}unregisterTopics(){console.log("Unsubscribe from MQTT topics..."),this.mqttSubscription.forEach(w=>{w.unsubscribe()}),this.mqttSubscription=[],this.registeredTopics=[],this.mqttTopicMapping=[]}ngOnDestroy(){this.unregisterTopics()}sendMessage(w,A){let v=w.mqtt;v?(this.mqttService.unsafePublish(v,A),console.log("MQTT publish: ",w.name,v,A)):console.log("Topic "+v+" not found. Nothing published.")}}return(P=D).\u0275fac=function(w){return new(w||P)(J.LFG(k.KZ),J.LFG(V.sK),J.LFG(I.D))},P.\u0275prov=J.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),D})(),K=(()=>{var P;class D{constructor(w,A){this.dataService=w,this.loxberryService=A}get controls$(){return this.dataService.select$(w=>Object.values(w.structure.controls)).pipe((0,f.d)())}get categories$(){return this.dataService.select$(w=>Object.values(w.structure.categories)).pipe((0,f.d)())}get rooms$(){return this.dataService.select$(w=>Object.values(w.structure.rooms)).pipe((0,f.d)())}getControl$(w,A){return this.dataService.select$(v=>v.structure.controls[w+"/"+A]).pipe((0,f.d)())}getSubControl$(w,A,v){return this.dataService.select$(g=>g.structure.controls[w+"/"+A].subControls[v]).pipe((0,f.d)())}updateControl(w,A){this.loxberryService.sendMessage(w,A)}}return(P=D).\u0275fac=function(w){return new(w||P)(J.LFG(I.D),J.LFG(R))},P.\u0275prov=J.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),D})()},6308:(j,W,_)=>{"use strict";_.d(W,{G:()=>J,W:()=>f});var f=function(I){return I[I.DOWN=0]="DOWN",I[I.DOWN_OFF=1]="DOWN_OFF",I[I.FULL_CLOSE=2]="FULL_CLOSE",I[I.FULL_OPEN=3]="FULL_OPEN",I[I.MINUS=4]="MINUS",I[I.PLUS=5]="PLUS",I[I.PUSH=6]="PUSH",I[I.SHADE=7]="SHADE",I[I.UP=8]="UP",I[I.UP_OFF=9]="UP_OFF",I}(f||{}),J=function(I){return I[I.DETAILED=0]="DETAILED",I[I.FAVORITE=1]="FAVORITE",I[I.LIST_ITEM=2]="LIST_ITEM",I[I.LIST_ITEM_POPUP=3]="LIST_ITEM_POPUP",I}(J||{})},7658:(j,W,_)=>{"use strict";_.d(W,{c:()=>f});class f{static hsv2rgb(I,U,t){const u=(P,D,E)=>Math.round(Math.max(Math.min(P,Math.max(D,E)),Math.min(D,E))),a=I/60,O=U/100,i=t/100,M=Math.floor(a),L=a-M,x=i*(1-O),S=i*(1-L*O),k=i*(1-(1-L)*O),Q=M%6,R=[k,i,i,S,x,x][Q],K=[x,x,k,i,i,S][Q];return[u(255*[i,S,x,x,k,i][Q],0,255),u(255*R,0,255),u(255*K,0,255)]}static getColor(I){let U;switch(I){case"primary":U="#69c350";break;case"secondary":default:U="#9d9e9e";break;case"tertiary":U="#6a64ff";break;case"success":U="#2fdf75";break;case"warning":U="#ffd534";break;case"danger":U="#ff4961";break;case"dark":U="#f4f5f8";break;case"medium":U="#989aa2";break;case"light":U="#222428"}return U}}},2571:(j,W,_)=>{"use strict";_.d(W,{W:()=>V});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(6223),L=_(4282);function x(R,K){if(1&R&&(t.ynx(0),t.TgZ(1,"ion-fab-button",11),t._UZ(2,"ion-icon",12),t.qZA(),t.BQk()),2&R){const P=t.oxw(2).ngIf;t.xp6(1),t.Jzz("background-color: ",P.ui.buttonColor,"")}}function S(R,K){if(1&R&&(t.ynx(0),t.TgZ(1,"ion-fab-button",13),t._UZ(2,"ion-icon",14),t.qZA(),t.BQk()),2&R){const P=t.oxw(2).ngIf,D=t.oxw();t.xp6(1),t.Jzz("background-color: ",P.ui.buttonColor,""),t.s9C("routerLink",D.subControl.uuid)}}function k(R,K){if(1&R&&(t.ynx(0),t.YNc(1,x,3,3,"ng-container",6),t.YNc(2,S,3,4,"ng-container",6),t.BQk()),2&R){const P=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf","Dimmer"===P.subControl.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===P.subControl.type)}}function Q(R,K){if(1&R){const P=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-label",4)(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-label",5)(7,"h2"),t._uU(8),t.qZA()(),t.YNc(9,k,3,2,"ng-container",6),t.qZA(),t.TgZ(10,"ion-item",3)(11,"ion-fab-button",7),t.NdJ("click",function(E){const A=t.CHM(P).ngIf,v=t.oxw();return t.KtG(v.clickDimmerButton(v.buttonType.DOWN,A,E))}),t._UZ(12,"ion-icon",8),t.qZA(),t.TgZ(13,"ion-range",9),t.NdJ("ionChange",function(E){const A=t.CHM(P).ngIf,v=t.oxw();return t.KtG(v.sliderChange(A,E))}),t.qZA(),t.TgZ(14,"ion-fab-button",10),t.NdJ("click",function(E){const A=t.CHM(P).ngIf,v=t.oxw();return t.KtG(v.clickDimmerButton(v.buttonType.UP,A,E))}),t._UZ(15,"ion-icon",8),t.qZA()()()()}if(2&R){const P=K.ngIf,D=t.oxw();t.xp6(5),t.Oqu(P.ui.name),t.xp6(3),t.hij("",P.ui.slider.position," %"),t.xp6(1),t.Q6J("ngIf",D.view===D.viewType.DETAILED),t.xp6(4),t.Jzz("--bar-background: ",P.ui.slider.color,";"),t.s9C("min",P.ui.slider.min),t.s9C("max",P.ui.slider.max),t.s9C("step",P.ui.slider.step),t.Q6J("ngModel",P.ui.slider.position)}}let V=(()=>{var R;class K{constructor(D,E){this.translate=D,this.controlService=E,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,J.U)(([D,E])=>this.updateVM(D,E))):console.error("Component 'card-dimmer' not available for rendering.")}updateVM(D,E){let w=null==E.states.min||""===E.states.min?0:Number(E.states.min),A=null==E.states.max||""===E.states.max?100:Number(E.states.max),v=null==E.states.step||""===E.states.step?1:Number(E.states.step),g=0,l="",o="";if("Dimmer"===E.type&&(g=E.states.position?Number(E.states.position):0,l="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb(255, 229, 127))",o="rgba(255, 229, 127,"+g/100+")"),"ColorPickerV2"===E.type){let e=E.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(e){g=e[3]?Number(e[3]):0;let s=U.c.hsv2rgb(Number(e[1]),Number(e[2]),100);l="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb("+s[0]+","+s[1]+","+s[2]+"))",o="rgba("+s[0]+","+s[1]+","+s[2]+","+g/100+")"}}return{control:D,subControl:E,ui:{name:this.view===I.G.DETAILED?E.name:this.translate.instant("Brightness"),buttonColor:g<10?"#31373e":o,slider:{position:g,min:w,max:A,step:v,color:l}},rgb:[]}}sliderChange(D,E){if("Dimmer"===D.subControl.type&&D.subControl.states.position!=E.detail.value&&this.controlService.updateControl(D.subControl,String(E.detail.value)),"ColorPickerV2"===D.subControl.type){let w=D.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(w[3]!=E.detail.value){let A="hsv("+w[1]+","+w[2]+","+String(E.detail.value)+")";this.controlService.updateControl(D.subControl,A)}}}clickDimmerButton(D,E,w){let A;if(w.preventDefault(),w.stopPropagation(),A=D===I.W.UP?E.ui.slider.position+E.ui.slider.step:E.ui.slider.position-E.ui.slider.step,A<E.ui.slider.min)A=E.ui.slider.min;else if(A>E.ui.slider.max)A=E.ui.slider.max;else if("Dimmer"===E.subControl.type&&this.controlService.updateControl(E.subControl,String(A)),"ColorPickerV2"===E.subControl.type){let v=E.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/),g="hsv("+v[1]+","+v[2]+","+String(A)+")";this.controlService.updateControl(E.subControl,g)}}}return(R=K).\u0275fac=function(D){return new(D||R)(t.Y36(u.sK),t.Y36(a.B))},R.\u0275cmp=t.Xpm({type:R,selectors:[["card-dimmer-view"]],inputs:{control:"control",subControl:"subControl",view:"view"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],[1,"label"],[1,"label-right"],[4,"ngIf"],[1,"fab-button-slider","icon-slider-left-small",3,"click"],["name","sunny",2,"color","#4e5761"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],[1,"fab-button-slider","btn_dimmer"],["name","contrast-outline",1,"hsv_icon"],[1,"fab-button-slider","btn_dimmer",3,"routerLink"],["name","color-filter-outline",1,"rgb_icon"]],template:function(D,E){1&D&&(t.YNc(0,Q,16,10,"ion-card",0),t.ALo(1,"async")),2&D&&t.Q6J("ngIf",t.lcZ(1,1,E.vm$))},dependencies:[O.O5,i.PM,i.FN,i.W4,i.gu,i.Ie,i.Q$,i.I_,i.QI,i.YI,M.JJ,M.On,L.rH,O.Ov]}),K})()},7383:(j,W,_)=>{"use strict";_.d(W,{x:()=>O});var f=_(5879),J=_(9515),I=_(5e3),U=_(6814),t=_(9843);function u(i,M){if(1&i&&(f.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",3),f._uU(3),f.ALo(4,"translate"),f.qZA()()()),2&i){const L=f.oxw().$implicit,x=f.oxw();f.xp6(1),f.Gre("radio-item selected-",x.radio_vm.ui.status.text==L.name,""),f.xp6(1),f.s9C("value",L.name),f.xp6(1),f.hij(" ",f.lcZ(4,5,L.name)," ")}}function a(i,M){if(1&i&&(f.TgZ(0,"div"),f.YNc(1,u,5,7,"div",2),f.qZA()),2&i){const L=M.$implicit;f.xp6(1),f.Q6J("ngIf",""!=L.name)}}let O=(()=>{var i;class M{constructor(x,S){this.translate=x,this.controlService=S}radioGroupChange(x,S){if("Radio"===x.control.type){let k=x.ui.radioList.findIndex(Q=>Q.name===S.detail.value);if(x.ui.radioList[k]&&x.ui.radioList[k].id!=x.ui.selectedId){let Q=String(x.ui.radioList[k].id);"0"===Q&&(Q="reset"),this.controlService.updateControl(x.control,Q)}}if("LightControllerV2"===x.control.type){let k=x.ui.radioList.findIndex(Q=>Q.name===S.detail.value);if(x.ui.radioList[k]&&x.ui.radioList[k].id!=x.ui.selectedId){let Q="changeTo/"+String(x.ui.radioList[k].id);this.controlService.updateControl(x.control,Q)}}}}return(i=M).\u0275fac=function(x){return new(x||i)(f.Y36(J.sK),f.Y36(I.B))},i.\u0275cmp=f.Xpm({type:i,selectors:[["card-radio-list-view"]],inputs:{radio_vm:"radio_vm"},decls:2,vars:2,consts:[[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"radio","radio-text",3,"value"]],template:function(x,S){1&x&&(f.TgZ(0,"ion-radio-group",0),f.NdJ("ionChange",function(Q){return S.radioGroupChange(S.radio_vm,Q)}),f.YNc(1,a,2,1,"div",1),f.qZA()),2&x&&(f.s9C("value",S.radio_vm.ui.status.text),f.xp6(1),f.Q6J("ngForOf",S.radio_vm.ui.radioList))},dependencies:[U.sg,U.O5,t.Ie,t.B7,t.se,t.U5,t.QI,J.X$]}),M})()},717:(j,W,_)=>{"use strict";_.d(W,{h:()=>i});var f=_(5879),J=_(9515),I=_(5e3),U=_(6814),t=_(9843);function u(M,L){if(1&M&&f._UZ(0,"ion-icon",8),2&M){const x=f.oxw();f.s9C("color",x.text_vm.control.icon.color),f.s9C("src",x.text_vm.control.icon.href)}}function a(M,L){if(1&M&&(f.TgZ(0,"div",9)(1,"div")(2,"span",10),f._uU(3),f.qZA(),f.TgZ(4,"span",11),f._uU(5),f.qZA()()()),2&M){const x=f.oxw();f.xp6(3),f.Oqu(x.text_vm.ui.icon.tempBase),f.xp6(2),f.Oqu(x.text_vm.ui.icon.tempDec)}}function O(M,L){if(1&M&&(f.TgZ(0,"h2"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&M){const x=f.oxw();f.Udp("color",x.text_vm.ui.status.color),f.xp6(1),f.hij(" ",f.lcZ(2,3,x.text_vm.ui.status.text)," ")}}let i=(()=>{var M;class L{constructor(S,k){this.translate=S,this.controlService=k}}return(M=L).\u0275fac=function(S){return new(S||M)(f.Y36(J.sK),f.Y36(I.B))},M.\u0275cmp=f.Xpm({type:M,selectors:[["card-text-view"]],inputs:{text_vm:"text_vm"},decls:14,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"item"],["class","icon",3,"color","src",4,"ngIf"],["class","icon text-icon",4,"ngIf"],[1,"card-content"],[1,"label","label-fav"],[3,"color",4,"ngIf"],[1,"icon",3,"color","src"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"]],template:function(S,k){1&S&&(f.TgZ(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-item",2),f.YNc(3,u,1,2,"ion-icon",3),f.YNc(4,a,6,2,"div",4),f._UZ(5,"ion-label"),f.qZA()(),f.TgZ(6,"ion-card-content",5)(7,"ion-item",2)(8,"ion-label",6)(9,"p"),f._uU(10),f.qZA(),f.TgZ(11,"h1"),f._uU(12),f.qZA(),f.YNc(13,O,3,5,"h2",7),f.qZA()()()()),2&S&&(f.xp6(3),f.Q6J("ngIf",null==k.text_vm.ui.icon),f.xp6(1),f.Q6J("ngIf",k.text_vm.ui.icon),f.xp6(6),f.AsE("",k.text_vm.ui.room," \u2022 ",k.text_vm.ui.category,""),f.xp6(2),f.Oqu(k.text_vm.ui.name),f.xp6(1),f.Q6J("ngIf",""!==k.text_vm.ui.status.text))},dependencies:[U.O5,t.PM,t.FN,t.Zi,t.gu,t.Ie,t.Q$,J.X$]}),L})()},7066:(j,W,_)=>{"use strict";_.d(W,{a:()=>v});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(6223),L=_(4282),x=_(717);function S(g,l){if(1&g&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function k(g,l){if(1&g&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA()()()()),2&g){const o=l.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function Q(g,l){if(1&g&&(t.ynx(0),t.YNc(1,k,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function V(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function R(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function K(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function P(g,l){if(1&g&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function D(g,l){if(1&g&&(t.TgZ(0,"ion-card",10)(1,"ion-card-header",11)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",12),t.YNc(8,V,2,2,"p",0),t.YNc(9,R,2,1,"p",0),t.YNc(10,K,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,P,2,3,"h2",7),t.qZA()()()()),2&g){const o=l.ngIf,r=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function E(g,l){if(1&g&&(t.ynx(0),t.YNc(1,D,14,9,"ion-card",9),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function w(g,l){if(1&g){const o=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",16),t.NdJ("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.arm(s,n))}),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-card",17)(11,"ion-card-content",3)(12,"ion-item",4)(13,"ion-toggle",18),t.NdJ("ngModelChange",function(n){t.CHM(o);const e=t.oxw(2);return t.KtG(e.presence=n)})("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.presenceToggle(s,n))}),t._uU(14," Presence detection "),t.qZA()()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-card",17)(18,"ion-card-content",3)(19,"ion-item",4)(20,"ion-toggle",19),t.NdJ("ngModelChange",function(n){t.CHM(o);const e=t.oxw(2);return t.KtG(e.delayedon=n)}),t._uU(21," Arming delayed "),t.qZA()()()()()(),t.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-button",20),t._uU(25," History "),t.qZA()()()()}if(2&g){const o=l.ngIf,r=t.oxw(2);t.xp6(3),t.Q6J("text_vm",o),t.xp6(4),t.hij(" ",o.ui.button.text," "),t.xp6(6),t.Q6J("ngModel",r.presence),t.xp6(7),t.Q6J("ngModel",r.delayedon)}}function A(g,l){if(1&g&&(t.ynx(0),t.YNc(1,w,26,4,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}let v=(()=>{var g;class l{constructor(r,n){this.translate=r,this.controlService=n,this.buttonType=I.W,this.viewType=I.G,this.delayedon=!1,this.presence=!0}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([r,n,e])=>this.updateVM(r,n,e))):console.error("Component 'control-alarm' not available for rendering.")}updateVM(r,n,e){let s=e.find(T=>T.uuid===r.room&&T.serialNr===r.serialNr),m=n.find(T=>T.uuid===r.category&&T.serialNr===r.serialNr),c=!!Number(r.states.armed),p=c?"Armed":"Disarmed",h=c?"Disarm alarm":"Arm alarm";return{control:{...r,icon:{href:"assets/icons/svg/shield.svg",color:c?"primary":U.c.getColor("dark")}},ui:{name:r.name,room:s&&s.name?s.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:this.translate.instant(p),color:U.c.getColor(c?"primary":"secondary")},button:{text:this.translate.instant(h)}},state:c}}arm(r,n){let e;r.state?e="off":(e=this.delayedon?"delayedon/":"on/",e+=this.presence?"1":"0"),this.controlService.updateControl(r.control,e)}presenceToggle(r,n){let e;r.state&&(e="dismv/"+(this.presence?"1":"0"),this.controlService.updateControl(r.control,e))}showHistory(r,n){}}return(g=l).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(a.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-alarm-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],["translate","",3,"color",4,"ngIf"],["translate",""],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"card"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange","click"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange"],["expand","block","routerLink","history","translate","",1,"push-button"]],template:function(r,n){1&r&&(t.YNc(0,Q,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,A,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.ho,i.w,i.YI,M.JJ,M.On,L.rH,u.Pi,x.h,O.Ov]}),l})()},4403:(j,W,_)=>{"use strict";_.d(W,{x:()=>l});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(717),x=_(8513);function S(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function k(o,r){if(1&o&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA(),t.GkF(8),t.qZA()()()),2&o){const n=r.ngIf;t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(3),t.Oqu(n.ui.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text)}}function Q(o,r){if(1&o&&(t.ynx(0),t.YNc(1,k,9,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function V(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function R(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.room)}}function K(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.category)}}function P(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function D(o,r){if(1&o&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,V,2,2,"p",0),t.YNc(9,R,2,1,"p",0),t.YNc(10,K,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,P,2,3,"h2",7),t.qZA()()()()),2&o){const n=r.ngIf,e=t.oxw(2);t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(n.ui.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text)}}function E(o,r){if(1&o&&(t.ynx(0),t.YNc(1,D,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function w(o,r){if(1&o&&(t.TgZ(0,"ion-col",16),t._UZ(1,"control-light-v2-view",17),t.qZA()),2&o){const n=r.$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("control",n)("view",e.viewType.LIST_ITEM_POPUP)}}function A(o,r){if(1&o&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,w,2,2,"ion-col",15),t.qZA()()),2&o){const n=r.ngIf;t.xp6(3),t.Q6J("text_vm",n),t.xp6(2),t.Q6J("ngForOf",n.controls)}}function v(o,r){if(1&o&&(t.ynx(0),t.YNc(1,A,6,2,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}var g=_(9572).sprintf;let l=(()=>{var o;class r{constructor(e,s){this.translate=e,this.controlService=s,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.controls$,this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([e,s,m,c])=>this.updateVM(e,s,m,c))):console.error("Component 'control-central-light' not available for rendering.")}updateVM(e,s,m,c){let p=c.find(Z=>Z.uuid===e.room&&Z.serialNr===e.serialNr),h=m.find(Z=>Z.uuid===e.category&&Z.serialNr===e.serialNr),d=e.details.controls.map(Z=>Z.uuid),T=s.filter(Z=>d.indexOf(Z.uuid)>-1),y=d.length,N="",C=!1;T.forEach(Z=>{Z.states.activeMoods&&Z.states.activeMoods[0]&&778===Z.states.activeMoods[0]&&y--});let B=T.sort((Z,Y)=>this.getRoomName(c,Z.serialNr,Z.room).localeCompare(this.getRoomName(c,Y.serialNr,Y.room)));switch(y){case 0:N=this.translate.instant("All off"),C=!1;break;case 1:N=g(this.translate.instant("On in %s room"),1),C=!0;break;default:N=g(this.translate.instant("On in %s rooms"),y),C=!0}return{control:{...e,icon:{href:e.icon.href,color:C?"primary":"dark"}},controls:B,ui:{name:e.name,room:p.name,category:h.name,status:{text:N,color:U.c.getColor(C?"primary":"secondary")}}}}getRoomName(e,s,m){return e.find(c=>c.uuid===m&&c.serialNr===s).name}updateSegment(){}clickLightButton(e,s,m){m.preventDefault(),m.stopPropagation()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.Y36(u.sK),t.Y36(a.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["control-central-light-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","view"]],template:function(e,s){1&e&&(t.YNc(0,Q,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,v,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",s.view===s.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,L.h,x.M,O.Ov]}),r})()},8759:(j,W,_)=>{"use strict";_.d(W,{j:()=>e});var f=_(9843),J=_(2572),I=_(7398),U=_(6814),t=_(6308),u=_(7658),a=_(6676),i=_(5879),M=_(9515),L=_(5e3),x=_(6223),S=_(4282),k=_(717);function Q(s,m){if(1&s&&(i.TgZ(0,"h2"),i._uU(1),i.qZA()),2&s){const c=i.oxw().ngIf;i.Udp("color",c.ui.status.color),i.xp6(1),i.hij(" ",c.ui.status.text,"")}}function V(s,m){if(1&s&&(i.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),i._UZ(3,"ion-icon",5),i.TgZ(4,"ion-label",6)(5,"h1"),i._uU(6),i.qZA(),i.YNc(7,Q,2,3,"h2",7),i.qZA()()()()),2&s){const c=m.ngIf;i.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),i.xp6(3),i.s9C("color",c.control.icon.color),i.s9C("src",c.control.icon.href),i.xp6(3),i.Oqu(c.control.name),i.xp6(1),i.Q6J("ngIf",""!==c.ui.status.text)}}function R(s,m){if(1&s&&(i.ynx(0),i.YNc(1,V,8,6,"ion-card",1),i.ALo(2,"async"),i.BQk()),2&s){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}function K(s,m){if(1&s&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&s){const c=i.oxw().ngIf;i.xp6(1),i.AsE("",c.ui.room," \u2022 ",c.ui.category,"")}}function P(s,m){if(1&s&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&s){const c=i.oxw().ngIf;i.xp6(1),i.Oqu(c.ui.room)}}function D(s,m){if(1&s&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&s){const c=i.oxw().ngIf;i.xp6(1),i.Oqu(c.ui.category)}}function E(s,m){if(1&s&&(i.TgZ(0,"h2"),i._uU(1),i.qZA()),2&s){const c=i.oxw().ngIf;i.Udp("color",c.ui.status.color),i.xp6(1),i.hij(" ",c.ui.status.text,"")}}function w(s,m){if(1&s&&(i.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),i._UZ(3,"ion-icon",5)(4,"ion-label"),i.qZA()(),i.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),i.YNc(8,K,2,2,"p",0),i.YNc(9,P,2,1,"p",0),i.YNc(10,D,2,1,"p",0),i.TgZ(11,"h1"),i._uU(12),i.qZA(),i.YNc(13,E,2,3,"h2",7),i.qZA()()()()),2&s){const c=m.ngIf,p=i.oxw(2);i.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),i.xp6(3),i.s9C("color",c.control.icon.color),i.s9C("src",c.control.icon.href),i.xp6(5),i.Q6J("ngIf","home"===p.key),i.xp6(1),i.Q6J("ngIf","room"===p.key),i.xp6(1),i.Q6J("ngIf","category"===p.key),i.xp6(2),i.Oqu(c.control.name),i.xp6(1),i.Q6J("ngIf",""!==c.ui.status.text)}}function A(s,m){if(1&s&&(i.ynx(0),i.YNc(1,w,14,9,"ion-card",8),i.ALo(2,"async"),i.BQk()),2&s){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}function v(s,m){if(1&s){const c=i.EpF();i.TgZ(0,"ion-button",17),i._uU(1),i.TgZ(2,"ion-alert",18),i.NdJ("didDismiss",function(h){i.CHM(c);const d=i.oxw().ngIf,T=i.oxw(2);return i.KtG(T.cancelTimer(h,d))}),i.qZA()()}if(2&s){const c=i.oxw().ngIf,p=i.oxw(2);i.xp6(1),i.hij(" ",c.ui.timer.text," "),i.xp6(1),i.MGl("header","",c.ui.timer.text,"?"),i.Q6J("buttons",p.cancelTimerButtons)}}function g(s,m){if(1&s){const c=i.EpF();i.TgZ(0,"ion-item",21)(1,"ion-toggle",22),i.NdJ("ngModelChange",function(h){i.CHM(c);const d=i.oxw(4);return i.KtG(d.output=h)}),i._uU(2,"Output"),i.qZA()(),i.TgZ(3,"ion-datetime",23,24),i.NdJ("ionChange",function(h){i.CHM(c);const d=i.oxw(2).ngIf,T=i.oxw(2);return i.KtG(T.dateChanged(h,d))}),i.TgZ(5,"span",25),i._uU(6,"Time"),i.qZA(),i.TgZ(7,"ion-buttons",26)(8,"ion-button",27),i.NdJ("click",function(){i.CHM(c);const h=i.oxw(4);return i.KtG(h.cancel())}),i._uU(9,"Cancel"),i.qZA(),i.TgZ(10,"ion-button",28),i.NdJ("click",function(){i.CHM(c);const h=i.oxw(4);return i.KtG(h.confirm())}),i._uU(11,"OK"),i.qZA()()()}if(2&s){const c=i.oxw(2).ngIf,p=i.oxw(2);i.xp6(1),i.Q6J("ngModel",p.output),i.xp6(2),i.s9C("locale",c.ui.calendar.locale),i.Q6J("ngModel",c.ui.calendar.datetime)}}function l(s,m){if(1&s&&(i.TgZ(0,"ion-button",19),i._uU(1),i.TgZ(2,"ion-popover",20),i.YNc(3,g,12,3,"ng-template"),i.qZA()()),2&s){const c=i.oxw().ngIf;i.xp6(1),i.hij(" ",c.ui.timer.text," ")}}function o(s,m){if(1&s&&(i.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),i._UZ(3,"card-text-view",14),i.qZA()(),i.TgZ(4,"ion-row")(5,"ion-col"),i.YNc(6,v,3,3,"ion-button",15),i.YNc(7,l,4,1,"ion-button",16),i.qZA()()()),2&s){const c=m.ngIf;i.xp6(3),i.Q6J("text_vm",c),i.xp6(3),i.Q6J("ngIf",c.ui.timer.enabled),i.xp6(1),i.Q6J("ngIf",!c.ui.timer.enabled)}}function r(s,m){if(1&s&&(i.ynx(0),i.YNc(1,o,8,3,"ion-grid",12),i.ALo(2,"async"),i.BQk()),2&s){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}var n=_(9572).sprintf;let e=(()=>{var s;class m{constructor(p,h){this.translate=p,this.controlService=h,this.buttonType=t.W,this.viewType=t.G,this.cancelTimerButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,J.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,I.U)(([p,h,d])=>this.updateVM(p,h,d))):console.error("Component 'control-daytimer' not available for rendering.")}updateVM(p,h,d){let T=d.find(z=>z.uuid===p.room&&z.serialNr===p.serialNr),y=h.find(z=>z.uuid===p.category&&z.serialNr===p.serialNr),N=Number(p.states.value)||p.details.analog,C=a({h:(new Date).getHours(),s:(new Date).getMinutes()}),B="00:00",b="00:00";if(p.states.entriesAndDefaultValue){let z=p.states.entriesAndDefaultValue;z=z.replaceAll("}\n{","},\n{"),z=z.replace(/([a-zA-Z]+)(: )/gm,'"$1"$2'),z=z.replace(/(: )([a-zA-Z\-\d:]+)/gm,': "$2"');let ct=JSON.parse(z);if(Number(ct.entries)>0){let et=ct.entry.filter(q=>q.mode===p.states.mode);for(let q=0;q<et.length;q++){let F=et[q];if(C.isAfter(a(F.to,"HH:mm"))&&(b=F.to),C.isBefore(a(F.from,"HH:mm"))&&(B=F.from),C.isAfter(a(F.from,"HH:mm"))&&C.isBefore(a(F.to,"HH:mm"))){b=F.from,B=F.to;break}}}}let Z=Number(p.states.override)>0,Y=p.details.analog?n(p.details.format,p.states.value):Number(p.states.value)?p.details.text.on:p.details.text.off,G=new U.uU("en-US");const $=Date.now()+1e3*Number(p.states.override);let H=G.transform($,"dd.MM.yyyy HH:mm");return Z?Y+=" "+this.translate.instant("Till").toLowerCase()+" "+H:b!==B&&(Y+=" "+this.translate.instant("From").toLowerCase()+" "+b+" "+this.translate.instant("Till").toLowerCase()+" "+B),null==this.output&&(this.output=!N),{control:{...p,icon:{href:p.icon.href,color:N?"primary":u.c.getColor("dark")}},ui:{name:p.name,room:T&&T.name?T.name:"unknown",category:y&&y.name?y.name:"unknown",status:{text:Y,color:u.c.getColor(N?"primary":"secondary")},timer:{enabled:Z,endTime:Number(p.states.override),text:Z?"Stop timer":"Start timer"},calendar:{output:this.output,datetime:void 0,locale:this.translate.currentLang}}}}cancelTimer(p,h){"ok"===p.detail.role&&this.controlService.updateControl(h.control,"stopOverride")}cancel(){this.datetime.cancel(!0)}confirm(){this.datetime.confirm(!0)}dateChanged(p,h){h.ui.calendar.datetime=p.detail.value;let T=6e4*Math.round((new Date(h.ui.calendar.datetime).getTime()-Date.now())/6e4)/1e3,y=h.ui.calendar.output?"1":"0";if(!(T>10))return void(h.calendar.datetime=void 0);let C="startOverride/"+String(y)+"/"+String(T);this.controlService.updateControl(h.control,C)}}return(s=m).\u0275fac=function(p){return new(p||s)(i.Y36(M.sK),i.Y36(L.B))},s.\u0275cmp=i.Xpm({type:s,selectors:[["control-daytimer-view"]],viewQuery:function(p,h){if(1&p&&i.Gf(f.x4,5),2&p){let d;i.iGM(d=i.CRH())&&(h.datetime=d.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","stop-timer",4,"ngIf"],["class","push-button","expand","block","id","datetime-popover",4,"ngIf"],["expand","block","id","stop-timer",1,"push-button"],["trigger","stop-timer",3,"header","buttons","didDismiss"],["expand","block","id","datetime-popover",1,"push-button"],["trigger","datetime-popover","cssClass","width-100"],[1,"date-item"],["color","primary","mode","ios","translate","",1,"toggle-active",3,"ngModel","ngModelChange"],["size","cover",3,"locale","ngModel","ionChange"],["datetime",""],["slot","time-label","translate",""],["slot","buttons"],["color","primary","translate","",3,"click"],["color","primary",3,"click"]],template:function(p,h){1&p&&(i.YNc(0,R,3,3,"ng-container",0),i.YNc(1,A,3,3,"ng-container",0),i.YNc(2,r,3,3,"ng-container",0)),2&p&&(i.Q6J("ngIf",h.view===h.viewType.LIST_ITEM),i.xp6(1),i.Q6J("ngIf",h.view===h.viewType.FAVORITE),i.xp6(1),i.Q6J("ngIf",h.view===h.viewType.DETAILED))},dependencies:[U.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.ho,f.d8,f.w,f.QI,f.YI,x.JJ,x.On,S.rH,M.Pi,k.h,U.Ov],styles:["ion-popover.width-100[_ngcontent-%COMP%]{--width: 300px}.date-item[_ngcontent-%COMP%]{font-size:18px;margin:0}.toggle-active[_ngcontent-%COMP%]{padding:10px 10px 0}ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}"]}),m})()},3914:(j,W,_)=>{"use strict";_.d(W,{p:()=>v});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(717);function x(g,l){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function S(g,l){if(1&g&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,x,2,3,"h2",7),t.qZA()()()()),2&g){const o=l.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function k(g,l){if(1&g&&(t.ynx(0),t.YNc(1,S,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function Q(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function V(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function R(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function K(g,l){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function P(g,l){if(1&g&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,Q,2,2,"p",0),t.YNc(9,V,2,1,"p",0),t.YNc(10,R,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,K,2,3,"h2",7),t.qZA()()()()),2&g){const o=l.ngIf,r=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function D(g,l){if(1&g&&(t.ynx(0),t.YNc(1,P,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function E(g,l){if(1&g&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()()()),2&g){const o=l.ngIf;t.xp6(3),t.Q6J("text_vm",o)}}function w(g,l){if(1&g&&(t.ynx(0),t.YNc(1,E,4,1,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}var A=_(9572).sprintf;let v=(()=>{var g;class l{constructor(r,n){this.translate=r,this.controlService=n,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([r,n,e])=>this.updateVM(r,n,e))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(r,n,e){let s=e.find(T=>T.uuid===r.room&&T.serialNr===r.serialNr),m=n.find(T=>T.uuid===r.category&&T.serialNr===r.serialNr),p="V ";"en"==this.translate.currentLang&&(p="C ");let h="P "+Number(A("%.2f",r.states.prodCurr)).toLocaleString(this.translate.currentLang)+" kW \u2022 "+p+Number(A("%.2f",r.states.consCurr)).toLocaleString(this.translate.currentLang)+" kW";return{control:{...r,icon:{href:"assets/icons/svg/leaf.svg",color:"primary"},states:{prodCurr:this.format(r.states.prodCurr,"kW"),prodCurrDay:this.format(r.states.prodCurrDay,"kWh"),prodCurrMonth:this.format(r.states.prodCurrMonth,"kWh"),prodCurrYear:this.format(r.states.prodCurrYear,"kWh"),prodTotal:this.format(r.states.prodTotal,"kWh"),consCurr:this.format(r.states.consCurr,"kW"),consCurrDay:this.format(r.states.consCurrDay,"kWh"),gridCurr:this.format(r.states.gridCurr,"kW"),batteryCurr:this.format(r.states.batteryCurr,"kW"),stateOfCharge:this.format(r.states.stateOfCharge,""),earningsDay:this.format(r.states.earningsDay,"euro"),earningsMonth:this.format(r.states.earningsMonth,"euro"),earningsYear:this.format(r.states.earningsYear,"euro"),earningsTotal:this.format(r.states.earningsTotal,"euro"),priceDelivery:this.format(r.states.priceDelivery,""),priceConsumption:this.format(r.states.priceConsumption,""),co2Factor:r.states.prodCurr.co2Factor,generatorType:r.states.prodCurr.generatorType,mode:r.states.mode,online:r.states.prodCurr.online}},ui:{name:r.name,room:s&&s.name?s.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:h,color:U.c.getColor("primary")}}}}format(r,n){let e=Number(r);return String(Number(A("%.2f",e)).toLocaleString(this.translate.currentLang))+" "+n}}return(g=l).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(a.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-fronius-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(r,n){1&r&&(t.YNc(0,k,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,w,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,L.h,O.Ov]}),l})()},6353:(j,W,_)=>{"use strict";_.d(W,{p:()=>m});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(6223),L=_(4282),x=_(9140);const S=["thermostat"];let k=(()=>{var c;class p{constructor(d,T,y,N){this.translateService=d,this.controlService=T,this.renderer=y,this.storageService=N,this.onChange=new t.vpe,this.ambientTemperatureStr="",this.targetTemperatureStr=["",""],this.emitChange=!1,this.disabled=!0,this.ticks={points:[],pointsAmbient:[],pointsTarget:[],min:null,max:null,rangeValue:null,theta:null,degrees:null,offsetDegrees:null,outerRadius:null,innerRadius:null},this.svg={root:null,group:null,dial:null,tickArray:[],ring:null,touchArea:null,txtTarget:null,txtTemperature:null,txtTargetTemp:null,txtTargetTempDot:null,txtAmbientTemp:null,leaf:null,heating:null,cooling:null,txtAway:null,iconUp:null,iconDown:null,btnUp:null,btnDown:null,unit:null},this.props={height:"350px",width:"350px",numTicks:150,minValue:10,maxValue:30,away:!1,leaf:!1,is_heating:!1,is_cooling:!1,ambientTemperature:10,targetTemperature:10,hvacMode:"heating"},this.diameter=350,this.radius=this.diameter/2,this.ticks.rangeValue=this.props.maxValue-this.props.minValue,this.ticks.outerRadius=this.diameter/30,this.ticks.innerRadius=this.diameter/8,this.ticks.degrees=300,this.ticks.offsetDegrees=180-(360-this.ticks.degrees)/2,this.ticks.theta=this.ticks.degrees/this.props.numTicks,this.ticks.points=[[this.radius-1,this.ticks.outerRadius],[this.radius+1,this.ticks.outerRadius],[this.radius+1,this.ticks.innerRadius],[this.radius-1,this.ticks.innerRadius]],this.ticks.pointsTarget=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius+20],[this.radius-2.5,this.ticks.innerRadius+20]],this.ticks.pointsAmbient=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius],[this.radius-2.5,this.ticks.innerRadius]],this.storageSubscription=this.storageService.settings$.subscribe(C=>{C&&C.app&&C.app.darkTheme&&(this.darkTheme=C.app.darkTheme)})}ngOnChanges(){this.props.ambientTemperature=Number(this.tempActual),this.props.targetTemperature=Number(this.tempTarget);let d=Number(this.mode),T=Number(this.preset);this.disabled=5!=d&&6!=d,this.props.leaf=0==T,this.render()}ngOnInit(){this.styles=this.getStyles(),this.initSVG(),this.render(),this.svg.touchArea.addEventListener("mouseup",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousedown",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("click",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("touchend",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousemove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.btnDown.addEventListener("click",this.btnDown.bind(this)),this.svg.btnDown.addEventListener("touchstart",this.btnDownStart.bind(this)),this.svg.btnDown.addEventListener("touchend",this.btnDownEnd.bind(this)),this.svg.btnUp.addEventListener("click",this.btnUp.bind(this)),this.svg.btnUp.addEventListener("touchstart",this.btnUpStart.bind(this)),this.svg.btnUp.addEventListener("touchend",this.btnUpEnd.bind(this))}ngOnDestroy(){this.storageSubscription.unsubscribe()}btnUp(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)+.5,this.props.targetTemperature>this.props.maxValue&&(this.props.targetTemperature=this.props.maxValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDown(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)-.5,this.props.targetTemperature<this.props.minValue&&(this.props.targetTemperature=this.props.minValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDownStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnDown(d)},80))}btnUpStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnUp(d)},80))}btnDownEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}btnUpEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}getStyles(){return{svg:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},dial:{fill:"transparent",WebkitTransition:"fill 0.5s",transition:"fill 0.5s"},ring:{fill:"transparent",stroke:this.darkTheme?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.9)","stroke-width":"40",filter:"drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.2))"},description:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"18px","font-weight":"normal",visibility:this.props.away?"hidden":"visible"},targettemp:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"98px","letter-spacing":"0.01em","font-weight":"bold",visibility:this.props.away?"hidden":"visible"},targettempdot:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"40px","font-weight":"bold"},ambienttemp:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"18px","letter-spacing":"0.01em","font-weight":"bold"},away:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"72px","font-weight":"bold",opacity:this.props.away?1:0,"pointer-events":"none"},leaf:{fill:"#13EB13",opacity:this.props.leaf?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},heating:{fill:"#e73246",opacity:this.props.is_heating?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},cooling:{fill:"#00b0db",opacity:this.props.is_cooling?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},unit:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"20px"}}}pointsToPath(d){return[d.map((T,y)=>[y>0?"L":"M",T[0]," ",T[1]].join("")).join(" "),"Z"].join("")}rotatePoint(d,T,y){const N=T*Math.PI/180,C=d[0]-y[0],B=d[1]-y[1];return[C*Math.cos(N)-B*Math.sin(N)+y[0],C*Math.sin(N)+B*Math.cos(N)+y[1]]}rotatePoints(d,T,y){const N=this;return d.map(C=>N.rotatePoint(C,T,y))}restrictToRange(d,T,y){return d<T?T:d>y?y:d}scalePoint(d,T){return isNaN(d)?d:d*T}createSVGElement(d,T,y){let N=document.createElementNS("http://www.w3.org/2000/svg",d);return this.attr(N,T),y&&y.appendChild(N),N}createSVGTextElement(d,T,y){let N=this.createSVGElement("text",T,y);return N.appendChild(document.createTextNode(d)),N}attr(d,T){for(let y in T)"object"==typeof T[y]&&null!==T[y]?this.attr(d,T[y]):d.setAttribute(y,T[y])}setMixMaxRange(){let d,T;this.props.away?(d=this.props.ambientTemperature,T=d):(d=Math.min(this.props.ambientTemperature,this.props.targetTemperature),T=Math.max(this.props.ambientTemperature,this.props.targetTemperature)),this.ticks.min=this.restrictToRange(Math.round((d-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1),this.ticks.max=this.restrictToRange(Math.round((T-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1)}initSVG(){const d=this;this.setMixMaxRange(),this.svg.tickArray=[],this.svg.root=this.createSVGElement("svg",{width:this.props.width,height:this.props.height,viewBox:"0 0 "+this.diameter+" "+this.diameter,style:this.styles.svg},this.thermostat.nativeElement),this.svg.ring=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:.842*this.radius,style:this.styles.ring},this.svg.root),this.svg.group=this.createSVGElement("g",{},this.svg.root);for(let N=0;N<this.props.numTicks;N++){const C=this.createSVGElement("path",{key:["tick-",N].join(""),d:this.pointsToPath(this.rotatePoints(this.ticks.points,N*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:"rgba(255, 255, 255, 0.3)"}},this.svg.group);this.svg.tickArray.push(C)}this.svg.dial=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:this.styles.dial},this.svg.root),this.svg.touchArea=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:{fill:"transparent"}},this.svg.root),this.svg.txtTarget=this.createSVGTextElement(this.translateService.instant("Target"),{x:this.radius,y:this.radius-this.radius/2.2,style:this.styles.description},this.svg.root),this.svg.txtTemperature=this.createSVGTextElement(this.translateService.instant("Temperature").toLowerCase(),{x:this.radius,y:this.radius-this.radius/3,style:this.styles.description},this.svg.root),this.svg.txtTargetTemp=this.createSVGTextElement(this.targetTemperatureStr[0],{x:this.radius,y:this.radius,style:this.styles.targettemp},this.svg.root),this.svg.txtTargetTempDot=this.createSVGTextElement(this.targetTemperatureStr[1],{x:this.radius+this.radius/2.5,y:this.radius-this.radius/8.5,style:this.styles.targettempdot},this.svg.root),this.svg.txtAmbientTemp=this.createSVGTextElement(this.ambientTemperatureStr,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp},this.svg.root),this.svg.txtAway=this.createSVGTextElement("AWAY",{x:this.radius,y:this.radius,style:this.styles.away},this.svg.root);const T=this.radius/5/100;let y=["M",3,84,"c",24,17,51,18,73,-6,"C",100,52,100,22,100,4,"c",-13,15,-37,9,-70,19,"C",4,32,0,63,0,76,"c",6,-7,18,-17,33,-23,24,-9,34,-9,48,-20,-9,10,-20,16,-43,24,"C",22,63,8,78,3,84,"z"].map(N=>d.scalePoint(N,T)).join(" ");this.translate=[this.radius-100*T*.5,1.4*this.radius],this.svg.leaf=this.createSVGElement("path",{d:y,style:this.styles.leaf,transform:"translate("+this.translate[0]+","+this.translate[1]+")"},this.svg.root),this.svg.heating=this.createSVGElement("path",{d:"M394.23 197.56a300.43 300.43 0 00-53.37-90C301.2 61.65 249.05 32 208 32a16 16 0 00-15.48 20c13.87 53-14.88 97.07-45.31 143.72C122 234.36 96 274.27 96 320c0 88.22 71.78 160 160 160s160-71.78 160-160c0-43.3-7.32-84.49-21.77-122.44zm-105.9 221.13C278 429.69 265.05 432 256 432s-22-2.31-32.33-13.31S208 390.24 208 368c0-25.14 8.82-44.28 17.34-62.78 4.95-10.74 10-21.67 13-33.37a8 8 0 0112.49-4.51A126.48 126.48 0 01275 292c18.17 24 29 52.42 29 76 0 22.24-5.42 39.77-15.67 50.69z",style:this.styles.heating,transform:"scale(0.05) translate(1700, 3000)"},this.svg.root),this.svg.cooling=this.createSVGElement("path",{d:"M461 349l-34-19.64a89.53 89.53 0 0120.94-16 22 22 0 00-21.28-38.51 133.62 133.62 0 00-38.55 32.1L300 256l88.09-50.86a133.46 133.46 0 0038.55 32.1 22 22 0 1021.28-38.51 89.74 89.74 0 01-20.94-16l34-19.64A22 22 0 10439 125l-34 19.63a89.74 89.74 0 01-3.42-26.15A22 22 0 00380 96h-.41a22 22 0 00-22 21.59 133.61 133.61 0 008.5 49.41L278 217.89V116.18a133.5 133.5 0 0047.07-17.33 22 22 0 00-22.71-37.69A89.56 89.56 0 01278 71.27V38a22 22 0 00-44 0v33.27a89.56 89.56 0 01-24.36-10.11 22 22 0 10-22.71 37.69A133.5 133.5 0 00234 116.18v101.71L145.91 167a133.61 133.61 0 008.52-49.43 22 22 0 00-22-21.59H132a22 22 0 00-21.59 22.41 89.74 89.74 0 01-3.41 26.19L73 125a22 22 0 10-22 38.1l34 19.64a89.74 89.74 0 01-20.94 16 22 22 0 1021.28 38.51 133.62 133.62 0 0038.55-32.1L212 256l-88.09 50.86a133.62 133.62 0 00-38.55-32.1 22 22 0 10-21.28 38.51 89.74 89.74 0 0120.94 16L51 349a22 22 0 1022 38.1l34-19.63a89.74 89.74 0 013.42 26.15A22 22 0 00132 416h.41a22 22 0 0022-21.59 133.61 133.61 0 00-8.5-49.41L234 294.11v101.71a133.5 133.5 0 00-47.07 17.33 22 22 0 1022.71 37.69A89.56 89.56 0 01234 440.73V474a22 22 0 0044 0v-33.27a89.56 89.56 0 0124.36 10.11 22 22 0 0022.71-37.69A133.5 133.5 0 00278 395.82V294.11L366.09 345a133.61 133.61 0 00-8.52 49.43 22 22 0 0022 21.59h.43a22 22 0 0021.59-22.41 89.74 89.74 0 013.41-26.19l34 19.63A22 22 0 10461 349z",style:this.styles.cooling,transform:"scale(0.05) translate(1700, 3600)"},this.svg.root),this.svg.iconDown=this.createSVGElement("path",{d:"M 7 12 l 9 9 9-9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(125, 299)"},this.svg.root),this.svg.iconUp=this.createSVGElement("path",{d:"M 7 12 l 9-9 9 9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(200, 307)"},this.svg.root),this.svg.btnDown=this.createSVGElement("circle",{cx:140,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.btnUp=this.createSVGElement("circle",{cx:215,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.unit=this.createSVGTextElement("\xb0C",{x:this.radius+70,y:this.radius+30,style:this.styles.unit},this.svg.root)}render(){if(!this.svg.root)return;this.setMixMaxRange(),this.svg.tickArray.forEach((C,B)=>{let b=this.props.targetTemperature>this.props.ambientTemperature?B===this.ticks.max:B===this.ticks.min,Y=B>=this.ticks.min&&B<=this.ticks.max;this.attr(C,{d:this.pointsToPath(this.rotatePoints(b||(this.props.targetTemperature>this.props.ambientTemperature?B===this.ticks.min:B===this.ticks.max)?b?this.ticks.pointsTarget:this.ticks.pointsAmbient:this.ticks.points,B*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:this.darkTheme?Y?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.3)":Y?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.2)"}})});const d=[this.radius,this.ticks.outerRadius-(this.ticks.outerRadius-this.ticks.innerRadius)/2],T=this.restrictToRange(this.props.ambientTemperature,this.props.minValue,this.props.maxValue);let y=this.ticks.degrees*(T-this.props.minValue)/this.ticks.rangeValue-this.ticks.offsetDegrees;T>this.props.targetTemperature?y+=9:y-=9,this.ambientPosition=this.rotatePoint(d,y,[this.radius,this.radius]),this.ambientTemperatureStr=Number(this.props.ambientTemperature).toFixed(1),this.targetTemperatureStr=String(Math.round(2*this.props.targetTemperature)/2).split("."),this.svg.txtTargetTemp.textContent=this.targetTemperatureStr[0],this.svg.txtTargetTempDot.textContent=this.targetTemperatureStr[1],this.svg.txtAmbientTemp.textContent=this.ambientTemperatureStr,this.attr(this.svg.txtAmbientTemp,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp});let N=this.getTextSize(this.svg.txtTargetTemp);this.attr(this.svg.txtTargetTempDot,{x:175+N.width/2+12,y:175-N.height/2+39}),this.disabled?(this.attr(this.svg.iconDown,{style:{display:"none"}}),this.attr(this.svg.iconUp,{style:{display:"none"}}),this.attr(this.svg.btnDown,{style:{display:"none"}}),this.attr(this.svg.btnUp,{style:{display:"none"}})):(this.attr(this.svg.iconDown,{style:{display:"true"}}),this.attr(this.svg.iconUp,{style:{display:"true"}}),this.attr(this.svg.btnDown,{style:{display:"true"}}),this.attr(this.svg.btnUp,{style:{display:"true"}})),this.attr(this.svg.leaf,this.props.leaf?{style:{opacity:1}}:{style:{opacity:0}})}eventPosition(d){let T=this.svg.touchArea.getBoundingClientRect(),y=T.left+T.width/2,N=T.top+T.height/2;return d.targetTouches&&d.targetTouches.length?[y-d.targetTouches[0].clientX,N-d.targetTouches[0].clientY]:[y-d.x,N-d.y]}calcAngleDegrees(d,T){let y=180*Math.atan2(T,d)/Math.PI+(360-this.ticks.degrees);y<0&&(y+=360),y<=this.ticks.degrees&&(this.props.targetTemperature=y/this.ticks.degrees*(this.props.maxValue-this.props.minValue)+this.props.minValue,this.props.targetTemperature=Math.round(2*this.props.targetTemperature)/2,this.render())}dragEnd(d){if(this.disabled)return;let T=this.eventPosition(d);this.calcAngleDegrees(T[0],T[1]),this.onChange.emit(this.props.targetTemperature)}dragMove(d){if(this.disabled)return;d.preventDefault();let T=this.eventPosition(d);this.calcAngleDegrees(T[0],T[1])}getTextSize(d){const T=d.cloneNode(!0),y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.appendChild(T),document.body.appendChild(y);const{x:N,y:C,width:B,height:b}=T.getBBox();return document.body.removeChild(y),{x:N,y:C,width:B,height:b}}}return(c=p).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(a.B),t.Y36(t.Qsj),t.Y36(x.V1))},c.\u0275cmp=t.Xpm({type:c,selectors:[["element-thermostat-view"]],viewQuery:function(d,T){if(1&d&&t.Gf(S,7),2&d){let y;t.iGM(y=t.CRH())&&(T.thermostat=y.first)}},inputs:{tempActual:"tempActual",tempTarget:"tempTarget",mode:"mode",preset:"preset"},outputs:{onChange:"onChange"},features:[t.TTD],decls:3,vars:0,consts:[[2,"display","flex","justify-content","center"],["thermostat",""]],template:function(d,T){1&d&&(t.TgZ(0,"div",0),t._UZ(1,"div",null,1),t.qZA())}}),p})();function Q(c,p){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function V(c,p){if(1&c&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()(),t.TgZ(9,"ion-label",8)(10,"h1"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,Q,3,5,"h2",9),t.qZA()()()()),2&c){const h=p.ngIf;t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(3),t.Oqu(t.lcZ(12,6,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function R(c,p){if(1&c&&(t.ynx(0),t.YNc(1,V,14,8,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function K(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.AsE("",h.ui.room," \u2022 ",h.ui.category,"")}}function P(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.room)}}function D(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.category)}}function E(c,p){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function w(c,p){if(1&c&&(t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",13),t.YNc(12,K,2,2,"p",0),t.YNc(13,P,2,1,"p",0),t.YNc(14,D,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,E,3,5,"h2",9),t.qZA()()()()),2&c){const h=p.ngIf,d=t.oxw(2);t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(4),t.Q6J("ngIf","home"===d.key),t.xp6(1),t.Q6J("ngIf","room"===d.key),t.xp6(1),t.Q6J("ngIf","category"===d.key),t.xp6(2),t.Oqu(t.lcZ(17,9,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function A(c,p){if(1&c&&(t.ynx(0),t.YNc(1,w,19,11,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function v(c,p){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.Oqu(t.lcZ(2,2,h.name))}}function g(c,p){if(1&c&&(t.ynx(0),t.YNc(1,v,3,4,"ion-select-option",22),t.BQk()),2&c){const h=p.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function l(c,p){if(1&c&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&c){const h=t.oxw(2).$implicit,d=t.oxw().ngIf;t.xp6(1),t.AsE(" (",h.abs," ",d.ui.tempUnit,")")}}function o(c,p){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.YNc(3,l,2,2,"span",0),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.hij("",t.lcZ(2,3,h.name)," "),t.xp6(2),t.Q6J("ngIf",7!=h.id)}}function r(c,p){if(1&c&&(t.ynx(0),t.YNc(1,o,4,5,"ion-select-option",22),t.BQk()),2&c){const h=p.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function n(c,p){if(1&c){const h=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col")(3,"element-thermostat-view",16),t.NdJ("onChange",function(T){const N=t.CHM(h).ngIf,C=t.oxw(2);return t.KtG(C.setTargetTemperature(N,T))}),t.qZA()()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-card",17)(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-select",18,19),t.NdJ("ionChange",function(T){const N=t.CHM(h).ngIf,C=t.oxw(2);return t.KtG(C.setOperatingMode(N,T))}),t.ALo(11,"translate"),t.YNc(12,g,2,1,"ng-container",20),t.qZA()()()()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-card",17)(16,"ion-card-content",3)(17,"ion-item",4)(18,"ion-select",18,21),t.NdJ("ionChange",function(T){const N=t.CHM(h).ngIf,C=t.oxw(2);return t.KtG(C.setTemperaturePreset(N,T))}),t.ALo(20,"translate"),t.YNc(21,r,2,1,"ng-container",20),t.qZA()()()()()()()}if(2&c){const h=p.ngIf,d=t.oxw(2);t.xp6(3),t.s9C("tempActual",h.ui.tempActual),t.s9C("tempTarget",h.ui.tempTarget),t.s9C("mode",h.ui.mode),t.s9C("preset",h.ui.preset),t.xp6(6),t.s9C("label",d.labelMode),t.Q6J("cancelText",t.lcZ(11,14,"Cancel"))("interfaceOptions",d.selectOperatingMode)("ngModel",h.ui.modeList[h.ui.mode].name),t.xp6(3),t.Q6J("ngForOf",h.ui.modeList),t.xp6(6),t.s9C("label",d.labelTemperature),t.Q6J("cancelText",t.lcZ(20,16,"Cancel"))("interfaceOptions",d.selectTemperaturePreset)("ngModel",h.ui.status.text),t.xp6(3),t.Q6J("ngForOf",h.ui.presetList)}}function e(c,p){if(1&c&&(t.ynx(0),t.YNc(1,n,22,18,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}var s=_(9572).sprintf;let m=(()=>{var c;class p{constructor(d,T){this.translate=d,this.controlService=T,this.viewType=I.G,this.ircModesDefaults=[{id:0,name:"Automatic",show:!0},{id:1,name:"Automatic (currently heating)",show:!1},{id:2,name:"Automatic (currently cooling)",show:!1},{id:3,name:"Automatic heating",show:!0},{id:4,name:"Automatic cooling",show:!0},{id:5,name:"Manual heating",show:!0},{id:6,name:"Manual cooling",show:!0}],this.temperatureModesDefaults=[{id:0,name:"Economy",value:null,abs:null,corr:1,show:!0},{id:1,name:"Comfort heating",value:null,abs:null,corr:0,show:!0},{id:2,name:"Comfort cooling",value:null,abs:null,corr:0,show:!0},{id:3,name:"Empty house",value:null,abs:null,corr:0,show:!0},{id:4,name:"Heat protection",value:null,abs:null,corr:0,show:!0},{id:5,name:"Increased heat",value:null,abs:null,corr:1,show:!0},{id:6,name:"Party",value:null,abs:null,corr:1,show:!0},{id:7,name:"Manual",value:null,abs:null,corr:0,show:!0}],this.selectTemperaturePreset={header:this.translate.instant("Temperature preset"),cssClass:"actionsheet"},this.selectOperatingMode={header:this.translate.instant("Operating mode"),cssClass:"actionsheet"},this.labelTemperature=this.translate.instant("Temperature"),this.labelMode=this.translate.instant("Mode")}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([d,T,y])=>this.updateVM(d,T,y))):console.error("Control component not available for rendering.")}updateVM(d,T,y){let N=y.find(F=>F.uuid===d.room&&F.serialNr===d.serialNr),C=T.find(F=>F.uuid===d.category&&F.serialNr===d.serialNr),B=[...this.temperatureModesDefaults],b=[...this.ircModesDefaults],Z=["",""],Y=d.states.mode,G=1==Y||3==Y||5==Y?1:2;d.states.tempActual&&(Z=s("%.1f",d.states.tempActual).split("."),Z[1]="."+Z[1]);let $=d.details.temperatures;B.forEach((F,X)=>{if(($[X]&&$[X].isAbsolute||7==X)&&(F.corr=0,F.value=Number(X<7?d.states.temperatures[X]:d.states.tempTarget),F.abs=F.value),$[X]&&!$[X].isAbsolute){let it=-1;5==X&&(it=1),0==X&&2==G&&(it=1),F.corr=it,F.value=Number(d.states.temperatures[X]),F.abs=Number(d.states.temperatures[G])+it*Number(d.states.temperatures[X])}}),b[0].name=!d.states.mode||1!=d.states.mode&&2!=d.states.mode?"Automatic":b[d.states.mode].name;let H=Object.keys(d.subControls),nt=null;d.subControls[H[0]].states.value&&(nt=d.subControls[H[0]].states.value);let z=B.findIndex(F=>F.id===3-G);B[z].show=!1;let ct=B,et=ct.find(F=>F.id==nt);return{control:d,ui:{name:this.translate.instant("Thermostat"),room:N&&N.name?N.name:"unknown",category:C&&C.name?C.name:"unknown",tempTarget:d.states.tempTarget,tempActual:d.states.tempActual,tempUnit:"\xb0C",modeList:b,mode:d.states.mode?d.states.mode:0,presetList:ct,preset:et.id,icon:{tempBase:Z[0],tempDec:Z[1]},status:{text:nt?et.name:"unknown",color:U.c.getColor(et.id>0?"primary":"secondary")}}}}setOperatingMode(d,T){let y=d.ui.modeList.find(N=>N.name==T.detail.value);y&&y.id!=d.ui.mode&&this.controlService.updateControl(d.control,"mode/"+y.id)}setTemperaturePreset(d,T){let y=d.ui.presetList.find(N=>N.name==T.detail.value);if(y&&y.id!=d.ui.preset){let N="starttimer/"+String(y.id)+"/60";this.controlService.updateControl(d.control,N)}}setTargetTemperature(d,T){let y=Math.round(2*T)/2,N="settemp/7/"+String(y);this.controlService.updateControl(d.control,N)}}return(c=p).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(a.B))},c.\u0275cmp=t.Xpm({type:c,selectors:[["control-irc-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"],[1,"label"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"tempActual","tempTarget","mode","preset","onChange"],[1,"card"],["interface","action-sheet","hidden","true",1,"select-no-icon",3,"label","cancelText","interfaceOptions","ngModel","ionChange"],["modes",""],[4,"ngFor","ngForOf"],["presets",""],[3,"value",4,"ngIf"],[3,"value"]],template:function(d,T){1&d&&(t.YNc(0,R,3,3,"ng-container",0),t.YNc(1,A,3,3,"ng-container",0),t.YNc(2,e,3,3,"ng-container",0)),2&d&&(t.Q6J("ngIf",T.view===T.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",T.view===T.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",T.view===T.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.Ie,i.Q$,i.Nd,i.t9,i.n0,i.QI,i.YI,M.JJ,M.On,L.rH,k,O.Ov,u.X$]}),p})()},267:(j,W,_)=>{"use strict";_.d(W,{f:()=>g});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282);let L=(()=>{var l;class o{constructor(n,e){this.gestureCtrl=n,this.onStart=new t.vpe,this.onEnd=new t.vpe,this.nativeElement=e.nativeElement}ngOnInit(){this.pressGesture=this.gestureCtrl.create({gestureName:"long-press",el:this.nativeElement,threshold:0,onStart:n=>{this.delay=700,this.endDelay=700,this.onStartTimer(),this.onStart.emit(n.event)},onEnd:n=>{this.onEndTimer(n.event)}}),this.pressGesture.enable()}onStartTimer(){setTimeout(()=>{this.endDelay=0},this.delay)}onEndTimer(n){setTimeout(()=>{this.onEnd.emit(n)},this.endDelay)}}return(l=o).\u0275fac=function(n){return new(n||l)(t.Y36(i.TH),t.Y36(t.SBq))},l.\u0275dir=t.lG2({type:l,selectors:[["","long-press",""]],outputs:{onStart:"onStart",onEnd:"onEnd"}}),o})();var x=_(717);function S(l,o){if(1&l&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&l){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function k(l,o){if(1&l){const r=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,m,e))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,m,e))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&l){const r=o.ngIf;t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(3),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function Q(l,o){if(1&l&&(t.ynx(0),t.YNc(1,k,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&l){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function V(l,o){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const r=t.oxw().ngIf;t.xp6(1),t.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function R(l,o){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.room)}}function K(l,o){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.category)}}function P(l,o){if(1&l&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&l){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function D(l,o){if(1&l){const r=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,m,e))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,m,e))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,V,2,2,"p",0),t.YNc(13,R,2,1,"p",0),t.YNc(14,K,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,P,2,3,"h2",7),t.qZA()()()()}if(2&l){const r=o.ngIf,n=t.oxw(2);t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function E(l,o){if(1&l&&(t.ynx(0),t.YNc(1,D,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&l){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function w(l,o){if(1&l){const r=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("onStart",function(){const s=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.DOWN,s,null))})("onEnd",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN_OFF,m,e))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("onStart",function(){const s=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.UP,s,null))})("onEnd",function(e){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP_OFF,m,e))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-button",21),t.NdJ("click",function(){const s=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.FULL_CLOSE,s,null))}),t.TgZ(18,"ion-label",19)(19,"h1",20),t._uU(20,"Fully close"),t.qZA()()()(),t.TgZ(21,"ion-col")(22,"ion-button",21),t.NdJ("click",function(){const s=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.FULL_OPEN,s,null))}),t.TgZ(23,"ion-label",19)(24,"h1",20),t._uU(25,"Fully open"),t.qZA()()()()(),t.TgZ(26,"ion-row")(27,"ion-col")(28,"ion-button",21),t.NdJ("click",function(){const s=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.SHADE,s,null))}),t.TgZ(29,"ion-label",19)(30,"h1",20),t._uU(31,"Shade"),t.qZA()()()()()()}if(2&l){const r=o.ngIf;t.xp6(3),t.Q6J("text_vm",r)}}function A(l,o){if(1&l&&(t.ynx(0),t.YNc(1,w,32,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&l){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}var v=_(9572).sprintf;let g=(()=>{var l;class o{constructor(n,e){this.translate=n,this.controlService=e,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([n,e,s])=>this.updateVM(n,e,s))):console.error("Component 'control-jalousie' not available for rendering.")}updateVM(n,e,s){let m=s.find(T=>T.uuid===n.room&&T.serialNr===n.serialNr),c=e.find(T=>T.uuid===n.category&&T.serialNr===n.serialNr),p=100*n.states.position,h=v("%1.0f%% ",p)+this.translate.instant("Closed").toLowerCase();return p<1&&(h=this.translate.instant("Opened")),p>99&&(h=this.translate.instant("Closed")),{control:{...n,icon:{href:n.icon.href,color:p>0?"primary":"dark"}},ui:{name:n.name,room:m&&m.name?m.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:h,color:U.c.getColor(p>0?"primary":"secondary")}}}}clickButton(n,e,s){switch(s&&(s.preventDefault(),s.stopPropagation()),n){case I.W.UP:this.controlService.updateControl(e.control,"up");break;case I.W.UP_OFF:this.controlService.updateControl(e.control,"UpOff");break;case I.W.DOWN:this.controlService.updateControl(e.control,"down");break;case I.W.DOWN_OFF:this.controlService.updateControl(e.control,"DownOff");break;case I.W.FULL_OPEN:this.controlService.updateControl(e.control,"FullUp");break;case I.W.FULL_CLOSE:this.controlService.updateControl(e.control,"FullDown");break;case I.W.SHADE:this.controlService.updateControl(e.control,"shade")}}}return(l=o).\u0275fac=function(n){return new(n||l)(t.Y36(u.sK),t.Y36(a.B))},l.\u0275cmp=t.Xpm({type:l,selectors:[["control-jalousie-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block","long-press","",1,"push-button",3,"onStart","onEnd"],[1,"label"],["translate",""],["expand","block",1,"push-button",3,"click"]],template:function(n,e){1&n&&(t.YNc(0,Q,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,A,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",e.view===e.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",e.view===e.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,u.Pi,L,x.h,O.Ov]}),o})()},8513:(j,W,_)=>{"use strict";_.d(W,{M:()=>N});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(6223),L=_(4282),x=_(2571),S=_(7383);function k(C,B){if(1&C){const b=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-toggle",4),t.NdJ("click",function(Y){const $=t.CHM(b).ngIf,H=t.oxw();return t.KtG(H.clickToggle($,Y))}),t._uU(4),t.qZA()()()()}if(2&C){const b=B.ngIf;t.xp6(3),t.Q6J("ngModel",b.ui.toggle),t.xp6(1),t.hij(" ",b.ui.name," ")}}let Q=(()=>{var C;class B{constructor(Z,Y){this.translate=Z,this.controlService=Y}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,J.U)(([Z,Y])=>this.updateVM(Z,Y))):console.error("SubControl component 'card-switch' not available for rendering.")}updateVM(Z,Y){let G="1"===Y.states.active;return{control:Z,subControl:Y,ui:{name:Y.name,status:{text:this.translate.instant(G?"On":"Off"),color:U.c.getColor(G?"primary":"secondary")},toggle:G}}}clickToggle(Z,Y){Y.preventDefault(),Y.stopPropagation(),this.controlService.updateControl(Z.subControl,Z.ui.toggle?"Off":"On")}}return(C=B).\u0275fac=function(Z){return new(Z||C)(t.Y36(u.sK),t.Y36(a.B))},C.\u0275cmp=t.Xpm({type:C,selectors:[["card-switch-view"]],inputs:{control:"control",subControl:"subControl"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],["color","primary","mode","ios",1,"toggle",3,"ngModel","click"]],template:function(Z,Y){1&Z&&(t.YNc(0,k,5,2,"ion-card",0),t.ALo(1,"async")),2&Z&&t.Q6J("ngIf",t.lcZ(1,1,Y.vm$))},dependencies:[O.O5,i.PM,i.FN,i.Ie,i.ho,i.w,M.JJ,M.On,O.Ov]}),B})();var V=_(717);function R(C,B){if(1&C&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&C){const b=t.oxw().ngIf;t.Udp("color",b.ui.status.color),t.xp6(1),t.hij(" ",b.ui.status.text,"")}}function K(C,B){if(1&C){const b=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,R,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(Y){const $=t.CHM(b).ngIf,H=t.oxw(2);return t.KtG(H.clickLightButton(H.buttonType.UP,$,Y))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&C){const b=B.ngIf;t.hYB("routerLink","",b.control.serialNr,"/",b.control.uuid,""),t.xp6(3),t.s9C("color",b.control.icon.color),t.s9C("src",b.control.icon.href),t.xp6(3),t.Oqu(b.ui.name),t.xp6(1),t.Q6J("ngIf",""!==b.ui.status.text)}}function P(C,B){if(1&C&&(t.ynx(0),t.YNc(1,K,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&C){const b=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,b.vm$))}}function D(C,B){if(1&C&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&C){const b=t.oxw().ngIf;t.xp6(1),t.AsE("",b.ui.room," \u2022 ",b.ui.category,"")}}function E(C,B){if(1&C&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&C){const b=t.oxw().ngIf;t.xp6(1),t.Oqu(b.ui.room)}}function w(C,B){if(1&C&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&C){const b=t.oxw().ngIf;t.xp6(1),t.Oqu(b.ui.category)}}function A(C,B){if(1&C&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&C){const b=t.oxw().ngIf;t.Udp("color",b.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,b.ui.status.text),"")}}function v(C,B){if(1&C){const b=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(Y){const $=t.CHM(b).ngIf,H=t.oxw(2);return t.KtG(H.clickLightButton(H.buttonType.UP,$,Y))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,D,2,2,"p",0),t.YNc(11,E,2,1,"p",0),t.YNc(12,w,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,A,3,5,"h2",7),t.qZA()()()()}if(2&C){const b=B.ngIf,Z=t.oxw(2);t.hYB("routerLink","",b.control.serialNr,"/",b.control.uuid,""),t.xp6(3),t.s9C("color",b.control.icon.color),t.s9C("src",b.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===Z.key),t.xp6(1),t.Q6J("ngIf","room"===Z.key),t.xp6(1),t.Q6J("ngIf","category"===Z.key),t.xp6(2),t.Oqu(b.ui.name),t.xp6(1),t.Q6J("ngIf",""!==b.ui.status.text)}}function g(C,B){if(1&C&&(t.ynx(0),t.YNc(1,v,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&C){const b=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,b.vm$))}}function l(C,B){if(1&C&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",20),t.qZA()()()),2&C){const b=B.ngIf;t.xp6(3),t.Q6J("text_vm",b),t.xp6(3),t.Q6J("radio_vm",b)}}function o(C,B){if(1&C&&(t.ynx(0),t.YNc(1,l,7,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&C){const b=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,b.vm$))}}function r(C,B){if(1&C&&t._UZ(0,"card-dimmer-view",25),2&C){const b=t.oxw().$implicit,Z=t.oxw(4);t.Q6J("control",Z.control)("subControl",b)("view",Z.viewType.DETAILED)}}function n(C,B){if(1&C&&t._UZ(0,"card-dimmer-view",25),2&C){const b=t.oxw().$implicit,Z=t.oxw(4);t.Q6J("control",Z.control)("subControl",b)("view",Z.viewType.DETAILED)}}function e(C,B){if(1&C&&t._UZ(0,"card-switch-view",26),2&C){const b=t.oxw().$implicit,Z=t.oxw(4);t.Q6J("control",Z.control)("subControl",b)}}function s(C,B){if(1&C&&(t.TgZ(0,"ion-col",22),t.YNc(1,r,1,3,"card-dimmer-view",23),t.YNc(2,n,1,3,"card-dimmer-view",23),t.YNc(3,e,1,2,"card-switch-view",24),t.qZA()),2&C){const b=B.$implicit;t.xp6(1),t.Q6J("ngIf","Dimmer"===b.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===b.type),t.xp6(1),t.Q6J("ngIf","Switch"===b.type)}}function m(C,B){if(1&C&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,s,4,3,"ion-col",21),t.qZA()()),2&C){const b=B.ngIf;t.xp6(3),t.Q6J("text_vm",b),t.xp6(2),t.Q6J("ngForOf",b.subControls)}}function c(C,B){if(1&C&&(t.ynx(0),t.YNc(1,m,6,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&C){const b=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,b.vm$))}}function p(C,B){if(1&C){const b=t.EpF();t.ynx(0),t.TgZ(1,"ion-segment",14),t.NdJ("ngModelChange",function(Y){t.CHM(b);const G=t.oxw();return t.KtG(G.segment=Y)})("ionChange",function(){t.CHM(b);const Y=t.oxw();return t.KtG(Y.updateSegment())}),t.TgZ(2,"ion-segment-button",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-segment-button",16),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,o,3,3,"ng-container",0),t.YNc(9,c,3,3,"ng-container",0),t.BQk()}if(2&C){const b=t.oxw();t.xp6(1),t.Q6J("ngModel",b.segment),t.xp6(2),t.hij(" ",t.lcZ(4,5,"Moods")," "),t.xp6(3),t.hij(" ",t.lcZ(7,7,"Lightzones")," "),t.xp6(2),t.Q6J("ngIf","moods"===b.segment),t.xp6(1),t.Q6J("ngIf","lightzones"===b.segment)}}function h(C,B){if(1&C&&(t.TgZ(0,"ion-select-option",33),t._uU(1),t.qZA()),2&C){const b=B.$implicit;t.Q6J("value",b.name),t.xp6(1),t.Oqu(b.name)}}function d(C,B){1&C&&(t.TgZ(0,"ion-select-option",34),t._uU(1,"Manual"),t.qZA())}function T(C,B){if(1&C){const b=t.EpF();t.TgZ(0,"ion-card",28)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",29),t.TgZ(4,"ion-select",30),t.NdJ("ionChange",function(Y){const $=t.CHM(b).ngIf,H=t.oxw(2);return t.KtG(H.selectChange($,Y))}),t.ALo(5,"translate"),t.YNc(6,h,2,2,"ion-select-option",31),t.YNc(7,d,2,0,"ion-select-option",32),t.ALo(8,"translate"),t.qZA()()()()}if(2&C){const b=B.ngIf,Z=t.oxw(2);t.xp6(3),t.s9C("color",b.control.icon.color),t.s9C("src",b.control.icon.href),t.xp6(1),t.Udp("color",b.ui.status.color),t.s9C("label",b.ui.room),t.Q6J("cancelText",t.lcZ(5,10,"Cancel"))("interfaceOptions",Z.customActionSheetOptions)("ngModel",b.ui.status.text),t.xp6(2),t.Q6J("ngForOf",b.ui.radioList),t.xp6(1),t.Q6J("ngIf",b.ui.status.text===t.lcZ(8,12,"Manual"))}}function y(C,B){if(1&C&&(t.ynx(0),t.YNc(1,T,9,14,"ion-card",27),t.ALo(2,"async"),t.BQk()),2&C){const b=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,b.vm$))}}let N=(()=>{var C;class B{constructor(Z,Y){this.translate=Z,this.controlService=Y,this.buttonType=I.W,this.viewType=I.G,this.segment="moods",this.moodList=[],this.text="",this.customActionSheetOptions={header:"",cssClass:"actionsheet"}}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([Z,Y,G])=>this.updateVM(Z,Y,G))):console.error("Component 'control-light-v2' not available for rendering.")}updateVM(Z,Y,G){let nt,$=G.find(et=>et.uuid===Z.room&&et.serialNr===Z.serialNr),H=Y.find(et=>et.uuid===Z.category&&et.serialNr===Z.serialNr);if(Array.isArray(Z.states.activeMoods)&&(nt=Z.states.activeMoods[0]),Z.states.moodList&&this.moodList!==Z.states.moodList&&(this.moodList=Z.states.moodList),nt&&Z.states.moodList&&Array.isArray(this.moodList)){let et=this.moodList.findIndex(q=>q.id==nt);this.text=this.moodList[et].name}Z.states.activeMoods&&0==Z.states.activeMoods.length&&(this.text=this.translate.instant("Manual"));let z=[];return Z.subControls&&(z=Object.values(Z.subControls).filter(q=>q.isVisible)),this.customActionSheetOptions.header=H.name+" "+($&&$.name)?$.name:"unknown",{control:{...Z,icon:{href:Z.icon.href,color:778!==nt&&this.text.length?"primary":this.view==this.viewType.FAVORITE?"dark":"secondary"}},ui:{name:Z.name===this.translate.instant("Lightcontroller")?$.name:Z.name,room:$&&$.name?$.name:"unknown",category:H&&H.name?H.name:"unknown",radioList:this.moodList,selectedId:nt,status:{text:this.text,color:U.c.getColor(778!==nt&&this.text.length?"primary":"secondary")}},subControls:z}}updateSegment(){}clickLightButton(Z,Y,G){G.preventDefault(),G.stopPropagation();let $,H=this.control.states.moodList,nt=Y.ui.radioList.length-1;Y.ui.selectedId&&Y.ui.radioList?($=Y.ui.radioList.findIndex(z=>z.id==Y.ui.selectedId),$++,$>nt&&($=0)):$=0,this.controlService.updateControl(Y.control,"changeTo/"+String(H[$].id))}selectChange(Z,Y){let G=this.control.states.moodList,$=Z.ui.radioList.findIndex(H=>H.name==Y.detail.value);G[$]&&G[$].id!=Z.ui.selectedId&&this.controlService.updateControl(Z.control,"changeTo/"+String(G[$].id))}}return(C=B).\u0275fac=function(Z){return new(Z||C)(t.Y36(u.sK),t.Y36(a.B))},C.\u0275cmp=t.Xpm({type:C,selectors:[["control-light-v2-view"]],inputs:{control:"control",view:"view",key:"key"},decls:4,vars:4,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],[3,"ngModel","ngModelChange","ionChange"],["value","moods",1,"segment-button"],["value","lightzones",1,"segment-button"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","subControl","view",4,"ngIf"],[3,"control","subControl",4,"ngIf"],[3,"control","subControl","view"],[3,"control","subControl"],["class","card",4,"ngIf"],[1,"card"],[1,"icon_50",3,"color","src"],["interface","action-sheet",1,"select-no-icon","select-ml",3,"label","cancelText","interfaceOptions","ngModel","ionChange"],[3,"value",4,"ngFor","ngForOf"],["translate","",4,"ngIf"],[3,"value"],["translate",""]],template:function(Z,Y){1&Z&&(t.YNc(0,P,3,3,"ng-container",0),t.YNc(1,g,3,3,"ng-container",0),t.YNc(2,p,10,9,"ng-container",0),t.YNc(3,y,3,3,"ng-container",0)),2&Z&&(t.Q6J("ngIf",Y.view===Y.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",Y.view===Y.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",Y.view===Y.viewType.DETAILED),t.xp6(1),t.Q6J("ngIf",Y.view===Y.viewType.LIST_ITEM_POPUP))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.cJ,i.GO,i.t9,i.n0,i.QI,i.YI,M.JJ,M.On,L.rH,u.Pi,x.W,S.x,Q,V.h,O.Ov,u.X$]}),B})()},2356:(j,W,_)=>{"use strict";_.d(W,{k:()=>A});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(717);function x(v,g){if(1&v&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.Udp("color",l.ui.status.color),t.xp6(1),t.hij(" ",l.ui.status.text,"")}}function S(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,x,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickPushButton(s.buttonType.PUSH,e,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&v){const l=g.ngIf;t.hYB("routerLink","",l.control.serialNr,"/",l.control.uuid,""),t.xp6(3),t.s9C("color",l.control.icon.color),t.s9C("src",l.control.icon.href),t.xp6(3),t.Oqu(l.control.name),t.xp6(1),t.Q6J("ngIf",""!==l.ui.status.text)}}function k(v,g){if(1&v&&(t.ynx(0),t.YNc(1,S,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}function Q(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.AsE("",l.ui.room," \u2022 ",l.ui.category,"")}}function V(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.Oqu(l.ui.room)}}function R(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.Oqu(l.ui.category)}}function K(v,g){if(1&v&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.Udp("color",l.ui.status.color),t.xp6(1),t.hij(" ",l.ui.status.text,"")}}function P(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickPushButton(s.buttonType.PUSH,e,r))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,Q,2,2,"p",0),t.YNc(11,V,2,1,"p",0),t.YNc(12,R,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,K,2,3,"h2",7),t.qZA()()()()}if(2&v){const l=g.ngIf,o=t.oxw(2);t.hYB("routerLink","",l.control.serialNr,"/",l.control.uuid,""),t.xp6(3),t.s9C("color",l.control.icon.color),t.s9C("src",l.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===o.key),t.xp6(1),t.Q6J("ngIf","room"===o.key),t.xp6(1),t.Q6J("ngIf","category"===o.key),t.xp6(2),t.Oqu(l.control.name),t.xp6(1),t.Q6J("ngIf",""!==l.ui.status.text)}}function D(v,g){if(1&v&&(t.ynx(0),t.YNc(1,P,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}function E(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",16),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickPushButton(s.buttonType.PUSH,e,r))}),t.TgZ(7,"ion-label",18)(8,"h1",19),t._uU(9,"Push"),t.qZA()()()()()()}if(2&v){const l=g.ngIf;t.xp6(3),t.Q6J("text_vm",l)}}function w(v,g){if(1&v&&(t.ynx(0),t.YNc(1,E,10,1,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}let A=(()=>{var v;class g{constructor(o,r){this.translate=o,this.controlService=r,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([o,r,n])=>this.updateVM(o,r,n))):console.error("Component 'control-pushbutton' not available for rendering.")}updateVM(o,r,n){let e=n.find(c=>c.uuid===o.room&&c.serialNr===o.serialNr),s=r.find(c=>c.uuid===o.category&&c.serialNr===o.serialNr);return{control:o,ui:{name:o.name,room:e&&e.name?e.name:"unknown",category:s&&s.name?s.name:"unknown",status:{text:"",color:U.c.getColor("secondary")}}}}clickPushButton(o,r,n){n.preventDefault(),n.stopPropagation(),this.controlService.updateControl(r.control,"pulse")}}return(v=g).\u0275fac=function(o){return new(o||v)(t.Y36(u.sK),t.Y36(a.B))},v.\u0275cmp=t.Xpm({type:v,selectors:[["control-pushbutton-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["name","radio-button-off-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(o,r){1&o&&(t.YNc(0,k,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,w,3,3,"ng-container",0)),2&o&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,u.Pi,L.h,O.Ov]}),g})()},5222:(j,W,_)=>{"use strict";_.d(W,{d:()=>v});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(7383),x=_(717);function S(g,l){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function k(g,l){if(1&g){const o=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.MINUS,s,n))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.PLUS,s,n))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&g){const o=l.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function Q(g,l){if(1&g&&(t.ynx(0),t.YNc(1,k,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function V(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function R(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function K(g,l){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function P(g,l){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function D(g,l){if(1&g){const o=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.MINUS,s,n))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(n){const s=t.CHM(o).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.PLUS,s,n))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,V,2,2,"p",0),t.YNc(13,R,2,1,"p",0),t.YNc(14,K,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,P,2,3,"h2",7),t.qZA()()()()}if(2&g){const o=l.ngIf,r=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function E(g,l){if(1&g&&(t.ynx(0),t.YNc(1,D,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function w(g,l){if(1&g&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",18),t.qZA()()()),2&g){const o=l.ngIf;t.xp6(3),t.Q6J("text_vm",o),t.xp6(3),t.Q6J("radio_vm",o)}}function A(g,l){if(1&g&&(t.ynx(0),t.YNc(1,w,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&g){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}let v=(()=>{var g;class l{constructor(r,n){this.translate=r,this.controlService=n,this.buttonType=I.W,this.viewType=I.G,this.segment="moods"}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([r,n,e])=>this.updateVM(r,n,e))):console.error("Component 'control-radio' not available for rendering.")}updateVM(r,n,e){let s=e.find(d=>d.uuid===r.room&&d.serialNr===r.serialNr),m=n.find(d=>d.uuid===r.category&&d.serialNr===r.serialNr),c=Number(r.states.activeOutput);c||(c=0),this.entries!==r.details.outputs&&(this.entries=r.details.outputs,this.radioList=[{id:0,name:r.details.allOff}].concat(Object.entries(r.details.outputs).map(d=>({id:Number(d[0]),name:String(d[1])}))));let p=this.radioList.findIndex(d=>d.id===c);return{control:r,ui:{name:r.name,room:s&&s.name?s.name:"unknown",category:m&&m.name?m.name:"unknown",radioList:this.radioList,selectedId:c,status:{text:String(this.radioList[p].name),color:U.c.getColor(c>0?"primary":"secondary")}}}}clickRadioButton(r,n,e){e.preventDefault(),e.stopPropagation();let m=n.ui.radioList.length-1,c=n.ui.radioList.findIndex(h=>h.id===n.ui.selectedId);r===I.W.PLUS?c++:c--,c>m?c=0:c<0&&(c=m),n.ui.selectedId=n.ui.radioList[c].id;let p=String(n.ui.radioList[c].id);"0"===p&&(p="reset"),this.controlService.updateControl(n.control,p)}}return(g=l).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(a.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-radio-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"]],template:function(r,n){1&r&&(t.YNc(0,Q,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,A,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,L.x,x.h,O.Ov]}),l})()},7432:(j,W,_)=>{"use strict";_.d(W,{B:()=>l});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(6223);let x=(()=>{var o;class r{constructor(e,s){this.translate=e,this.controlService=s,this.buttonType=I.W}sliderChange(e,s){e.control.states.value!=s.detail.value&&this.controlService.updateControl(e.control,String(s.detail.value))}clickSliderButton(e,s,m){m.preventDefault(),m.stopPropagation();let d,c=Number(s.control.details.min),p=Number(s.control.details.max),h=Number(s.control.details.step);d=e===I.W.PLUS?s.ui.slider.position+h:s.ui.slider.position-h,d<c&&(d=c),d>p&&(d=p),this.controlService.updateControl(s.control,String(d))}}return(o=r).\u0275fac=function(e){return new(e||o)(t.Y36(u.sK),t.Y36(a.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["card-slider-view"]],inputs:{slider_vm:"slider_vm"},decls:8,vars:4,consts:[[1,"card"],[1,"card-content"],[1,"item"],[1,"fab-button-slider","icon-slider-left",3,"click"],["name","remove-outline",2,"color","var(--ion-text-color, #2c2c2c)"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],["name","add-outline",2,"color","var(--ion-text-color, #2c2c2c)"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-card",0)(1,"ion-card-content",1)(2,"ion-item",2)(3,"ion-fab-button",3),t.NdJ("click",function(c){return s.clickSliderButton(s.buttonType.MINUS,s.slider_vm,c)}),t._UZ(4,"ion-icon",4),t.qZA(),t.TgZ(5,"ion-range",5),t.NdJ("ionChange",function(c){return s.sliderChange(s.slider_vm,c)}),t.qZA(),t.TgZ(6,"ion-fab-button",6),t.NdJ("click",function(c){return s.clickSliderButton(s.buttonType.PLUS,s.slider_vm,c)}),t._UZ(7,"ion-icon",7),t.qZA()()()()),2&e&&(t.xp6(5),t.s9C("min",s.slider_vm.control.details.min),t.s9C("max",s.slider_vm.control.details.max),t.s9C("step",s.slider_vm.control.details.step),t.Q6J("ngModel",s.slider_vm.ui.slider.position))},dependencies:[i.PM,i.FN,i.W4,i.gu,i.Ie,i.I_,i.QI,L.JJ,L.On]}),r})();var S=_(717);function k(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function Q(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,k,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.MINUS,c,s))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.PLUS,c,s))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&o){const n=r.ngIf;t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(3),t.Oqu(n.control.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text)}}function V(o,r){if(1&o&&(t.ynx(0),t.YNc(1,Q,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function R(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function K(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.room)}}function P(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.category)}}function D(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function E(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.MINUS,c,s))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.PLUS,c,s))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,R,2,2,"p",0),t.YNc(13,K,2,1,"p",0),t.YNc(14,P,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,D,2,3,"h2",7),t.qZA()()()()}if(2&o){const n=r.ngIf,e=t.oxw(2);t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(n.control.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text)}}function w(o,r){if(1&o&&(t.ynx(0),t.YNc(1,E,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function A(o,r){if(1&o&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-slider-view",18),t.qZA()()()),2&o){const n=r.ngIf;t.xp6(3),t.Q6J("text_vm",n),t.xp6(3),t.Q6J("slider_vm",n)}}function v(o,r){if(1&o&&(t.ynx(0),t.YNc(1,A,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}var g=_(9572).sprintf;let l=(()=>{var o;class r{constructor(e,s){this.translate=e,this.controlService=s,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([e,s,m])=>this.updateVM(e,s,m))):console.error("Component 'control-slider' not available for rendering.")}updateVM(e,s,m){let c=m.find(y=>y.uuid===e.room&&y.serialNr===e.serialNr),p=s.find(y=>y.uuid===e.category&&y.serialNr===e.serialNr),h="",d=0;return e.states.value&&e.details.format&&(h=g(e.details.format,e.states.value)),e.states.value&&(d=Number(e.states.value)),{control:e,ui:{name:e.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",slider:{position:d},status:{text:h,color:U.c.getColor("secondary")}}}}clickSliderButton(e,s,m){m.preventDefault(),m.stopPropagation();let d,c=Number(s.control.details.min),p=Number(s.control.details.max),h=Number(s.control.details.step);d=e===I.W.PLUS?s.ui.slider.position+h:s.ui.slider.position-h,d<c&&(d=c),d>p&&(d=p),this.controlService.updateControl(s.control,String(d))}}return(o=r).\u0275fac=function(e){return new(e||o)(t.Y36(u.sK),t.Y36(a.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["control-slider-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"slider_vm"]],template:function(e,s){1&e&&(t.YNc(0,V,3,3,"ng-container",0),t.YNc(1,w,3,3,"ng-container",0),t.YNc(2,v,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",s.view===s.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,x,S.h,O.Ov]}),r})()},7953:(j,W,_)=>{"use strict";_.d(W,{e:()=>o});var f=_(9843),J=_(2572),I=_(7398),U=_(6308),t=_(7658),u=_(5879),a=_(9515),O=_(5e3),i=_(6814),M=_(6223),L=_(4282),x=_(717);function S(r,n){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const e=u.oxw().ngIf;u.Udp("color",e.ui.status.color),u.xp6(1),u.hij(" ",e.ui.status.text,"")}}function k(r,n){if(1&r&&(u.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),u._UZ(3,"ion-icon",5),u.TgZ(4,"ion-label",6)(5,"h1"),u._uU(6),u.qZA(),u.YNc(7,S,2,3,"h2",7),u.qZA()()()()),2&r){const e=n.ngIf;u.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),u.xp6(3),u.s9C("color",e.control.icon.color),u.s9C("src",e.control.icon.href),u.xp6(3),u.Oqu(e.control.name),u.xp6(1),u.Q6J("ngIf",""!==e.ui.status.text)}}function Q(r,n){if(1&r&&(u.ynx(0),u.YNc(1,k,8,6,"ion-card",1),u.ALo(2,"async"),u.BQk()),2&r){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,e.vm$))}}function V(r,n){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const e=u.oxw().ngIf;u.xp6(1),u.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function R(r,n){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const e=u.oxw().ngIf;u.xp6(1),u.Oqu(e.ui.room)}}function K(r,n){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const e=u.oxw().ngIf;u.xp6(1),u.Oqu(e.ui.category)}}function P(r,n){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const e=u.oxw().ngIf;u.Udp("color",e.ui.status.color),u.xp6(1),u.hij(" ",e.ui.status.text,"")}}function D(r,n){if(1&r&&(u.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),u._UZ(3,"ion-icon",5)(4,"ion-label"),u.qZA()(),u.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),u.YNc(8,V,2,2,"p",0),u.YNc(9,R,2,1,"p",0),u.YNc(10,K,2,1,"p",0),u.TgZ(11,"h1"),u._uU(12),u.qZA(),u.YNc(13,P,2,3,"h2",7),u.qZA()()()()),2&r){const e=n.ngIf,s=u.oxw(2);u.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),u.xp6(3),u.s9C("color",e.control.icon.color),u.s9C("src",e.control.icon.href),u.xp6(5),u.Q6J("ngIf","home"===s.key),u.xp6(1),u.Q6J("ngIf","room"===s.key),u.xp6(1),u.Q6J("ngIf","category"===s.key),u.xp6(2),u.Oqu(e.control.name),u.xp6(1),u.Q6J("ngIf",""!==e.ui.status.text)}}function E(r,n){if(1&r&&(u.ynx(0),u.YNc(1,D,14,9,"ion-card",8),u.ALo(2,"async"),u.BQk()),2&r){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,e.vm$))}}function w(r,n){if(1&r){const e=u.EpF();u.TgZ(0,"ion-datetime",20,21),u.NdJ("ionChange",function(m){u.CHM(e);const c=u.oxw(2).ngIf,p=u.oxw(2);return u.KtG(p.timeChanged(m,c))}),u.TgZ(2,"ion-buttons",22)(3,"ion-button",23),u.NdJ("click",function(){u.CHM(e);const m=u.oxw(4);return u.KtG(m.cancel())}),u._uU(4,"Cancel"),u.qZA(),u.TgZ(5,"ion-button",24),u.NdJ("click",function(){u.CHM(e);const m=u.oxw(4);return u.KtG(m.confirm())}),u._uU(6,"OK"),u.qZA()()()}if(2&r){const e=u.oxw(4);u.s9C("locale",e.translate.currentLang),u.Q6J("ngModel",e.servicetime)}}function A(r,n){if(1&r&&(u.TgZ(0,"ion-button",18),u._uU(1),u.TgZ(2,"ion-popover",19),u.YNc(3,w,7,2,"ng-template"),u.qZA()()),2&r){const e=u.oxw().ngIf;u.xp6(1),u.hij(" ",e.ui.button.text," ")}}function v(r,n){if(1&r){const e=u.EpF();u.TgZ(0,"ion-button",25),u._uU(1),u.TgZ(2,"ion-alert",26),u.NdJ("didDismiss",function(m){u.CHM(e);const c=u.oxw().ngIf,p=u.oxw(2);return u.KtG(p.cancelService(m,c))}),u.qZA()()}if(2&r){const e=u.oxw().ngIf,s=u.oxw(2);u.xp6(1),u.hij(" ",e.ui.button.text," "),u.xp6(1),u.MGl("header","",e.ui.button.text,"?"),u.Q6J("buttons",s.cancelButtons)}}function g(r,n){if(1&r&&(u.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),u._UZ(3,"card-text-view",14),u.qZA()(),u.TgZ(4,"ion-row")(5,"ion-col"),u.YNc(6,A,4,1,"ion-button",15),u.YNc(7,v,3,3,"ion-button",16),u.qZA()(),u.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-button",17),u._uU(11," History "),u.qZA()()()()),2&r){const e=n.ngIf;u.xp6(3),u.Q6J("text_vm",e),u.xp6(3),u.Q6J("ngIf",!e.state),u.xp6(1),u.Q6J("ngIf",e.state)}}function l(r,n){if(1&r&&(u.ynx(0),u.YNc(1,g,12,3,"ion-grid",12),u.ALo(2,"async"),u.BQk()),2&r){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,e.vm$))}}let o=(()=>{var r;class n{constructor(s,m){this.translate=s,this.controlService=m,this.buttonType=U.W,this.viewType=U.G,this.cancelButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,J.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,I.U)(([s,m,c])=>this.updateVM(s,m,c))):console.error("Component 'control-smokealarm' not available for rendering.")}updateVM(s,m,c){let p=c.find(Z=>Z.uuid===s.room&&Z.serialNr===s.serialNr),h=m.find(Z=>Z.uuid===s.category&&Z.serialNr===s.serialNr),d="",T="",y="primary",N=Number(s.states.timeServiceMode)>0,C=N?"Stop alarm suppression":"Start alarm suppression",B=Number(s.states.level);switch(N&&(B=99),B){case 0:d="Everything OK";break;case 1:d="Pre-alarm active",y="danger";break;case 2:d="Main alarm active",y="danger";break;case 99:d="Alarm suppression enabled",T=" ("+s.states.timeServiceMode+"s)",y="warning";break;default:d="Unknown state",y="secondary"}return{control:{...s,icon:{href:"assets/icons/svg/flame-sharp.svg",color:y}},ui:{name:s.name,room:p&&p.name?p.name:"unknown",category:h&&h.name?h.name:"unknown",status:{text:this.translate.instant(d)+T,color:t.c.getColor(y)},button:{text:this.translate.instant(C)}},state:N}}timeChanged(s,m){this.servicetime=s.detail.value;let c=Math.round((new Date(this.servicetime).getTime()-Date.now())/1e3);if(console.log("serviceSec",c),c>1){let p="servicemode/"+String(c);this.controlService.updateControl(m.control,p)}}cancel(){this.datetime.cancel(!0)}cancelService(s,m){"ok"===s.detail.role&&this.controlService.updateControl(m.control,"servicemode/0")}confirm(){this.datetime.confirm(!0)}service(s,m){}showHistory(s,m){}}return(r=n).\u0275fac=function(s){return new(s||r)(u.Y36(a.sK),u.Y36(O.B))},r.\u0275cmp=u.Xpm({type:r,selectors:[["control-smokealarm-view"]],viewQuery:function(s,m){if(1&s&&u.Gf(f.x4,5),2&s){let c;u.iGM(c=u.CRH())&&(m.datetime=c.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","time-popover",4,"ngIf"],["class","push-button","expand","block","id","stop-service",4,"ngIf"],["expand","block","routerLink","history","translate","",1,"push-button"],["expand","block","id","time-popover",1,"push-button"],["trigger","time-popover","cssClass","width-100"],["presentation","time",3,"locale","ngModel","ionChange"],["datetime",""],["slot","buttons"],["color","primary","fill","clear","translate","",3,"click"],["color","primary","fill","clear",3,"click"],["expand","block","id","stop-service",1,"push-button"],["trigger","stop-service",3,"header","buttons","didDismiss"]],template:function(s,m){1&s&&(u.YNc(0,Q,3,3,"ng-container",0),u.YNc(1,E,3,3,"ng-container",0),u.YNc(2,l,3,3,"ng-container",0)),2&s&&(u.Q6J("ngIf",m.view===m.viewType.LIST_ITEM),u.xp6(1),u.Q6J("ngIf",m.view===m.viewType.FAVORITE),u.xp6(1),u.Q6J("ngIf",m.view===m.viewType.DETAILED))},dependencies:[i.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.d8,f.QI,f.YI,M.JJ,M.On,L.rH,a.Pi,x.h,i.Ov],styles:["ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}"]}),n})()},5427:(j,W,_)=>{"use strict";_.d(W,{z:()=>l});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(6223),L=_(4282),x=_(717);function S(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function k(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item"),t._UZ(3,"ion-icon",4),t.TgZ(4,"ion-label",5)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",6),t.qZA(),t.TgZ(8,"ion-toggle",7),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickToggle(c,s))}),t.qZA()()()()}if(2&o){const n=r.ngIf;t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(3),t.Oqu(n.control.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text),t.xp6(1),t.Q6J("ngModel",n.ui.toggle)}}function Q(o,r){if(1&o&&(t.ynx(0),t.YNc(1,k,9,7,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function V(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function R(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.room)}}function K(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.ui.category)}}function P(o,r){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw().ngIf;t.Udp("color",n.ui.status.color),t.xp6(1),t.hij(" ",n.ui.status.text,"")}}function D(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",11),t._UZ(3,"ion-icon",4)(4,"ion-label",5),t.TgZ(5,"ion-toggle",7),t.NdJ("click",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.clickToggle(c,s))}),t.qZA()()(),t.TgZ(6,"ion-card-content",3)(7,"ion-item",11)(8,"ion-label",12),t.YNc(9,V,2,2,"p",0),t.YNc(10,R,2,1,"p",0),t.YNc(11,K,2,1,"p",0),t.TgZ(12,"h1"),t._uU(13),t.qZA(),t.YNc(14,P,2,3,"h2",6),t.qZA()()()()}if(2&o){const n=r.ngIf,e=t.oxw(2);t.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),t.xp6(3),t.s9C("color",n.control.icon.color),t.s9C("src",n.control.icon.href),t.xp6(2),t.Q6J("ngModel",n.ui.toggle),t.xp6(4),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(n.control.name),t.xp6(1),t.Q6J("ngIf",""!==n.ui.status.text)}}function E(o,r){if(1&o&&(t.ynx(0),t.YNc(1,D,15,10,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}function w(o,r){if(1&o&&(t.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",18),t._uU(3),t.qZA()()()),2&o){const n=t.oxw().$implicit,e=t.oxw().ngIf;t.xp6(1),t.Gre("radio-item selected-",e.ui.status.text===n.name,""),t.xp6(1),t.s9C("value",n.name),t.xp6(1),t.hij(" ",n.name,"")}}function A(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,w,4,5,"div",0),t.qZA()),2&o){const n=r.$implicit;t.xp6(1),t.Q6J("ngIf",""!==n.name)}}function v(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-radio-group",16),t.NdJ("ionChange",function(s){const c=t.CHM(n).ngIf,p=t.oxw(2);return t.KtG(p.radioChange(c,s))}),t.YNc(7,A,2,1,"div",17),t.qZA()()()()}if(2&o){const n=r.ngIf;t.xp6(3),t.Q6J("text_vm",n),t.xp6(3),t.s9C("value",n.ui.status.text),t.xp6(1),t.Q6J("ngForOf",n.ui.radioList)}}function g(o,r){if(1&o&&(t.ynx(0),t.YNc(1,v,8,3,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.vm$))}}let l=(()=>{var o;class r{constructor(e,s){this.translate=e,this.controlService=s,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([e,s,m])=>this.updateVM(e,s,m))):console.error("Component 'control-switch' not available for rendering.")}updateVM(e,s,m){let c=m.find(T=>T.uuid===e.room&&T.serialNr===e.serialNr),p=s.find(T=>T.uuid===e.category&&T.serialNr===e.serialNr),h="1"===e.states.active;return this.radioList||(this.radioList=[{id:0,name:this.translate.instant("Off")},{id:1,name:this.translate.instant("On")}]),{control:{...e,icon:{href:e.icon.href,color:h?"primary":"dark"}},ui:{name:e.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",radioList:this.radioList,selectedId:h?1:0,status:{text:this.translate.instant(h?"On":"Off"),color:U.c.getColor(h?"primary":"secondary")},toggle:h}}}clickToggle(e,s){s.preventDefault(),s.stopPropagation(),this.controlService.updateControl(e.control,e.ui.toggle?"Off":"On")}radioChange(e,s){s.preventDefault(),s.stopPropagation(),e.ui.radioList.findIndex(c=>c.name===s.detail.value)?this.controlService.updateControl(e.control,"On"):this.controlService.updateControl(e.control,"Off")}}return(o=r).\u0275fac=function(e){return new(e||o)(t.Y36(u.sK),t.Y36(a.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["control-switch-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["aria-label","vm.ui.toggle","color","primary","mode","ios",1,"toggle-only",3,"ngModel","click"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"item"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[1,"radio","radio-text",3,"value"]],template:function(e,s){1&e&&(t.YNc(0,Q,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,g,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",s.view===s.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",s.view===s.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.B7,i.se,i.Nd,i.ho,i.w,i.U5,i.QI,i.YI,M.JJ,M.On,L.rH,x.h,O.Ov]}),r})()},9249:(j,W,_)=>{"use strict";_.d(W,{v:()=>l});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(6676),a=_(5879),O=_(9515),i=_(5e3),M=_(6814),L=_(9843),x=_(4282),S=_(717);function k(o,r){if(1&o&&(a.TgZ(0,"h2"),a._uU(1),a.qZA()),2&o){const n=a.oxw().ngIf;a.Udp("color",n.ui.status.color),a.xp6(1),a.hij(" ",n.ui.status.text,"")}}function Q(o,r){if(1&o&&(a.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),a._UZ(3,"ion-icon",5),a.TgZ(4,"ion-label",6)(5,"h1"),a._uU(6),a.qZA(),a.YNc(7,k,2,3,"h2",7),a.qZA()()()()),2&o){const n=r.ngIf;a.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),a.xp6(3),a.s9C("color",n.control.icon.color),a.s9C("src",n.control.icon.href),a.xp6(3),a.Oqu(n.control.name),a.xp6(1),a.Q6J("ngIf",""!==n.ui.status.text)}}function V(o,r){if(1&o&&(a.ynx(0),a.YNc(1,Q,8,6,"ion-card",1),a.ALo(2,"async"),a.BQk()),2&o){const n=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,n.vm$))}}function R(o,r){if(1&o&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&o){const n=a.oxw().ngIf;a.xp6(1),a.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function K(o,r){if(1&o&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&o){const n=a.oxw().ngIf;a.xp6(1),a.Oqu(n.ui.room)}}function P(o,r){if(1&o&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&o){const n=a.oxw().ngIf;a.xp6(1),a.Oqu(n.ui.category)}}function D(o,r){if(1&o&&(a.TgZ(0,"h2"),a._uU(1),a.qZA()),2&o){const n=a.oxw().ngIf;a.Udp("color",n.ui.status.color),a.xp6(1),a.hij(" ",n.ui.status.text,"")}}function E(o,r){if(1&o&&(a.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),a._UZ(3,"ion-icon",5)(4,"ion-label"),a.qZA()(),a.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),a.YNc(8,R,2,2,"p",0),a.YNc(9,K,2,1,"p",0),a.YNc(10,P,2,1,"p",0),a.TgZ(11,"h1"),a._uU(12),a.qZA(),a.YNc(13,D,2,3,"h2",7),a.qZA()()()()),2&o){const n=r.ngIf,e=a.oxw(2);a.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),a.xp6(3),a.s9C("color",n.control.icon.color),a.s9C("src",n.control.icon.href),a.xp6(5),a.Q6J("ngIf","home"===e.key),a.xp6(1),a.Q6J("ngIf","room"===e.key),a.xp6(1),a.Q6J("ngIf","category"===e.key),a.xp6(2),a.Oqu(n.control.name),a.xp6(1),a.Q6J("ngIf",""!==n.ui.status.text)}}function w(o,r){if(1&o&&(a.ynx(0),a.YNc(1,E,14,9,"ion-card",8),a.ALo(2,"async"),a.BQk()),2&o){const n=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,n.vm$))}}function A(o,r){if(1&o&&(a.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),a._UZ(3,"card-text-view",14),a.qZA()()()),2&o){const n=r.ngIf;a.xp6(3),a.Q6J("text_vm",n)}}function v(o,r){if(1&o&&(a.ynx(0),a.YNc(1,A,4,1,"ion-grid",12),a.ALo(2,"async"),a.BQk()),2&o){const n=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,n.vm$))}}var g=_(9572).sprintf;let l=(()=>{var o;class r{constructor(e,s){this.translate=e,this.controlService=s,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([e,s,m])=>this.updateVM(e,s,m))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(e,s,m){let c=m.find(T=>T.uuid===e.room&&T.serialNr===e.serialNr),p=s.find(T=>T.uuid===e.category&&T.serialNr===e.serialNr),h=this.processControl(e);return{control:e,ui:{name:e.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",status:{text:h.text,color:h.color}}}}processControl(e){let s={text:"",color:U.c.getColor("secundary")};switch(e.type){case"InfoOnlyText":s.text=e.states.text?g(e.details.format,e.states.text):"";break;case"InfoOnlyDigital":let m="1"===e.states.active;s.text=m?e.details.text.on:e.details.text.off,s.color=m?e.details.color.on:e.details.color.off;break;case"TextState":s.text=e.states.textAndIcon?e.states.textAndIcon:"";break;case"InfoOnlyAnalog":switch(e.details.format){case"<v.u>":let c=new Date(1e3*Number(e.states.value)+1230768e6);s.text=t(c).format("DD-MM-YYYY HH:MM").toString();break;case"<v.t>":let p=Number(e.states.value)/60,h=Math.floor(p/1440),d=Math.floor(p%1440/60),T=Math.floor(p%1440%60);s.text=h+"d "+d+"h "+T+"m";break;case"<v.d>":let y=new Date(1e3*Number(e.states.value)+1230768e6);s.text=t(y).format("DD:MM:YYYY").toString();break;case"<v.x>":s.text=e.states.value?"1":"0";break;case"<v.j>":e.details.format="%f";case"<v.i>":e.details.format="%f";case"<v.c>":e.details.format="#%6h";case"<v.m>":e.details.format="%d";case"<v>":e.details.format="%d";case"<v.1>":e.details.format="%.1f";case"<v.2>":e.details.format="%.2f";case"<v.3>":e.details.format="%.3f";default:e.states.value&&e.details.format&&(s.text=g(e.details.format,e.states.value))}}return s}}return(o=r).\u0275fac=function(e){return new(e||o)(a.Y36(O.sK),a.Y36(i.B))},o.\u0275cmp=a.Xpm({type:o,selectors:[["control-text-state-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(e,s){1&e&&(a.YNc(0,V,3,3,"ng-container",0),a.YNc(1,w,3,3,"ng-container",0),a.YNc(2,v,3,3,"ng-container",0)),2&e&&(a.Q6J("ngIf",s.view===s.viewType.LIST_ITEM),a.xp6(1),a.Q6J("ngIf",s.view===s.viewType.FAVORITE),a.xp6(1),a.Q6J("ngIf",s.view===s.viewType.DETAILED))},dependencies:[M.O5,L.PM,L.FN,L.Zi,L.wI,L.jY,L.gu,L.Ie,L.Q$,L.Nd,L.YI,x.rH,S.h,M.Ov]}),r})()},9460:(j,W,_)=>{"use strict";_.d(W,{y:()=>A});var f=_(2572),J=_(7398),I=_(6308),U=_(7658),t=_(5879),u=_(9515),a=_(5e3),O=_(6814),i=_(9843),M=_(4282),L=_(717);function x(v,g){if(1&v&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.Udp("color",l.ui.status.color),t.xp6(1),t.hij(" ",l.ui.status.text,"")}}function S(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,x,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.DOWN,e,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.UP,e,r))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&v){const l=g.ngIf;t.hYB("routerLink","",l.control.serialNr,"/",l.control.uuid,""),t.xp6(3),t.s9C("color",l.control.icon.color),t.s9C("src",l.control.icon.href),t.xp6(3),t.Oqu(l.control.name),t.xp6(1),t.Q6J("ngIf",""!==l.ui.status.text)}}function k(v,g){if(1&v&&(t.ynx(0),t.YNc(1,S,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}function Q(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.AsE("",l.ui.room," \u2022 ",l.ui.category,"")}}function V(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.Oqu(l.ui.room)}}function R(v,g){if(1&v&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.xp6(1),t.Oqu(l.ui.category)}}function K(v,g){if(1&v&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&v){const l=t.oxw().ngIf;t.Udp("color",l.ui.status.color),t.xp6(1),t.hij(" ",l.ui.status.text,"")}}function P(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.DOWN,e,r))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.UP,e,r))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,Q,2,2,"p",0),t.YNc(13,V,2,1,"p",0),t.YNc(14,R,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,K,2,3,"h2",7),t.qZA()()()()}if(2&v){const l=g.ngIf,o=t.oxw(2);t.hYB("routerLink","",l.control.serialNr,"/",l.control.uuid,""),t.xp6(3),t.s9C("color",l.control.icon.color),t.s9C("src",l.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===o.key),t.xp6(1),t.Q6J("ngIf","room"===o.key),t.xp6(1),t.Q6J("ngIf","category"===o.key),t.xp6(2),t.Oqu(l.control.name),t.xp6(1),t.Q6J("ngIf",""!==l.ui.status.text)}}function D(v,g){if(1&v&&(t.ynx(0),t.YNc(1,P,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}function E(v,g){if(1&v){const l=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.DOWN,e,r))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("click",function(r){const e=t.CHM(l).ngIf,s=t.oxw(2);return t.KtG(s.clickButton(s.buttonType.UP,e,r))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()()()}if(2&v){const l=g.ngIf;t.xp6(3),t.Q6J("text_vm",l)}}function w(v,g){if(1&v&&(t.ynx(0),t.YNc(1,E,15,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&v){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,l.vm$))}}let A=(()=>{var v;class g{constructor(o,r){this.translate=o,this.controlService=r,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([o,r,n])=>this.updateVM(o,r,n))):console.error("Component 'control-up-down-digital' not available for rendering.")}updateVM(o,r,n){let e=n.find(c=>c.uuid===o.room&&c.serialNr===o.serialNr),s=r.find(c=>c.uuid===o.category&&c.serialNr===o.serialNr);return{control:o,ui:{name:o.name,room:e&&e.name?e.name:"unknown",category:s&&s.name?s.name:"unknown",status:{text:"",color:U.c.getColor("secondary")}}}}clickButton(o,r,n){switch(n.preventDefault(),n.stopPropagation(),o){case I.W.UP:this.controlService.updateControl(r.control,"PulseUp");break;case I.W.DOWN:this.controlService.updateControl(r.control,"PulseDown")}}}return(v=g).\u0275fac=function(o){return new(o||v)(t.Y36(u.sK),t.Y36(a.B))},v.\u0275cmp=t.Xpm({type:v,selectors:[["control-up-down-digital-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(o,r){1&o&&(t.YNc(0,k,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,w,3,3,"ng-container",0)),2&o&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,M.rH,u.Pi,L.h,O.Ov]}),g})()},3415:(j,W,_)=>{"use strict";_.d(W,{b:()=>g});var f=_(2572),J=_(7398);const U=(0,_(2726).fo)("Browser",{web:()=>_.e(3671).then(_.bind(_,3671)).then(l=>new l.BrowserWeb)});var t=_(6308),u=_(7658),a=_(5879),O=_(9515),i=_(5e3),M=_(6814),L=_(9843),x=_(4282),S=_(717);function k(l,o){if(1&l&&(a.TgZ(0,"h2"),a._uU(1),a.qZA()),2&l){const r=a.oxw().ngIf;a.Udp("color",r.ui.status.color),a.xp6(1),a.hij(" ",r.ui.status.text,"")}}function Q(l,o){if(1&l){const r=a.EpF();a.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),a._UZ(3,"ion-icon",5),a.TgZ(4,"ion-label",6)(5,"h1"),a._uU(6),a.qZA(),a.YNc(7,k,2,3,"h2",7),a.qZA(),a.ynx(8),a.TgZ(9,"ion-fab-button",8),a.NdJ("click",function(e){const m=a.CHM(r).ngIf,c=a.oxw(2);return a.KtG(c.clickPushButton(c.buttonType.PUSH,m,e))}),a._UZ(10,"ion-icon",9),a.qZA(),a.BQk(),a.qZA()()()}if(2&l){const r=o.ngIf;a.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),a.xp6(3),a.s9C("color",r.control.icon.color),a.s9C("src",r.control.icon.href),a.xp6(3),a.Oqu(r.control.name),a.xp6(1),a.Q6J("ngIf",""!==r.ui.status.text)}}function V(l,o){if(1&l&&(a.ynx(0),a.YNc(1,Q,11,6,"ion-card",1),a.ALo(2,"async"),a.BQk()),2&l){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,r.vm$))}}function R(l,o){if(1&l&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&l){const r=a.oxw().ngIf;a.xp6(1),a.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function K(l,o){if(1&l&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&l){const r=a.oxw().ngIf;a.xp6(1),a.Oqu(r.ui.room)}}function P(l,o){if(1&l&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&l){const r=a.oxw().ngIf;a.xp6(1),a.Oqu(r.ui.category)}}function D(l,o){if(1&l&&(a.TgZ(0,"h2"),a._uU(1),a.qZA()),2&l){const r=a.oxw().ngIf;a.Udp("color",r.ui.status.color),a.xp6(1),a.hij(" ",r.ui.status.text,"")}}function E(l,o){if(1&l){const r=a.EpF();a.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),a._UZ(3,"ion-icon",5)(4,"ion-label"),a.TgZ(5,"ion-fab-button",8),a.NdJ("click",function(e){const m=a.CHM(r).ngIf,c=a.oxw(2);return a.KtG(c.clickPushButton(c.buttonType.PUSH,m,e))}),a._UZ(6,"ion-icon",9),a.qZA()()(),a.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),a.YNc(10,R,2,2,"p",0),a.YNc(11,K,2,1,"p",0),a.YNc(12,P,2,1,"p",0),a.TgZ(13,"h1"),a._uU(14),a.qZA(),a.YNc(15,D,2,3,"h2",7),a.qZA()()()()}if(2&l){const r=o.ngIf,n=a.oxw(2);a.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),a.xp6(3),a.s9C("color",r.control.icon.color),a.s9C("src",r.control.icon.href),a.xp6(7),a.Q6J("ngIf","home"===n.key),a.xp6(1),a.Q6J("ngIf","room"===n.key),a.xp6(1),a.Q6J("ngIf","category"===n.key),a.xp6(2),a.Oqu(r.control.name),a.xp6(1),a.Q6J("ngIf",""!==r.ui.status.text)}}function w(l,o){if(1&l&&(a.ynx(0),a.YNc(1,E,16,9,"ion-card",10),a.ALo(2,"async"),a.BQk()),2&l){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,r.vm$))}}function A(l,o){if(1&l){const r=a.EpF();a.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),a._UZ(3,"card-text-view",16),a.qZA()(),a.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),a.NdJ("click",function(e){const m=a.CHM(r).ngIf,c=a.oxw(2);return a.KtG(c.clickPushButton(c.buttonType.PUSH,m,e))}),a.TgZ(7,"ion-label",18)(8,"h1",19),a._uU(9,"Open link"),a.qZA()()()()()()}if(2&l){const r=o.ngIf;a.xp6(3),a.Q6J("text_vm",r)}}function v(l,o){if(1&l&&(a.ynx(0),a.YNc(1,A,10,1,"ion-grid",14),a.ALo(2,"async"),a.BQk()),2&l){const r=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,r.vm$))}}let g=(()=>{var l;class o{constructor(n,e){this.translate=n,this.controlService=e,this.buttonType=t.W,this.viewType=t.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,J.U)(([n,e,s])=>this.updateVM(n,e,s))):console.error("Component 'control-webpage' not available for rendering.")}updateVM(n,e,s){let m=s.find(h=>h.uuid===n.room&&h.serialNr===n.serialNr),c=e.find(h=>h.uuid===n.category&&h.serialNr===n.serialNr);return{control:n,ui:{name:n.name,room:m&&m.name?m.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:"Web Link",color:u.c.getColor("secondary")}}}}clickPushButton(n,e,s){s.preventDefault(),s.stopPropagation();let m=e.control.details.url_hd;m||(m=e.control.details.url),console.log("url:",m),U.open({url:m})}}return(l=o).\u0275fac=function(n){return new(n||l)(a.Y36(O.sK),a.Y36(i.B))},l.\u0275cmp=a.Xpm({type:l,selectors:[["control-webpage-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["src","assets/icons/svg/external-link.svg",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(n,e){1&n&&(a.YNc(0,V,3,3,"ng-container",0),a.YNc(1,w,3,3,"ng-container",0),a.YNc(2,v,3,3,"ng-container",0)),2&n&&(a.Q6J("ngIf",e.view===e.viewType.LIST_ITEM),a.xp6(1),a.Q6J("ngIf",e.view===e.viewType.FAVORITE),a.xp6(1),a.Q6J("ngIf",e.view===e.viewType.DETAILED))},dependencies:[M.O5,L.YG,L.PM,L.FN,L.Zi,L.wI,L.W4,L.jY,L.gu,L.Ie,L.Q$,L.Nd,L.YI,x.rH,O.Pi,S.h,M.Ov]}),o})()},6592:(j,W,_)=>{"use strict";_.d(W,{Y:()=>O});var f=_(6814),J=_(9843),I=_(6223),U=_(4282),t=_(9515),u=_(577),a=_(5879);let O=(()=>{var i;class M{}return(i=M).\u0275fac=function(x){return new(x||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[f.ez,J.Pc,I.u5,U.Bz,t.aw,u.o,J.Pc,U.Bz]}),M})()},9572:(j,W,_)=>{var f;!function(){"use strict";var J={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function I(O){return function t(O,i){var x,k,Q,V,R,K,P,D,E,M=1,L=O.length,S="";for(k=0;k<L;k++)if("string"==typeof O[k])S+=O[k];else if("object"==typeof O[k]){if((V=O[k]).keys)for(x=i[M],Q=0;Q<V.keys.length;Q++){if(null==x)throw new Error(I('[sprintf] Cannot access property "%s" of undefined value "%s"',V.keys[Q],V.keys[Q-1]));x=x[V.keys[Q]]}else x=V.param_no?i[V.param_no]:i[M++];if(J.not_type.test(V.type)&&J.not_primitive.test(V.type)&&x instanceof Function&&(x=x()),J.numeric_arg.test(V.type)&&"number"!=typeof x&&isNaN(x))throw new TypeError(I("[sprintf] expecting number but found %T",x));switch(J.number.test(V.type)&&(D=x>=0),V.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,V.width?parseInt(V.width):0);break;case"e":x=V.precision?parseFloat(x).toExponential(V.precision):parseFloat(x).toExponential();break;case"f":x=V.precision?parseFloat(x).toFixed(V.precision):parseFloat(x);break;case"g":x=V.precision?String(Number(x.toPrecision(V.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=V.precision?x.substring(0,V.precision):x;break;case"t":x=String(!!x),x=V.precision?x.substring(0,V.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=V.precision?x.substring(0,V.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=V.precision?x.substring(0,V.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}J.json.test(V.type)?S+=x:(!J.number.test(V.type)||D&&!V.sign?E="":(E=D?"+":"-",x=x.toString().replace(J.sign,"")),K=V.pad_char?"0"===V.pad_char?"0":V.pad_char.charAt(1):" ",P=V.width-(E+x).length,R=V.width&&P>0?K.repeat(P):"",S+=V.align?E+x+R:"0"===K?E+R+x:R+E+x)}return S}(function a(O){if(u[O])return u[O];for(var M,i=O,L=[],x=0;i;){if(null!==(M=J.text.exec(i)))L.push(M[0]);else if(null!==(M=J.modulo.exec(i)))L.push("%");else{if(null===(M=J.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(M[2]){x|=1;var S=[],k=M[2],Q=[];if(null===(Q=J.key.exec(k)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(S.push(Q[1]);""!==(k=k.substring(Q[0].length));)if(null!==(Q=J.key_access.exec(k)))S.push(Q[1]);else{if(null===(Q=J.index_access.exec(k)))throw new SyntaxError("[sprintf] failed to parse named argument key");S.push(Q[1])}M[2]=S}else x|=2;if(3===x)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");L.push({placeholder:M[0],param_no:M[1],keys:M[2],sign:M[3],pad_char:M[4],align:M[5],width:M[6],precision:M[7],type:M[8]})}i=i.substring(M[0].length)}return u[O]=L}(O),arguments)}function U(O,i){return I.apply(null,[O].concat(i||[]))}var u=Object.create(null);W.sprintf=I,W.vsprintf=U,typeof window<"u"&&(window.sprintf=I,window.vsprintf=U,void 0!==(f=function(){return{sprintf:I,vsprintf:U}}.call(W,_,W,j))&&(j.exports=f))}()}}]);