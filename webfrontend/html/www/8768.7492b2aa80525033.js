"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8768],{2726:(X,R,l)=>{l.d(R,{Uw:()=>S,fo:()=>N});var f=l(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var O=function(o){return o.Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",o}(O||{});class i extends Error{constructor(n,a,m){super(n),this.message=n,this.code=a,this.data=m}}const b=o=>{var n,a,m,c,p;const h=o.CapacitorCustomPlatform||null,d=o.Capacitor||{},v=d.Plugins=d.Plugins||{},w=o.CapacitorPlatforms,x=(null===(n=w?.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==h?h.name:(o=>{var n,a;return o?.androidBridge?"android":null!==(a=null===(n=o?.webkit)||void 0===n?void 0:n.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(o)),C=(null===(a=w?.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==x()),U=(null===(m=w?.currentPlatform)||void 0===m?void 0:m.isPluginAvailable)||(G=>{const j=q.get(G);return!(!j?.platforms.has(x())&&!Q(G))}),Q=(null===(c=w?.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(G=>{var j;return null===(j=d.PluginHeaders)||void 0===j?void 0:j.find(z=>z.name===G)}),q=new Map,nt=(null===(p=w?.currentPlatform)||void 0===p?void 0:p.registerPlugin)||((G,j={})=>{const z=q.get(G);if(z)return console.warn(`Capacitor plugin "${G}" already registered. Cannot register plugins twice.`),z.proxy;const tt=x(),rt=Q(G);let ct;const vt=function(){var et=(0,f.Z)(function*(){return!ct&&tt in j?ct=ct="function"==typeof j[tt]?yield j[tt]():j[tt]:null!==h&&!ct&&"web"in j&&(ct=ct="function"==typeof j.web?yield j.web():j.web),ct});return function(){return et.apply(this,arguments)}}(),mt=et=>{let it;const st=(..._t)=>{const ut=vt().then(at=>{const dt=((et,it)=>{var st,_t;if(!rt){if(et)return null===(_t=et[it])||void 0===_t?void 0:_t.bind(et);throw new i(`"${G}" plugin is not implemented on ${tt}`,O.Unimplemented)}{const ut=rt?.methods.find(at=>it===at.name);if(ut)return"promise"===ut.rtype?at=>d.nativePromise(G,it.toString(),at):(at,dt)=>d.nativeCallback(G,it.toString(),at,dt);if(et)return null===(st=et[it])||void 0===st?void 0:st.bind(et)}})(at,et);if(dt){const gt=dt(..._t);return it=gt?.remove,gt}throw new i(`"${G}.${et}()" is not implemented on ${tt}`,O.Unimplemented)});return"addListener"===et&&(ut.remove=(0,f.Z)(function*(){return it()})),ut};return st.toString=()=>`${et.toString()}() { [capacitor code] }`,Object.defineProperty(st,"name",{value:et,writable:!1,configurable:!1}),st},ft=mt("addListener"),ht=mt("removeListener"),Tt=(et,it)=>{const st=ft({eventName:et},it),_t=function(){var at=(0,f.Z)(function*(){const dt=yield st;ht({eventName:et,callbackId:dt},it)});return function(){return at.apply(this,arguments)}}(),ut=new Promise(at=>st.then(()=>at({remove:_t})));return ut.remove=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield _t()}),ut},pt=new Proxy({},{get(et,it){switch(it){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return rt?Tt:ft;case"removeListener":return ht;default:return mt(it)}}});return v[G]=pt,q.set(G,{name:G,proxy:pt,platforms:new Set([...Object.keys(j),...rt?[tt]:[]])}),pt});return d.convertFileSrc||(d.convertFileSrc=G=>G),d.getPlatform=x,d.handleError=G=>o.console.error(G),d.isNativePlatform=C,d.isPluginAvailable=U,d.pluginMethodNoop=(G,j,z)=>Promise.reject(`${z} does not have an implementation of "${j}".`),d.registerPlugin=nt,d.Exception=i,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},V=(o=>o.Capacitor=b(o))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),N=V.registerPlugin;class S{constructor(n){this.listeners={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,a){var m=this;this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(a);const p=this.windowListeners[n];p&&!p.registered&&this.addWindowListener(p);const h=function(){var v=(0,f.Z)(function*(){return m.removeListener(n,a)});return function(){return v.apply(this,arguments)}}(),d=Promise.resolve({remove:h});return Object.defineProperty(d,"remove",{value:(v=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield h()}),function(){return v.apply(this,arguments)})}),d;var v}removeAllListeners(){var n=this;return(0,f.Z)(function*(){n.listeners={};for(const a in n.windowListeners)n.removeWindowListener(n.windowListeners[a]);n.windowListeners={}})()}notifyListeners(n,a){const m=this.listeners[n];m&&m.forEach(c=>c(a))}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,a){this.windowListeners[a]={registered:!1,windowEventName:n,pluginEventName:a,handler:m=>{this.notifyListeners(a,m)}}}unimplemented(n="not implemented"){return new V.Exception(n,O.Unimplemented)}unavailable(n="not available"){return new V.Exception(n,O.Unavailable)}removeListener(n,a){var m=this;return(0,f.Z)(function*(){const c=m.listeners[n];if(!c)return;const p=c.indexOf(a);m.listeners[n].splice(p,1),m.listeners[n].length||m.removeWindowListener(m.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}}const k=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends S{getCookies(){return(0,f.Z)(function*(){const n=document.cookie,a={};return n.split(";").forEach(m=>{if(m.length<=0)return;let[c,p]=m.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=D(c).trim(),p=D(p).trim(),a[c]=p}),a})()}setCookie(n){return(0,f.Z)(function*(){try{const a=k(n.key),m=k(n.value),c=`; expires=${(n.expires||"").replace("expires=","")}`,p=(n.path||"/").replace("path=",""),h=null!=n.url&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${a}=${m||""}${c}; path=${p}; ${h};`}catch(a){return Promise.reject(a)}})()}deleteCookie(n){return(0,f.Z)(function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,f.Z)(function*(){try{const n=document.cookie.split(";")||[];for(const a of n)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})()}clearAllCookies(){var n=this;return(0,f.Z)(function*(){try{yield n.clearCookies()}catch(a){return Promise.reject(a)}})()}}N("CapacitorCookies",{web:()=>new E});const B=function(){var o=(0,f.Z)(function*(n){return new Promise((a,m)=>{const c=new FileReader;c.onload=()=>{const p=c.result;a(p.indexOf(",")>=0?p.split(",")[1]:p)},c.onerror=p=>m(p),c.readAsDataURL(n)})});return function(a){return o.apply(this,arguments)}}();class e extends S{request(n){return(0,f.Z)(function*(){const a=((o,n={})=>{const a=Object.assign({method:o.method||"GET",headers:o.headers},n),c=((o={})=>{const n=Object.keys(o);return Object.keys(o).map(c=>c.toLocaleLowerCase()).reduce((c,p,h)=>(c[p]=o[n[h]],c),{})})(o.headers)["content-type"]||"";if("string"==typeof o.data)a.body=o.data;else if(c.includes("application/x-www-form-urlencoded")){const p=new URLSearchParams;for(const[h,d]of Object.entries(o.data||{}))p.set(h,d);a.body=p.toString()}else if(c.includes("multipart/form-data")){const p=new FormData;if(o.data instanceof FormData)o.data.forEach((d,v)=>{p.append(v,d)});else for(const d of Object.keys(o.data))p.append(d,o.data[d]);a.body=p;const h=new Headers(a.headers);h.delete("content-type"),a.headers=h}else(c.includes("application/json")||"object"==typeof o.data)&&(a.body=JSON.stringify(o.data));return a})(n,n.webFetchExtra),m=((o,n=!0)=>o?Object.entries(o).reduce((m,c)=>{const[p,h]=c;let d,v;return Array.isArray(h)?(v="",h.forEach(w=>{d=n?encodeURIComponent(w):w,v+=`${p}=${d}&`}),v.slice(0,-1)):(d=n?encodeURIComponent(h):h,v=`${p}=${d}`),`${m}&${v}`},"").substr(1):null)(n.params,n.shouldEncodeUrlParams),c=m?`${n.url}?${m}`:n.url,p=yield fetch(c,a),h=p.headers.get("content-type")||"";let v,w,{responseType:d="text"}=p.ok?n:{};switch(h.includes("application/json")&&(d="json"),d){case"arraybuffer":case"blob":w=yield p.blob(),v=yield B(w);break;case"json":v=yield p.json();break;default:v=yield p.text()}const L={};return p.headers.forEach((x,P)=>{L[P]=x}),{data:v,headers:L,status:p.status,url:p.url}})()}get(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"GET"}))})()}post(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"POST"}))})()}put(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"PUT"}))})()}patch(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})()}delete(n){var a=this;return(0,f.Z)(function*(){return a.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})()}}N("CapacitorHttp",{web:()=>new e})},4898:(X,R,l)=>{l.d(R,{B:()=>u});var f=l(7398),Y=l(7081),I=l(5879),M=l(711),t=l(6119);let u=(()=>{var s;class O{constructor(A,b){this.dataService=A,this.loxberryService=b}get controls$(){return this.dataService.controls$}get categories$(){return this.dataService.categories$}get rooms$(){return this.dataService.rooms$}getControl$(A,b){return this.dataService.controls$.pipe((0,f.U)(Z=>Z.find(V=>V.uuid===b&&V.serialNr===A)),(0,Y.d)())}getSubControl$(A,b,Z){return this.dataService.controls$.pipe((0,f.U)(V=>{const N=V.find(J=>J.uuid===b&&J.serialNr===A&&J.subControls[Z].uuid===Z);if(N)return N.subControls[Z]}),(0,Y.d)())}updateControl(A,b){this.loxberryService.sendMessage(A,b)}}return(s=O).\u0275fac=function(A){return new(A||s)(I.LFG(M.D),I.LFG(t.$))},s.\u0275prov=I.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),O})()},6308:(X,R,l)=>{l.d(R,{G:()=>Y,W:()=>f});var f=function(I){return I[I.DOWN=0]="DOWN",I[I.DOWN_OFF=1]="DOWN_OFF",I[I.FULL_CLOSE=2]="FULL_CLOSE",I[I.FULL_OPEN=3]="FULL_OPEN",I[I.MINUS=4]="MINUS",I[I.PLUS=5]="PLUS",I[I.PUSH=6]="PUSH",I[I.SHADE=7]="SHADE",I[I.UP=8]="UP",I[I.UP_OFF=9]="UP_OFF",I}(f||{}),Y=function(I){return I[I.DETAILED=0]="DETAILED",I[I.FAVORITE=1]="FAVORITE",I[I.LIST_ITEM=2]="LIST_ITEM",I[I.LIST_ITEM_POPUP=3]="LIST_ITEM_POPUP",I}(Y||{})},7658:(X,R,l)=>{l.d(R,{c:()=>f});class f{static hsv2rgb(I,M,t){const u=(k,D,E)=>Math.round(Math.max(Math.min(k,Math.max(D,E)),Math.min(D,E))),s=I/60,O=M/100,i=t/100,A=Math.floor(s),b=s-A,Z=i*(1-O),V=i*(1-b*O),N=i*(1-(1-b)*O),J=A%6,S=[N,i,i,V,Z,Z][J],K=[Z,Z,N,i,i,V][J];return[u(255*[i,V,Z,Z,N,i][J],0,255),u(255*S,0,255),u(255*K,0,255)]}static getColor(I){let M;switch(I){case"primary":M="#69c350";break;case"secondary":default:M="#9d9e9e";break;case"tertiary":M="#6a64ff";break;case"success":M="#2fdf75";break;case"warning":M="#ffd534";break;case"danger":M="#ff4961";break;case"dark":M="#f4f5f8";break;case"medium":M="#989aa2";break;case"light":M="#222428"}return M}}},2571:(X,R,l)=>{l.d(R,{W:()=>$});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6223),b=l(6089);function Z(S,K){if(1&S&&(t.ynx(0),t.TgZ(1,"ion-fab-button",11),t._UZ(2,"ion-icon",12),t.qZA(),t.BQk()),2&S){const k=t.oxw(2).ngIf;t.xp6(1),t.Jzz("background-color: ",k.ui.buttonColor,"")}}function V(S,K){if(1&S&&(t.ynx(0),t.TgZ(1,"ion-fab-button",13),t._UZ(2,"ion-icon",14),t.qZA(),t.BQk()),2&S){const k=t.oxw(2).ngIf,D=t.oxw();t.xp6(1),t.Jzz("background-color: ",k.ui.buttonColor,""),t.s9C("routerLink",D.subControl.uuid)}}function N(S,K){if(1&S&&(t.ynx(0),t.YNc(1,Z,3,3,"ng-container",6),t.YNc(2,V,3,4,"ng-container",6),t.BQk()),2&S){const k=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf","Dimmer"===k.subControl.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===k.subControl.type)}}function J(S,K){if(1&S){const k=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-label",4)(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-label",5)(7,"h2"),t._uU(8),t.qZA()(),t.YNc(9,N,3,2,"ng-container",6),t.qZA(),t.TgZ(10,"ion-item",3)(11,"ion-fab-button",7),t.NdJ("click",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.clickDimmerButton(T.buttonType.DOWN,B,E))}),t._UZ(12,"ion-icon",8),t.qZA(),t.TgZ(13,"ion-range",9),t.NdJ("ionChange",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.sliderChange(B,E))}),t.qZA(),t.TgZ(14,"ion-fab-button",10),t.NdJ("click",function(E){const B=t.CHM(k).ngIf,T=t.oxw();return t.KtG(T.clickDimmerButton(T.buttonType.UP,B,E))}),t._UZ(15,"ion-icon",8),t.qZA()()()()}if(2&S){const k=K.ngIf,D=t.oxw();t.xp6(5),t.Oqu(k.ui.name),t.xp6(3),t.hij("",k.ui.slider.position," %"),t.xp6(1),t.Q6J("ngIf",D.view===D.viewType.DETAILED),t.xp6(4),t.Jzz("--bar-background: ",k.ui.slider.color,";"),t.s9C("min",k.ui.slider.min),t.s9C("max",k.ui.slider.max),t.s9C("step",k.ui.slider.step),t.Q6J("ngModel",k.ui.slider.position)}}let $=(()=>{var S;class K{constructor(D,E){this.translate=D,this.controlService=E,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,Y.U)(([D,E])=>this.updateVM(D,E))):console.error("Component 'card-dimmer' not available for rendering.")}updateVM(D,E){let W=null==E.states.min||""===E.states.min?0:Number(E.states.min),B=null==E.states.max||""===E.states.max?100:Number(E.states.max),T=null==E.states.step||""===E.states.step?1:Number(E.states.step),g=0,_="",e="";if("Dimmer"===E.type&&(g=E.states.position?Number(E.states.position):0,_="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb(255, 229, 127))",e="rgba(255, 229, 127,"+g/100+")"),"ColorPickerV2"===E.type){let n=E.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(n){g=n[3]?Number(n[3]):0;let a=M.c.hsv2rgb(Number(n[1]),Number(n[2]),100);_="-webkit-linear-gradient(left, rgba(49,56,62, 1), rgb("+a[0]+","+a[1]+","+a[2]+"))",e="rgba("+a[0]+","+a[1]+","+a[2]+","+g/100+")"}}return{control:D,subControl:E,ui:{name:this.view===I.G.DETAILED?D.states.circuitNames&&D.states.circuitNames[E.uuid]?D.states.circuitNames[E.uuid]:E.name:this.translate.instant("Brightness"),buttonColor:g<10?"#31373e":e,slider:{position:g,min:W,max:B,step:T,color:_}},rgb:[]}}sliderChange(D,E){if("Dimmer"===D.subControl.type&&D.subControl.states.position!=E.detail.value&&this.controlService.updateControl(D.subControl,String(E.detail.value)),"ColorPickerV2"===D.subControl.type){let W=D.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/);if(W[3]!=E.detail.value){let B="hsv("+W[1]+","+W[2]+","+String(E.detail.value)+")";this.controlService.updateControl(D.subControl,B)}}}clickDimmerButton(D,E,W){let B;if(W.preventDefault(),W.stopPropagation(),B=D===I.W.UP?E.ui.slider.position+E.ui.slider.step:E.ui.slider.position-E.ui.slider.step,B<E.ui.slider.min)B=E.ui.slider.min;else if(B>E.ui.slider.max)B=E.ui.slider.max;else if("Dimmer"===E.subControl.type&&this.controlService.updateControl(E.subControl,String(B)),"ColorPickerV2"===E.subControl.type){let T=E.subControl.states.color.match(/hsv\(([0-9]*),([0-9]*),([0-9]*)\)/),g="hsv("+T[1]+","+T[2]+","+String(B)+")";this.controlService.updateControl(E.subControl,g)}}}return(S=K).\u0275fac=function(D){return new(D||S)(t.Y36(u.sK),t.Y36(s.B))},S.\u0275cmp=t.Xpm({type:S,selectors:[["card-dimmer-view"]],inputs:{control:"control",subControl:"subControl",view:"view"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],[1,"label","label-noflex"],[1,"label-right"],[4,"ngIf"],[1,"fab-button-slider","icon-slider-left-small",3,"click"],["name","sunny",2,"color","#4e5761"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],[1,"fab-button-slider","btn_dimmer"],["name","contrast-outline",1,"hsv_icon"],[1,"fab-button-slider","btn_dimmer",3,"routerLink"],["name","color-filter-outline",1,"rgb_icon"]],template:function(D,E){1&D&&(t.YNc(0,J,16,10,"ion-card",0),t.ALo(1,"async")),2&D&&t.Q6J("ngIf",t.lcZ(1,1,E.vm$))},dependencies:[O.O5,i.PM,i.FN,i.W4,i.gu,i.Ie,i.Q$,i.I_,i.QI,i.YI,A.JJ,A.On,b.rH,O.Ov]}),K})()},7383:(X,R,l)=>{l.d(R,{x:()=>O});var f=l(5879),Y=l(9515),I=l(4898),M=l(6814),t=l(7027);function u(i,A){if(1&i&&(f.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",3),f._uU(3),f.ALo(4,"translate"),f.qZA()()()),2&i){const b=f.oxw().$implicit,Z=f.oxw();f.xp6(1),f.Gre("radio-item selected-",Z.radio_vm.ui.status.text==b.name,""),f.xp6(1),f.s9C("value",b.name),f.xp6(1),f.hij(" ",f.lcZ(4,5,b.name)," ")}}function s(i,A){if(1&i&&(f.TgZ(0,"div"),f.YNc(1,u,5,7,"div",2),f.qZA()),2&i){const b=A.$implicit;f.xp6(1),f.Q6J("ngIf",""!=b.name)}}let O=(()=>{var i;class A{constructor(Z,V){this.translate=Z,this.controlService=V}radioGroupChange(Z,V){if("Radio"===Z.control.type){let N=Z.ui.radioList.findIndex(J=>J.name===V.detail.value);if(Z.ui.radioList[N]&&Z.ui.radioList[N].id!=Z.ui.selectedId){let J=String(Z.ui.radioList[N].id);"0"===J&&(J="reset"),this.controlService.updateControl(Z.control,J)}}if("LightControllerV2"===Z.control.type){let N=Z.ui.radioList.findIndex(J=>J.name===V.detail.value);if(Z.ui.radioList[N]&&Z.ui.radioList[N].id!=Z.ui.selectedId){let J="changeTo/"+String(Z.ui.radioList[N].id);this.controlService.updateControl(Z.control,J)}}}}return(i=A).\u0275fac=function(Z){return new(Z||i)(f.Y36(Y.sK),f.Y36(I.B))},i.\u0275cmp=f.Xpm({type:i,selectors:[["card-radio-list-view"]],inputs:{radio_vm:"radio_vm"},decls:2,vars:2,consts:[[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"radio","radio-text",3,"value"]],template:function(Z,V){1&Z&&(f.TgZ(0,"ion-radio-group",0),f.NdJ("ionChange",function(J){return V.radioGroupChange(V.radio_vm,J)}),f.YNc(1,s,2,1,"div",1),f.qZA()),2&Z&&(f.s9C("value",V.radio_vm.ui.status.text),f.xp6(1),f.Q6J("ngForOf",V.radio_vm.ui.radioList))},dependencies:[M.sg,M.O5,t.Ie,t.B7,t.se,t.U5,t.QI,Y.X$]}),A})()},717:(X,R,l)=>{l.d(R,{h:()=>i});var f=l(5879),Y=l(9515),I=l(4898),M=l(6814),t=l(7027);function u(A,b){if(1&A&&f._UZ(0,"ion-icon",8),2&A){const Z=f.oxw();f.s9C("color",Z.text_vm.control.icon.color),f.s9C("src",Z.text_vm.control.icon.href)}}function s(A,b){if(1&A&&(f.TgZ(0,"div",9)(1,"div")(2,"span",10),f._uU(3),f.qZA(),f.TgZ(4,"span",11),f._uU(5),f.qZA()()()),2&A){const Z=f.oxw();f.xp6(3),f.Oqu(Z.text_vm.ui.icon.tempBase),f.xp6(2),f.Oqu(Z.text_vm.ui.icon.tempDec)}}function O(A,b){if(1&A&&(f.TgZ(0,"h2"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&A){const Z=f.oxw();f.Udp("color",Z.text_vm.ui.status.color),f.xp6(1),f.hij(" ",f.lcZ(2,3,Z.text_vm.ui.status.text)," ")}}let i=(()=>{var A;class b{constructor(V,N){this.translate=V,this.controlService=N}}return(A=b).\u0275fac=function(V){return new(V||A)(f.Y36(Y.sK),f.Y36(I.B))},A.\u0275cmp=f.Xpm({type:A,selectors:[["card-text-view"]],inputs:{text_vm:"text_vm"},decls:14,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"item"],["class","icon",3,"color","src",4,"ngIf"],["class","icon text-icon",4,"ngIf"],[1,"card-content"],[1,"label","label-fav"],[3,"color",4,"ngIf"],[1,"icon",3,"color","src"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"]],template:function(V,N){1&V&&(f.TgZ(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-item",2),f.YNc(3,u,1,2,"ion-icon",3),f.YNc(4,s,6,2,"div",4),f._UZ(5,"ion-label"),f.qZA()(),f.TgZ(6,"ion-card-content",5)(7,"ion-item",2)(8,"ion-label",6)(9,"p"),f._uU(10),f.qZA(),f.TgZ(11,"h1"),f._uU(12),f.qZA(),f.YNc(13,O,3,5,"h2",7),f.qZA()()()()),2&V&&(f.xp6(3),f.Q6J("ngIf",null==N.text_vm.ui.icon),f.xp6(1),f.Q6J("ngIf",N.text_vm.ui.icon),f.xp6(6),f.AsE("",N.text_vm.ui.room," \u2022 ",N.text_vm.ui.category,""),f.xp6(2),f.Oqu(N.text_vm.ui.name),f.xp6(1),f.Q6J("ngIf",""!==N.text_vm.ui.status.text))},dependencies:[M.O5,t.PM,t.FN,t.Zi,t.gu,t.Ie,t.Q$,Y.X$]}),b})()},7066:(X,R,l)=>{l.d(R,{a:()=>T});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6223),b=l(6089),Z=l(717);function V(g,_){if(1&g&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function N(g,_){if(1&g&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,V,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function J(g,_){if(1&g&&(t.ynx(0),t.YNc(1,N,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function $(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function S(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function K(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function k(g,_){if(1&g&&(t.TgZ(0,"h2",8),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function D(g,_){if(1&g&&(t.TgZ(0,"ion-card",10)(1,"ion-card-header",11)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",12),t.YNc(8,$,2,2,"p",0),t.YNc(9,S,2,1,"p",0),t.YNc(10,K,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,k,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function E(g,_){if(1&g&&(t.ynx(0),t.YNc(1,D,14,9,"ion-card",9),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function W(g,_){if(1&g){const e=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",16),t.NdJ("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.arm(a,o))}),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-card",17)(11,"ion-card-content",3)(12,"ion-item",4)(13,"ion-toggle",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const n=t.oxw(2);return t.KtG(n.presence=o)})("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.presenceToggle(a,o))}),t._uU(14," Presence detection "),t.qZA()()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-card",17)(18,"ion-card-content",3)(19,"ion-item",4)(20,"ion-toggle",19),t.NdJ("ngModelChange",function(o){t.CHM(e);const n=t.oxw(2);return t.KtG(n.delayedon=o)}),t._uU(21," Arming delayed "),t.qZA()()()()()(),t.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-button",20),t._uU(25," History "),t.qZA()()()()}if(2&g){const e=_.ngIf,r=t.oxw(2);t.xp6(3),t.Q6J("text_vm",e),t.xp6(4),t.hij(" ",e.ui.button.text," "),t.xp6(6),t.Q6J("ngModel",r.presence),t.xp6(7),t.Q6J("ngModel",r.delayedon),t.xp6(4),t.MGl("routerLink","",e.control.uuid,"/sensors")}}function B(g,_){if(1&g&&(t.ynx(0),t.YNc(1,W,26,5,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}let T=(()=>{var g;class _{constructor(r,o){this.translate=r,this.controlService=o,this.buttonType=I.W,this.viewType=I.G,this.delayedon=!1,this.presence=!0}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([r,o,n])=>this.updateVM(r,o,n))):console.error("Component 'control-alarm' not available for rendering.")}updateVM(r,o,n){let a=n.find(v=>v.uuid===r.room&&v.serialNr===r.serialNr),m=o.find(v=>v.uuid===r.category&&v.serialNr===r.serialNr),c=!!Number(r.states.armed),p=c?"Armed":"Disarmed",h=c?"Disarm alarm":"Arm alarm";return{control:{...r,icon:{href:"assets/icons/svg/shield.svg",color:c?"primary":M.c.getColor("dark")}},ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:this.translate.instant(p),color:M.c.getColor(c?"primary":"secondary")},button:{text:this.translate.instant(h)}},state:c}}arm(r,o){let n;r.state?n="off":(n=this.delayedon?"delayedon/":"on/",n+=this.presence?"1":"0"),this.controlService.updateControl(r.control,n)}presenceToggle(r,o){let n;r.state&&(n="dismv/"+(this.presence?"1":"0"),this.controlService.updateControl(r.control,n))}showHistory(r,o){}}return(g=_).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(s.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-alarm-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],["translate","",3,"color",4,"ngIf"],["translate",""],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"card"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange","click"],["color","primary","mode","ios","translate","",1,"toggle",3,"ngModel","ngModelChange"],["expand","block","translate","",1,"push-button",3,"routerLink"]],template:function(r,o){1&r&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",o.view===o.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.ho,i.w,i.YI,A.JJ,A.On,b.rH,u.Pi,Z.h,O.Ov]}),_})()},4403:(X,R,l)=>{l.d(R,{x:()=>_});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(717),Z=l(8513);function V(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function N(e,r){if(1&e&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,V,2,3,"h2",7),t.qZA(),t.GkF(8),t.qZA()()()),2&e){const o=r.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.ui.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function J(e,r){if(1&e&&(t.ynx(0),t.YNc(1,N,9,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function $(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function S(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function K(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function k(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function D(e,r){if(1&e&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,$,2,2,"p",0),t.YNc(9,S,2,1,"p",0),t.YNc(10,K,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,k,2,3,"h2",7),t.qZA()()()()),2&e){const o=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(o.ui.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function E(e,r){if(1&e&&(t.ynx(0),t.YNc(1,D,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function W(e,r){if(1&e&&(t.TgZ(0,"ion-col",16),t._UZ(1,"control-light-v2-view",17),t.qZA()),2&e){const o=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("control",o)("view",n.viewType.LIST_ITEM_POPUP)}}function B(e,r){if(1&e&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,W,2,2,"ion-col",15),t.qZA()()),2&e){const o=r.ngIf;t.xp6(3),t.Q6J("text_vm",o),t.xp6(2),t.Q6J("ngForOf",o.controls)}}function T(e,r){if(1&e&&(t.ynx(0),t.YNc(1,B,6,2,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}var g=l(9572).sprintf;let _=(()=>{var e;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.controls$,this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([n,a,m,c])=>this.updateVM(n,a,m,c))):console.error("Component 'control-central-light' not available for rendering.")}updateVM(n,a,m,c){if(!n)return;let p=c.find(Q=>Q.uuid===n.room&&Q.serialNr===n.serialNr),h=m.find(Q=>Q.uuid===n.category&&Q.serialNr===n.serialNr),d=n.details.controls.map(Q=>Q.uuid),v=a.filter(Q=>d.indexOf(Q.uuid)>-1),w=n.details.controls.length,L=0,x=0;v.forEach(Q=>{Q.states.activeMoods?778===Q.states.activeMoods[0]&&x++:L++});let P=w-x,C="",y=!1,U=v.sort((Q,H)=>this.getRoomName(c,Q.serialNr,Q.room).localeCompare(this.getRoomName(c,H.serialNr,H.room)));if(0==L)switch(P){case 0:C=this.translate.instant("All off"),y=!1;break;case 1:C=g(this.translate.instant("On in %s room"),1),y=!0;break;default:C=g(this.translate.instant("On in %s rooms"),P),y=!0}return{control:{...n,icon:{href:n.icon.href,color:y?"primary":"dark"}},controls:U,ui:{name:n.name,room:p.name,category:h.name,status:{text:C,color:M.c.getColor(y?"primary":"secondary")}}}}getRoomName(n,a,m){return n.find(c=>c.uuid===m&&c.serialNr===a).name}updateSegment(){}clickLightButton(n,a,m){m.preventDefault(),m.stopPropagation()}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(u.sK),t.Y36(s.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["control-central-light-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","view"]],template:function(n,a){1&n&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,T,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,b.h,Z.M,O.Ov]}),r})()},8759:(X,R,l)=>{l.d(R,{j:()=>n});var f=l(7027),Y=l(2572),I=l(7398),M=l(6814),t=l(6308),u=l(7658),s=l(6676),i=l(5879),A=l(9515),b=l(4898),Z=l(6223),V=l(6089),N=l(717);function J(a,m){if(1&a&&(i.TgZ(0,"h2"),i._uU(1),i.qZA()),2&a){const c=i.oxw().ngIf;i.Udp("color",c.ui.status.color),i.xp6(1),i.hij(" ",c.ui.status.text,"")}}function $(a,m){if(1&a&&(i.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),i._UZ(3,"ion-icon",5),i.TgZ(4,"ion-label",6)(5,"h1"),i._uU(6),i.qZA(),i.YNc(7,J,2,3,"h2",7),i.qZA()()()()),2&a){const c=m.ngIf;i.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),i.xp6(3),i.s9C("color",c.control.icon.color),i.s9C("src",c.control.icon.href),i.xp6(3),i.Oqu(c.control.name),i.xp6(1),i.Q6J("ngIf",""!==c.ui.status.text)}}function S(a,m){if(1&a&&(i.ynx(0),i.YNc(1,$,8,6,"ion-card",1),i.ALo(2,"async"),i.BQk()),2&a){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}function K(a,m){if(1&a&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&a){const c=i.oxw().ngIf;i.xp6(1),i.AsE("",c.ui.room," \u2022 ",c.ui.category,"")}}function k(a,m){if(1&a&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&a){const c=i.oxw().ngIf;i.xp6(1),i.Oqu(c.ui.room)}}function D(a,m){if(1&a&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&a){const c=i.oxw().ngIf;i.xp6(1),i.Oqu(c.ui.category)}}function E(a,m){if(1&a&&(i.TgZ(0,"h2"),i._uU(1),i.qZA()),2&a){const c=i.oxw().ngIf;i.Udp("color",c.ui.status.color),i.xp6(1),i.hij(" ",c.ui.status.text,"")}}function W(a,m){if(1&a&&(i.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),i._UZ(3,"ion-icon",5)(4,"ion-label"),i.qZA()(),i.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),i.YNc(8,K,2,2,"p",0),i.YNc(9,k,2,1,"p",0),i.YNc(10,D,2,1,"p",0),i.TgZ(11,"h1"),i._uU(12),i.qZA(),i.YNc(13,E,2,3,"h2",7),i.qZA()()()()),2&a){const c=m.ngIf,p=i.oxw(2);i.hYB("routerLink","",c.control.serialNr,"/",c.control.uuid,""),i.xp6(3),i.s9C("color",c.control.icon.color),i.s9C("src",c.control.icon.href),i.xp6(5),i.Q6J("ngIf","home"===p.key),i.xp6(1),i.Q6J("ngIf","room"===p.key),i.xp6(1),i.Q6J("ngIf","category"===p.key),i.xp6(2),i.Oqu(c.control.name),i.xp6(1),i.Q6J("ngIf",""!==c.ui.status.text)}}function B(a,m){if(1&a&&(i.ynx(0),i.YNc(1,W,14,9,"ion-card",8),i.ALo(2,"async"),i.BQk()),2&a){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}function T(a,m){if(1&a){const c=i.EpF();i.TgZ(0,"ion-button",17),i._uU(1),i.TgZ(2,"ion-alert",18),i.NdJ("didDismiss",function(h){i.CHM(c);const d=i.oxw().ngIf,v=i.oxw(2);return i.KtG(v.cancelTimer(h,d))}),i.qZA()()}if(2&a){const c=i.oxw().ngIf,p=i.oxw(2);i.xp6(1),i.hij(" ",c.ui.timer.text," "),i.xp6(1),i.MGl("header","",c.ui.timer.text,"?"),i.Q6J("buttons",p.cancelTimerButtons)}}function g(a,m){if(1&a){const c=i.EpF();i.TgZ(0,"ion-item",21)(1,"ion-toggle",22),i.NdJ("ngModelChange",function(h){i.CHM(c);const d=i.oxw(4);return i.KtG(d.output=h)}),i._uU(2,"Output"),i.qZA()(),i.TgZ(3,"ion-datetime",23,24),i.NdJ("ionChange",function(h){i.CHM(c);const d=i.oxw(2).ngIf,v=i.oxw(2);return i.KtG(v.dateChanged(h,d))}),i.TgZ(5,"span",25),i._uU(6,"Time"),i.qZA(),i.TgZ(7,"ion-buttons",26)(8,"ion-button",27),i.NdJ("click",function(){i.CHM(c);const h=i.oxw(4);return i.KtG(h.cancel())}),i._uU(9,"Cancel"),i.qZA(),i.TgZ(10,"ion-button",28),i.NdJ("click",function(){i.CHM(c);const h=i.oxw(4);return i.KtG(h.confirm())}),i._uU(11,"OK"),i.qZA()()()}if(2&a){const c=i.oxw(2).ngIf,p=i.oxw(2);i.xp6(1),i.Q6J("ngModel",p.output),i.xp6(2),i.s9C("locale",c.ui.calendar.locale),i.Q6J("ngModel",c.ui.calendar.datetime)}}function _(a,m){if(1&a&&(i.TgZ(0,"ion-button",19),i._uU(1),i.TgZ(2,"ion-popover",20),i.YNc(3,g,12,3,"ng-template"),i.qZA()()),2&a){const c=i.oxw().ngIf;i.xp6(1),i.hij(" ",c.ui.timer.text," ")}}function e(a,m){if(1&a&&(i.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),i._UZ(3,"card-text-view",14),i.qZA()(),i.TgZ(4,"ion-row")(5,"ion-col"),i.YNc(6,T,3,3,"ion-button",15),i.YNc(7,_,4,1,"ion-button",16),i.qZA()()()),2&a){const c=m.ngIf;i.xp6(3),i.Q6J("text_vm",c),i.xp6(3),i.Q6J("ngIf",c.ui.timer.enabled),i.xp6(1),i.Q6J("ngIf",!c.ui.timer.enabled)}}function r(a,m){if(1&a&&(i.ynx(0),i.YNc(1,e,8,3,"ion-grid",12),i.ALo(2,"async"),i.BQk()),2&a){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,c.vm$))}}var o=l(9572).sprintf;let n=(()=>{var a;class m{constructor(p,h){this.translate=p,this.controlService=h,this.buttonType=t.W,this.viewType=t.G,this.cancelTimerButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,Y.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,I.U)(([p,h,d])=>this.updateVM(p,h,d))):console.error("Component 'control-daytimer' not available for rendering.")}updateVM(p,h,d){let v=d.find(q=>q.uuid===p.room&&q.serialNr===p.serialNr),w=h.find(q=>q.uuid===p.category&&q.serialNr===p.serialNr),L=Number(p.states.value)||p.details.analog,x=s({h:(new Date).getHours(),s:(new Date).getMinutes()}),P="00:00",C="00:00";if(p.states.entriesAndDefaultValue){let q=p.states.entriesAndDefaultValue;q=q.replaceAll("}\n{","},\n{"),q=q.replace(/([a-zA-Z]+)(: )/gm,'"$1"$2'),q=q.replace(/(: )([a-zA-Z\-\d:]+)/gm,': "$2"');let lt=JSON.parse(q);if(Number(lt.entries)>0){let nt=lt.entry.filter(G=>G.mode===p.states.mode);for(let G=0;G<nt.length;G++){let j=nt[G];if(x.isAfter(s(j.to,"HH:mm"))&&(C=j.to),x.isBefore(s(j.from,"HH:mm"))&&(P=j.from),x.isAfter(s(j.from,"HH:mm"))&&x.isBefore(s(j.to,"HH:mm"))){C=j.from,P=j.to;break}}}}let y=Number(p.states.override)>0,U=p.details.analog?o(p.details.format,p.states.value):Number(p.states.value)?p.details.text.on:p.details.text.off,F=new M.uU("en-US");const Q=Date.now()+1e3*Number(p.states.override);let H=F.transform(Q,"dd.MM.yyyy HH:mm");return y?U+=" "+this.translate.instant("Till").toLowerCase()+" "+H:C!==P&&(U+=" "+this.translate.instant("From").toLowerCase()+" "+C+" "+this.translate.instant("Till").toLowerCase()+" "+P),null==this.output&&(this.output=!L),{control:{...p,icon:{href:p.icon.href,color:L?"primary":u.c.getColor("dark")}},ui:{name:p.name,room:v&&v.name?v.name:"unknown",category:w&&w.name?w.name:"unknown",status:{text:U,color:u.c.getColor(L?"primary":"secondary")},timer:{enabled:y,endTime:Number(p.states.override),text:y?"Stop timer":"Start timer"},calendar:{output:this.output,datetime:void 0,locale:this.translate.currentLang}}}}cancelTimer(p,h){"ok"===p.detail.role&&this.controlService.updateControl(h.control,"stopOverride")}cancel(){this.datetime.cancel(!0)}confirm(){this.datetime.confirm(!0)}dateChanged(p,h){h.ui.calendar.datetime=p.detail.value;let v=6e4*Math.round((new Date(h.ui.calendar.datetime).getTime()-Date.now())/6e4)/1e3,w=h.ui.calendar.output?"1":"0";if(!(v>10))return void(h.calendar.datetime=void 0);let x="startOverride/"+String(w)+"/"+String(v);this.controlService.updateControl(h.control,x)}}return(a=m).\u0275fac=function(p){return new(p||a)(i.Y36(A.sK),i.Y36(b.B))},a.\u0275cmp=i.Xpm({type:a,selectors:[["control-daytimer-view"]],viewQuery:function(p,h){if(1&p&&i.Gf(f.x4,5),2&p){let d;i.iGM(d=i.CRH())&&(h.datetime=d.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","stop-timer",4,"ngIf"],["class","push-button","expand","block","id","datetime-popover",4,"ngIf"],["expand","block","id","stop-timer",1,"push-button"],["trigger","stop-timer",3,"header","buttons","didDismiss"],["expand","block","id","datetime-popover",1,"push-button"],["trigger","datetime-popover","cssClass","width-100"],[1,"date-item"],["color","primary","mode","ios","translate","",1,"toggle-active",3,"ngModel","ngModelChange"],["size","cover",3,"locale","ngModel","ionChange"],["datetime",""],["slot","time-label","translate",""],["slot","buttons"],["color","primary","translate","",3,"click"],["color","primary",3,"click"]],template:function(p,h){1&p&&(i.YNc(0,S,3,3,"ng-container",0),i.YNc(1,B,3,3,"ng-container",0),i.YNc(2,r,3,3,"ng-container",0)),2&p&&(i.Q6J("ngIf",h.view===h.viewType.LIST_ITEM),i.xp6(1),i.Q6J("ngIf",h.view===h.viewType.FAVORITE),i.xp6(1),i.Q6J("ngIf",h.view===h.viewType.DETAILED))},dependencies:[M.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.ho,f.d8,f.w,f.QI,f.YI,Z.JJ,Z.On,V.rH,A.Pi,N.h,M.Ov],styles:["ion-popover.width-100[_ngcontent-%COMP%]{--width: 300px}.date-item[_ngcontent-%COMP%]{font-size:18px;margin:0}.toggle-active[_ngcontent-%COMP%]{padding:10px 10px 0}ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}"]}),m})()},3914:(X,R,l)=>{l.d(R,{p:()=>T});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(717);function Z(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function V(g,_){if(1&g&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function N(g,_){if(1&g&&(t.ynx(0),t.YNc(1,V,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function J(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function $(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function S(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function K(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function k(g,_){if(1&g&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,J,2,2,"p",0),t.YNc(9,$,2,1,"p",0),t.YNc(10,S,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,K,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function D(g,_){if(1&g&&(t.ynx(0),t.YNc(1,k,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function E(g,_){if(1&g&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()()()),2&g){const e=_.ngIf;t.xp6(3),t.Q6J("text_vm",e)}}function W(g,_){if(1&g&&(t.ynx(0),t.YNc(1,E,4,1,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}var B=l(9572).sprintf;let T=(()=>{var g;class _{constructor(r,o){this.translate=r,this.controlService=o,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([r,o,n])=>this.updateVM(r,o,n))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(r,o,n){let a=n.find(v=>v.uuid===r.room&&v.serialNr===r.serialNr),m=o.find(v=>v.uuid===r.category&&v.serialNr===r.serialNr),p="V ";"en"==this.translate.currentLang&&(p="C ");let h="P "+Number(B("%.2f",r.states.prodCurr)).toLocaleString(this.translate.currentLang)+" kW \u2022 "+p+Number(B("%.2f",r.states.consCurr)).toLocaleString(this.translate.currentLang)+" kW";return{control:{...r,icon:{href:"assets/icons/svg/leaf.svg",color:"primary"},states:{prodCurr:this.format(r.states.prodCurr,"kW"),prodCurrDay:this.format(r.states.prodCurrDay,"kWh"),prodCurrMonth:this.format(r.states.prodCurrMonth,"kWh"),prodCurrYear:this.format(r.states.prodCurrYear,"kWh"),prodTotal:this.format(r.states.prodTotal,"kWh"),consCurr:this.format(r.states.consCurr,"kW"),consCurrDay:this.format(r.states.consCurrDay,"kWh"),gridCurr:this.format(r.states.gridCurr,"kW"),batteryCurr:this.format(r.states.batteryCurr,"kW"),stateOfCharge:this.format(r.states.stateOfCharge,""),earningsDay:this.format(r.states.earningsDay,"euro"),earningsMonth:this.format(r.states.earningsMonth,"euro"),earningsYear:this.format(r.states.earningsYear,"euro"),earningsTotal:this.format(r.states.earningsTotal,"euro"),priceDelivery:this.format(r.states.priceDelivery,""),priceConsumption:this.format(r.states.priceConsumption,""),co2Factor:r.states.prodCurr.co2Factor,generatorType:r.states.prodCurr.generatorType,mode:r.states.mode,online:r.states.prodCurr.online}},ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:h,color:M.c.getColor("primary")}}}}format(r,o){let n=Number(r);return String(Number(B("%.2f",n)).toLocaleString(this.translate.currentLang))+" "+o}}return(g=_).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(s.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-fronius-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(r,o){1&r&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,W,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",o.view===o.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,b.h,O.Ov]}),_})()},689:(X,R,l)=>{l.d(R,{h:()=>T});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(717);function Z(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function V(g,_){if(1&g&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function N(g,_){if(1&g&&(t.ynx(0),t.YNc(1,V,8,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function J(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function $(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function S(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function K(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function k(g,_){if(1&g&&(t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.qZA()(),t.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),t.YNc(8,J,2,2,"p",0),t.YNc(9,$,2,1,"p",0),t.YNc(10,S,2,1,"p",0),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.YNc(13,K,2,3,"h2",7),t.qZA()()()()),2&g){const e=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(5),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function D(g,_){if(1&g&&(t.ynx(0),t.YNc(1,k,14,9,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function E(g,_){if(1&g&&(t.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",14),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"img",15),t.qZA()()()),2&g){const e=_.ngIf;t.xp6(3),t.Q6J("text_vm",e),t.xp6(3),t.Q6J("src",e.control.securedDetails.videoInfo.streamUrl,t.LSH)}}function W(g,_){if(1&g&&(t.ynx(0),t.YNc(1,E,7,2,"ion-grid",12),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}l(9572);let T=(()=>{var g;class _{constructor(r,o){this.translate=r,this.controlService=o,this.viewType=I.G}ngOnInit(){this.initVM(),this.videoSrc="https://192.168.1.200:4001/video.cgi"}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([r,o,n])=>this.updateVM(r,o,n))):console.error("Component 'control-intercom' not available for rendering.")}updateVM(r,o,n){if(!r)return;let a=n.find(p=>p.uuid===r.room&&p.serialNr===r.serialNr),m=o.find(p=>p.uuid===r.category&&p.serialNr===r.serialNr);return{control:r,ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:m&&m.name?m.name:"unknown",status:{text:"Intercom",color:M.c.getColor("primary")}}}}}return(g=_).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(s.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-intercom-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["width","100%",3,"src"]],template:function(r,o){1&r&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,W,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",o.view===o.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,b.h,O.Ov]}),_})()},6353:(X,R,l)=>{l.d(R,{p:()=>m});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6223),b=l(6089),Z=l(7855);const V=["thermostat"];let N=(()=>{var c;class p{constructor(d,v,w,L){this.translateService=d,this.controlService=v,this.renderer=w,this.storageService=L,this.onChange=new t.vpe,this.ambientTemperatureStr="",this.targetTemperatureStr=["",""],this.emitChange=!1,this.disabled=!0,this.ticks={points:[],pointsAmbient:[],pointsTarget:[],min:null,max:null,rangeValue:null,theta:null,degrees:null,offsetDegrees:null,outerRadius:null,innerRadius:null},this.svg={root:null,group:null,dial:null,tickArray:[],ring:null,touchArea:null,txtTarget:null,txtTemperature:null,txtTargetTemp:null,txtTargetTempDot:null,txtAmbientTemp:null,leaf:null,heating:null,cooling:null,txtAway:null,iconUp:null,iconDown:null,btnUp:null,btnDown:null,unit:null},this.props={height:"350px",width:"350px",numTicks:150,minValue:10,maxValue:30,away:!1,leaf:!1,is_heating:!1,is_cooling:!1,ambientTemperature:10,targetTemperature:10,hvacMode:"heating"},this.diameter=350,this.radius=this.diameter/2,this.ticks.rangeValue=this.props.maxValue-this.props.minValue,this.ticks.outerRadius=this.diameter/30,this.ticks.innerRadius=this.diameter/8,this.ticks.degrees=300,this.ticks.offsetDegrees=180-(360-this.ticks.degrees)/2,this.ticks.theta=this.ticks.degrees/this.props.numTicks,this.ticks.points=[[this.radius-1,this.ticks.outerRadius],[this.radius+1,this.ticks.outerRadius],[this.radius+1,this.ticks.innerRadius],[this.radius-1,this.ticks.innerRadius]],this.ticks.pointsTarget=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius+20],[this.radius-2.5,this.ticks.innerRadius+20]],this.ticks.pointsAmbient=[[this.radius-2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.outerRadius],[this.radius+2.5,this.ticks.innerRadius],[this.radius-2.5,this.ticks.innerRadius]],this.storageSubscription=this.storageService.settings$.subscribe(x=>{x&&x.app&&x.app.darkTheme&&(this.darkTheme=x.app.darkTheme)})}ngOnChanges(){this.props.ambientTemperature=Number(this.tempActual),this.props.targetTemperature=Number(this.tempTarget);let d=Number(this.mode),v=Number(this.preset);this.disabled=5!=d&&6!=d,this.props.leaf=0==v,this.render()}ngOnInit(){this.styles=this.getStyles(),this.initSVG(),this.render(),this.svg.touchArea.addEventListener("mouseup",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousedown",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("click",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("touchend",this.dragEnd.bind(this)),this.svg.touchArea.addEventListener("mousemove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.touchArea.addEventListener("touchmove",this.dragMove.bind(this)),this.svg.btnDown.addEventListener("click",this.btnDown.bind(this)),this.svg.btnDown.addEventListener("touchstart",this.btnDownStart.bind(this)),this.svg.btnDown.addEventListener("touchend",this.btnDownEnd.bind(this)),this.svg.btnUp.addEventListener("click",this.btnUp.bind(this)),this.svg.btnUp.addEventListener("touchstart",this.btnUpStart.bind(this)),this.svg.btnUp.addEventListener("touchend",this.btnUpEnd.bind(this))}ngOnDestroy(){this.storageSubscription.unsubscribe()}btnUp(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)+.5,this.props.targetTemperature>this.props.maxValue&&(this.props.targetTemperature=this.props.maxValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDown(d){this.disabled||(this.props.targetTemperature=Number(this.props.targetTemperature)-.5,this.props.targetTemperature<this.props.minValue&&(this.props.targetTemperature=this.props.minValue),this.render(),this.emitChange&&this.onChange.emit(this.props.targetTemperature))}btnDownStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnDown(d)},80))}btnUpStart(d){this.disabled||(this.emitChange=!1,this.interval=setInterval(()=>{this.btnUp(d)},80))}btnDownEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}btnUpEnd(d){this.disabled||(this.emitChange=!0,clearInterval(this.interval))}getStyles(){return{svg:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},dial:{fill:"transparent",WebkitTransition:"fill 0.5s",transition:"fill 0.5s"},ring:{fill:"transparent",stroke:this.darkTheme?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.9)","stroke-width":"40",filter:"drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.2))"},description:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"18px","font-weight":"normal",visibility:this.props.away?"hidden":"visible"},targettemp:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"98px","letter-spacing":"0.01em","font-weight":"bold",visibility:this.props.away?"hidden":"visible"},targettempdot:{fill:this.darkTheme?"white":"#666666","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"40px","font-weight":"bold"},ambienttemp:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"18px","letter-spacing":"0.01em","font-weight":"bold"},away:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","font-family":"Helvetica, sans-serif","alignment-baseline":"central","font-size":"72px","font-weight":"bold",opacity:this.props.away?1:0,"pointer-events":"none"},leaf:{fill:"#13EB13",opacity:this.props.leaf?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},heating:{fill:"#e73246",opacity:this.props.is_heating?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},cooling:{fill:"#00b0db",opacity:this.props.is_cooling?1:0,visibility:this.props.away?"hidden":"visible","pointer-events":"none",style:"transition: opacity 0.5s"},unit:{fill:this.darkTheme?"white":"#2c2c2c","text-anchor":"middle","alignment-baseline":"central","font-size":"20px"}}}pointsToPath(d){return[d.map((v,w)=>[w>0?"L":"M",v[0]," ",v[1]].join("")).join(" "),"Z"].join("")}rotatePoint(d,v,w){const L=v*Math.PI/180,x=d[0]-w[0],P=d[1]-w[1];return[x*Math.cos(L)-P*Math.sin(L)+w[0],x*Math.sin(L)+P*Math.cos(L)+w[1]]}rotatePoints(d,v,w){const L=this;return d.map(x=>L.rotatePoint(x,v,w))}restrictToRange(d,v,w){return d<v?v:d>w?w:d}scalePoint(d,v){return isNaN(d)?d:d*v}createSVGElement(d,v,w){let L=document.createElementNS("http://www.w3.org/2000/svg",d);return this.attr(L,v),w&&w.appendChild(L),L}createSVGTextElement(d,v,w){let L=this.createSVGElement("text",v,w);return L.appendChild(document.createTextNode(d)),L}attr(d,v){for(let w in v)"object"==typeof v[w]&&null!==v[w]?this.attr(d,v[w]):d.setAttribute(w,v[w])}setMixMaxRange(){let d,v;this.props.away?(d=this.props.ambientTemperature,v=d):(d=Math.min(this.props.ambientTemperature,this.props.targetTemperature),v=Math.max(this.props.ambientTemperature,this.props.targetTemperature)),this.ticks.min=this.restrictToRange(Math.round((d-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1),this.ticks.max=this.restrictToRange(Math.round((v-this.props.minValue)/this.ticks.rangeValue*this.props.numTicks),0,this.props.numTicks-1)}initSVG(){const d=this;this.setMixMaxRange(),this.svg.tickArray=[],this.svg.root=this.createSVGElement("svg",{width:this.props.width,height:this.props.height,viewBox:"0 0 "+this.diameter+" "+this.diameter,style:this.styles.svg},this.thermostat.nativeElement),this.svg.ring=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:.842*this.radius,style:this.styles.ring},this.svg.root),this.svg.group=this.createSVGElement("g",{},this.svg.root);for(let L=0;L<this.props.numTicks;L++){const x=this.createSVGElement("path",{key:["tick-",L].join(""),d:this.pointsToPath(this.rotatePoints(this.ticks.points,L*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:"rgba(255, 255, 255, 0.3)"}},this.svg.group);this.svg.tickArray.push(x)}this.svg.dial=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:this.styles.dial},this.svg.root),this.svg.touchArea=this.createSVGElement("circle",{cx:this.radius,cy:this.radius,r:this.radius,style:{fill:"transparent"}},this.svg.root),this.svg.txtTarget=this.createSVGTextElement(this.translateService.instant("Target"),{x:this.radius,y:this.radius-this.radius/2.2,style:this.styles.description},this.svg.root),this.svg.txtTemperature=this.createSVGTextElement(this.translateService.instant("Temperature").toLowerCase(),{x:this.radius,y:this.radius-this.radius/3,style:this.styles.description},this.svg.root),this.svg.txtTargetTemp=this.createSVGTextElement(this.targetTemperatureStr[0],{x:this.radius,y:this.radius,style:this.styles.targettemp},this.svg.root),this.svg.txtTargetTempDot=this.createSVGTextElement(this.targetTemperatureStr[1],{x:this.radius+this.radius/2.5,y:this.radius-this.radius/8.5,style:this.styles.targettempdot},this.svg.root),this.svg.txtAmbientTemp=this.createSVGTextElement(this.ambientTemperatureStr,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp},this.svg.root),this.svg.txtAway=this.createSVGTextElement("AWAY",{x:this.radius,y:this.radius,style:this.styles.away},this.svg.root);const v=this.radius/5/100;let w=["M",3,84,"c",24,17,51,18,73,-6,"C",100,52,100,22,100,4,"c",-13,15,-37,9,-70,19,"C",4,32,0,63,0,76,"c",6,-7,18,-17,33,-23,24,-9,34,-9,48,-20,-9,10,-20,16,-43,24,"C",22,63,8,78,3,84,"z"].map(L=>d.scalePoint(L,v)).join(" ");this.translate=[this.radius-100*v*.5,1.4*this.radius],this.svg.leaf=this.createSVGElement("path",{d:w,style:this.styles.leaf,transform:"translate("+this.translate[0]+","+this.translate[1]+")"},this.svg.root),this.svg.heating=this.createSVGElement("path",{d:"M394.23 197.56a300.43 300.43 0 00-53.37-90C301.2 61.65 249.05 32 208 32a16 16 0 00-15.48 20c13.87 53-14.88 97.07-45.31 143.72C122 234.36 96 274.27 96 320c0 88.22 71.78 160 160 160s160-71.78 160-160c0-43.3-7.32-84.49-21.77-122.44zm-105.9 221.13C278 429.69 265.05 432 256 432s-22-2.31-32.33-13.31S208 390.24 208 368c0-25.14 8.82-44.28 17.34-62.78 4.95-10.74 10-21.67 13-33.37a8 8 0 0112.49-4.51A126.48 126.48 0 01275 292c18.17 24 29 52.42 29 76 0 22.24-5.42 39.77-15.67 50.69z",style:this.styles.heating,transform:"scale(0.05) translate(1700, 3000)"},this.svg.root),this.svg.cooling=this.createSVGElement("path",{d:"M461 349l-34-19.64a89.53 89.53 0 0120.94-16 22 22 0 00-21.28-38.51 133.62 133.62 0 00-38.55 32.1L300 256l88.09-50.86a133.46 133.46 0 0038.55 32.1 22 22 0 1021.28-38.51 89.74 89.74 0 01-20.94-16l34-19.64A22 22 0 10439 125l-34 19.63a89.74 89.74 0 01-3.42-26.15A22 22 0 00380 96h-.41a22 22 0 00-22 21.59 133.61 133.61 0 008.5 49.41L278 217.89V116.18a133.5 133.5 0 0047.07-17.33 22 22 0 00-22.71-37.69A89.56 89.56 0 01278 71.27V38a22 22 0 00-44 0v33.27a89.56 89.56 0 01-24.36-10.11 22 22 0 10-22.71 37.69A133.5 133.5 0 00234 116.18v101.71L145.91 167a133.61 133.61 0 008.52-49.43 22 22 0 00-22-21.59H132a22 22 0 00-21.59 22.41 89.74 89.74 0 01-3.41 26.19L73 125a22 22 0 10-22 38.1l34 19.64a89.74 89.74 0 01-20.94 16 22 22 0 1021.28 38.51 133.62 133.62 0 0038.55-32.1L212 256l-88.09 50.86a133.62 133.62 0 00-38.55-32.1 22 22 0 10-21.28 38.51 89.74 89.74 0 0120.94 16L51 349a22 22 0 1022 38.1l34-19.63a89.74 89.74 0 013.42 26.15A22 22 0 00132 416h.41a22 22 0 0022-21.59 133.61 133.61 0 00-8.5-49.41L234 294.11v101.71a133.5 133.5 0 00-47.07 17.33 22 22 0 1022.71 37.69A89.56 89.56 0 01234 440.73V474a22 22 0 0044 0v-33.27a89.56 89.56 0 0124.36 10.11 22 22 0 0022.71-37.69A133.5 133.5 0 00278 395.82V294.11L366.09 345a133.61 133.61 0 00-8.52 49.43 22 22 0 0022 21.59h.43a22 22 0 0021.59-22.41 89.74 89.74 0 013.41-26.19l34 19.63A22 22 0 10461 349z",style:this.styles.cooling,transform:"scale(0.05) translate(1700, 3600)"},this.svg.root),this.svg.iconDown=this.createSVGElement("path",{d:"M 7 12 l 9 9 9-9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(125, 299)"},this.svg.root),this.svg.iconUp=this.createSVGElement("path",{d:"M 7 12 l 9-9 9 9","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",stroke:this.darkTheme?"#fff":"#666666",fill:"transparent",transform:"translate(200, 307)"},this.svg.root),this.svg.btnDown=this.createSVGElement("circle",{cx:140,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.btnUp=this.createSVGElement("circle",{cx:215,cy:315,r:30,style:{fill:"transparent"}},this.svg.root),this.svg.unit=this.createSVGTextElement("\xb0C",{x:this.radius+70,y:this.radius+30,style:this.styles.unit},this.svg.root)}render(){if(!this.svg.root)return;this.setMixMaxRange(),this.svg.tickArray.forEach((x,P)=>{let C=this.props.targetTemperature>this.props.ambientTemperature?P===this.ticks.max:P===this.ticks.min,U=P>=this.ticks.min&&P<=this.ticks.max;this.attr(x,{d:this.pointsToPath(this.rotatePoints(C||(this.props.targetTemperature>this.props.ambientTemperature?P===this.ticks.min:P===this.ticks.max)?C?this.ticks.pointsTarget:this.ticks.pointsAmbient:this.ticks.points,P*this.ticks.theta-this.ticks.offsetDegrees,[this.radius,this.radius])),style:{fill:this.darkTheme?U?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.3)":U?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.2)"}})});const d=[this.radius,this.ticks.outerRadius-(this.ticks.outerRadius-this.ticks.innerRadius)/2],v=this.restrictToRange(this.props.ambientTemperature,this.props.minValue,this.props.maxValue);let w=this.ticks.degrees*(v-this.props.minValue)/this.ticks.rangeValue-this.ticks.offsetDegrees;v>this.props.targetTemperature?w+=9:w-=9,this.ambientPosition=this.rotatePoint(d,w,[this.radius,this.radius]),this.ambientTemperatureStr=Number(this.props.ambientTemperature).toFixed(1),this.targetTemperatureStr=String(Math.round(2*this.props.targetTemperature)/2).split("."),this.svg.txtTargetTemp.textContent=this.targetTemperatureStr[0],this.svg.txtTargetTempDot.textContent=this.targetTemperatureStr[1],this.svg.txtAmbientTemp.textContent=this.ambientTemperatureStr,this.attr(this.svg.txtAmbientTemp,{x:this.ambientPosition&&this.ambientPosition[0]?this.ambientPosition[0]:"",y:this.ambientPosition&&this.ambientPosition[1]?this.ambientPosition[1]:"",style:this.styles.ambienttemp});let L=this.getTextSize(this.svg.txtTargetTemp);this.attr(this.svg.txtTargetTempDot,{x:175+L.width/2+12,y:175-L.height/2+39}),this.disabled?(this.attr(this.svg.iconDown,{style:{display:"none"}}),this.attr(this.svg.iconUp,{style:{display:"none"}}),this.attr(this.svg.btnDown,{style:{display:"none"}}),this.attr(this.svg.btnUp,{style:{display:"none"}})):(this.attr(this.svg.iconDown,{style:{display:"true"}}),this.attr(this.svg.iconUp,{style:{display:"true"}}),this.attr(this.svg.btnDown,{style:{display:"true"}}),this.attr(this.svg.btnUp,{style:{display:"true"}})),this.attr(this.svg.leaf,this.props.leaf?{style:{opacity:1}}:{style:{opacity:0}})}eventPosition(d){let v=this.svg.touchArea.getBoundingClientRect(),w=v.left+v.width/2,L=v.top+v.height/2;return d.targetTouches&&d.targetTouches.length?[w-d.targetTouches[0].clientX,L-d.targetTouches[0].clientY]:[w-d.x,L-d.y]}calcAngleDegrees(d,v){let w=180*Math.atan2(v,d)/Math.PI+(360-this.ticks.degrees);w<0&&(w+=360),w<=this.ticks.degrees&&(this.props.targetTemperature=w/this.ticks.degrees*(this.props.maxValue-this.props.minValue)+this.props.minValue,this.props.targetTemperature=Math.round(2*this.props.targetTemperature)/2,this.render())}dragEnd(d){if(this.disabled)return;let v=this.eventPosition(d);this.calcAngleDegrees(v[0],v[1]),this.onChange.emit(this.props.targetTemperature)}dragMove(d){if(this.disabled)return;d.preventDefault();let v=this.eventPosition(d);this.calcAngleDegrees(v[0],v[1])}getTextSize(d){const v=d.cloneNode(!0),w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.appendChild(v),document.body.appendChild(w);const{x:L,y:x,width:P,height:C}=v.getBBox();return document.body.removeChild(w),{x:L,y:x,width:P,height:C}}}return(c=p).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(s.B),t.Y36(t.Qsj),t.Y36(Z.V1))},c.\u0275cmp=t.Xpm({type:c,selectors:[["element-thermostat-view"]],viewQuery:function(d,v){if(1&d&&t.Gf(V,7),2&d){let w;t.iGM(w=t.CRH())&&(v.thermostat=w.first)}},inputs:{tempActual:"tempActual",tempTarget:"tempTarget",mode:"mode",preset:"preset"},outputs:{onChange:"onChange"},features:[t.TTD],decls:3,vars:0,consts:[[2,"display","flex","justify-content","center"],["thermostat",""]],template:function(d,v){1&d&&(t.TgZ(0,"div",0),t._UZ(1,"div",null,1),t.qZA())}}),p})();function J(c,p){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function $(c,p){if(1&c&&(t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()(),t.TgZ(9,"ion-label",8)(10,"h1"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,J,3,5,"h2",9),t.qZA()()()()),2&c){const h=p.ngIf;t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(3),t.Oqu(t.lcZ(12,6,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function S(c,p){if(1&c&&(t.ynx(0),t.YNc(1,$,14,8,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function K(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.AsE("",h.ui.room," \u2022 ",h.ui.category,"")}}function k(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.room)}}function D(c,p){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&c){const h=t.oxw().ngIf;t.xp6(1),t.Oqu(h.ui.category)}}function E(c,p){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().ngIf;t.Udp("color",h.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,h.ui.status.text),"")}}function W(c,p){if(1&c&&(t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4)(3,"div",5)(4,"div")(5,"span",6),t._uU(6),t.qZA(),t.TgZ(7,"span",7),t._uU(8),t.qZA()()()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",13),t.YNc(12,K,2,2,"p",0),t.YNc(13,k,2,1,"p",0),t.YNc(14,D,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,E,3,5,"h2",9),t.qZA()()()()),2&c){const h=p.ngIf,d=t.oxw(2);t.hYB("routerLink","",h.control.serialNr,"/",h.control.uuid,""),t.xp6(6),t.Oqu(h.ui.icon.tempBase),t.xp6(2),t.Oqu(h.ui.icon.tempDec),t.xp6(4),t.Q6J("ngIf","home"===d.key),t.xp6(1),t.Q6J("ngIf","room"===d.key),t.xp6(1),t.Q6J("ngIf","category"===d.key),t.xp6(2),t.Oqu(t.lcZ(17,9,h.ui.name)),t.xp6(2),t.Q6J("ngIf",""!==h.ui.status.text)}}function B(c,p){if(1&c&&(t.ynx(0),t.YNc(1,W,19,11,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}function T(c,p){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.Oqu(t.lcZ(2,2,h.name))}}function g(c,p){if(1&c&&(t.ynx(0),t.YNc(1,T,3,4,"ion-select-option",22),t.BQk()),2&c){const h=p.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function _(c,p){if(1&c&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&c){const h=t.oxw(2).$implicit,d=t.oxw().ngIf;t.xp6(1),t.AsE(" (",h.abs," ",d.ui.tempUnit,")")}}function e(c,p){if(1&c&&(t.TgZ(0,"ion-select-option",23),t._uU(1),t.ALo(2,"translate"),t.YNc(3,_,2,2,"span",0),t.qZA()),2&c){const h=t.oxw().$implicit;t.Q6J("value",h.name),t.xp6(1),t.hij("",t.lcZ(2,3,h.name)," "),t.xp6(2),t.Q6J("ngIf",7!=h.id)}}function r(c,p){if(1&c&&(t.ynx(0),t.YNc(1,e,4,5,"ion-select-option",22),t.BQk()),2&c){const h=p.$implicit;t.xp6(1),t.Q6J("ngIf",h.show)}}function o(c,p){if(1&c){const h=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col")(3,"element-thermostat-view",16),t.NdJ("onChange",function(v){const L=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setTargetTemperature(L,v))}),t.qZA()()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-card",17)(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-select",18,19),t.NdJ("ionChange",function(v){const L=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setOperatingMode(L,v))}),t.ALo(11,"translate"),t.YNc(12,g,2,1,"ng-container",20),t.qZA()()()()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-card",17)(16,"ion-card-content",3)(17,"ion-item",4)(18,"ion-select",18,21),t.NdJ("ionChange",function(v){const L=t.CHM(h).ngIf,x=t.oxw(2);return t.KtG(x.setTemperaturePreset(L,v))}),t.ALo(20,"translate"),t.YNc(21,r,2,1,"ng-container",20),t.qZA()()()()()()()}if(2&c){const h=p.ngIf,d=t.oxw(2);t.xp6(3),t.s9C("tempActual",h.ui.tempActual),t.s9C("tempTarget",h.ui.tempTarget),t.s9C("mode",h.ui.mode),t.s9C("preset",h.ui.preset),t.xp6(6),t.s9C("label",d.labelMode),t.Q6J("cancelText",t.lcZ(11,14,"Cancel"))("interfaceOptions",d.selectOperatingMode)("ngModel",h.ui.modeList[h.ui.mode].name),t.xp6(3),t.Q6J("ngForOf",h.ui.modeList),t.xp6(6),t.s9C("label",d.labelTemperature),t.Q6J("cancelText",t.lcZ(20,16,"Cancel"))("interfaceOptions",d.selectTemperaturePreset)("ngModel",h.ui.status.text),t.xp6(3),t.Q6J("ngForOf",h.ui.presetList)}}function n(c,p){if(1&c&&(t.ynx(0),t.YNc(1,o,22,18,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&c){const h=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,h.vm$))}}var a=l(9572).sprintf;let m=(()=>{var c;class p{constructor(d,v){this.translate=d,this.controlService=v,this.viewType=I.G,this.ircModesDefaults=[{id:0,name:"Automatic",show:!0},{id:1,name:"Automatic (currently heating)",show:!1},{id:2,name:"Automatic (currently cooling)",show:!1},{id:3,name:"Automatic heating",show:!0},{id:4,name:"Automatic cooling",show:!0},{id:5,name:"Manual heating",show:!0},{id:6,name:"Manual cooling",show:!0}],this.temperatureModesDefaults=[{id:0,name:"Economy",value:null,abs:null,corr:1,show:!0},{id:1,name:"Comfort heating",value:null,abs:null,corr:0,show:!0},{id:2,name:"Comfort cooling",value:null,abs:null,corr:0,show:!0},{id:3,name:"Empty house",value:null,abs:null,corr:0,show:!0},{id:4,name:"Heat protection",value:null,abs:null,corr:0,show:!0},{id:5,name:"Increased heat",value:null,abs:null,corr:1,show:!0},{id:6,name:"Party",value:null,abs:null,corr:1,show:!0},{id:7,name:"Manual",value:null,abs:null,corr:0,show:!0}],this.selectTemperaturePreset={header:this.translate.instant("Temperature preset"),cssClass:"actionsheet"},this.selectOperatingMode={header:this.translate.instant("Operating mode"),cssClass:"actionsheet"},this.labelTemperature=this.translate.instant("Temperature"),this.labelMode=this.translate.instant("Mode")}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([d,v,w])=>this.updateVM(d,v,w))):console.error("Control component not available for rendering.")}updateVM(d,v,w){let L=w.find(z=>z.uuid===d.room&&z.serialNr===d.serialNr),x=v.find(z=>z.uuid===d.category&&z.serialNr===d.serialNr),P=[...this.temperatureModesDefaults],C=[...this.ircModesDefaults],y=["",""],U=d.states.mode,F=1==U||3==U||5==U?1:2;d.states.tempActual&&(y=a("%.1f",d.states.tempActual).split("."),y[1]="."+y[1]);let Q=d.details.temperatures;P.forEach((z,tt)=>{if((Q[tt]&&Q[tt].isAbsolute||7==tt)&&(z.corr=0,z.value=Number(tt<7?d.states.temperatures[tt]:d.states.tempTarget),z.abs=z.value),Q[tt]&&!Q[tt].isAbsolute){let rt=-1;5==tt&&(rt=1),0==tt&&2==F&&(rt=1),z.corr=rt,z.value=Number(d.states.temperatures[tt]),z.abs=Number(d.states.temperatures[F])+rt*Number(d.states.temperatures[tt])}}),C[0].name=!d.states.mode||1!=d.states.mode&&2!=d.states.mode?"Automatic":C[d.states.mode].name;let H=Object.keys(d.subControls),ot=null;d.subControls[H[0]].states.value&&(ot=d.subControls[H[0]].states.value);let q=P.findIndex(z=>z.id===3-F);P[q].show=!1;let lt=P,nt=lt.find(z=>z.id==ot),G=nt&&nt.id?nt.id:0;return{control:d,ui:{name:this.translate.instant("Thermostat"),room:L&&L.name?L.name:"unknown",category:x&&x.name?x.name:"unknown",tempTarget:d.states.tempTarget,tempActual:d.states.tempActual,tempUnit:"\xb0C",modeList:C,mode:d.states.mode?d.states.mode:0,presetList:lt,preset:G,icon:{tempBase:y[0],tempDec:y[1]},status:{text:ot?nt.name:"unknown",color:M.c.getColor(G>0?"primary":"secondary")}}}}setOperatingMode(d,v){let w=d.ui.modeList.find(L=>L.name==v.detail.value);w&&w.id!=d.ui.mode&&this.controlService.updateControl(d.control,"mode/"+w.id)}setTemperaturePreset(d,v){let w=d.ui.presetList.find(L=>L.name==v.detail.value);if(w&&w.id!=d.ui.preset){let L="starttimer/"+String(w.id)+"/60";this.controlService.updateControl(d.control,L)}}setTargetTemperature(d,v){let w=Math.round(2*v)/2,L="settemp/7/"+String(w);this.controlService.updateControl(d.control,L)}}return(c=p).\u0275fac=function(d){return new(d||c)(t.Y36(u.sK),t.Y36(s.B))},c.\u0275cmp=t.Xpm({type:c,selectors:[["control-irc-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon","text-icon"],[2,"font-size","22px"],[2,"font-size","14px"],[1,"label"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"tempActual","tempTarget","mode","preset","onChange"],[1,"card"],["interface","action-sheet","hidden","true",1,"select-no-icon",3,"label","cancelText","interfaceOptions","ngModel","ionChange"],["modes",""],[4,"ngFor","ngForOf"],["presets",""],[3,"value",4,"ngIf"],[3,"value"]],template:function(d,v){1&d&&(t.YNc(0,S,3,3,"ng-container",0),t.YNc(1,B,3,3,"ng-container",0),t.YNc(2,n,3,3,"ng-container",0)),2&d&&(t.Q6J("ngIf",v.view===v.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",v.view===v.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",v.view===v.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.Ie,i.Q$,i.Nd,i.t9,i.n0,i.QI,i.YI,A.JJ,A.On,b.rH,N,O.Ov,u.X$]}),p})()},267:(X,R,l)=>{l.d(R,{f:()=>g});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089);let b=(()=>{var _;class e{constructor(o,n){this.gestureCtrl=o,this.onStart=new t.vpe,this.onEnd=new t.vpe,this.nativeElement=n.nativeElement}ngOnInit(){this.pressGesture=this.gestureCtrl.create({gestureName:"long-press",el:this.nativeElement,threshold:0,onStart:o=>{this.delay=700,this.endDelay=700,this.onStartTimer(),this.onStart.emit(o.event)},onEnd:o=>{this.onEndTimer(o.event)}}),this.pressGesture.enable()}onStartTimer(){setTimeout(()=>{this.endDelay=0},this.delay)}onEndTimer(o){setTimeout(()=>{this.onEnd.emit(o)},this.endDelay)}}return(_=e).\u0275fac=function(o){return new(o||_)(t.Y36(i.TH),t.Y36(t.SBq))},_.\u0275dir=t.lG2({type:_,selectors:[["","long-press",""]],outputs:{onStart:"onStart",onEnd:"onEnd"}}),e})();var Z=l(717);function V(_,e){if(1&_&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function N(_,e){if(1&_){const r=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,V,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,m,n))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,m,n))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&_){const r=e.ngIf;t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(3),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function J(_,e){if(1&_&&(t.ynx(0),t.YNc(1,N,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function $(_,e){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function S(_,e){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.room)}}function K(_,e){if(1&_&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.xp6(1),t.Oqu(r.ui.category)}}function k(_,e){if(1&_&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&_){const r=t.oxw().ngIf;t.Udp("color",r.ui.status.color),t.xp6(1),t.hij(" ",r.ui.status.text,"")}}function D(_,e){if(1&_){const r=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN,m,n))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP,m,n))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,$,2,2,"p",0),t.YNc(13,S,2,1,"p",0),t.YNc(14,K,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,k,2,3,"h2",7),t.qZA()()()()}if(2&_){const r=e.ngIf,o=t.oxw(2);t.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),t.xp6(3),t.s9C("color",r.control.icon.color),t.s9C("src",r.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===o.key),t.xp6(1),t.Q6J("ngIf","room"===o.key),t.xp6(1),t.Q6J("ngIf","category"===o.key),t.xp6(2),t.Oqu(r.control.name),t.xp6(1),t.Q6J("ngIf",""!==r.ui.status.text)}}function E(_,e){if(1&_&&(t.ynx(0),t.YNc(1,D,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}function W(_,e){if(1&_){const r=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("onStart",function(){const a=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.DOWN,a,null))})("onEnd",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.DOWN_OFF,m,n))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("onStart",function(){const a=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.UP,a,null))})("onEnd",function(n){const m=t.CHM(r).ngIf,c=t.oxw(2);return t.KtG(c.clickButton(c.buttonType.UP_OFF,m,n))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.FULL_CLOSE,a,null))}),t.TgZ(18,"ion-label",19)(19,"h1",20),t._uU(20,"Fully close"),t.qZA()()()(),t.TgZ(21,"ion-col")(22,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.FULL_OPEN,a,null))}),t.TgZ(23,"ion-label",19)(24,"h1",20),t._uU(25,"Fully open"),t.qZA()()()()(),t.TgZ(26,"ion-row")(27,"ion-col")(28,"ion-button",21),t.NdJ("click",function(){const a=t.CHM(r).ngIf,m=t.oxw(2);return t.KtG(m.clickButton(m.buttonType.SHADE,a,null))}),t.TgZ(29,"ion-label",19)(30,"h1",20),t._uU(31,"Shade"),t.qZA()()()()()()}if(2&_){const r=e.ngIf;t.xp6(3),t.Q6J("text_vm",r)}}function B(_,e){if(1&_&&(t.ynx(0),t.YNc(1,W,32,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&_){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.vm$))}}var T=l(9572).sprintf;let g=(()=>{var _;class e{constructor(o,n){this.translate=o,this.controlService=n,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([o,n,a])=>this.updateVM(o,n,a))):console.error("Component 'control-jalousie' not available for rendering.")}updateVM(o,n,a){let m=a.find(v=>v.uuid===o.room&&v.serialNr===o.serialNr),c=n.find(v=>v.uuid===o.category&&v.serialNr===o.serialNr),p=100*o.states.position,h=T("%1.0f%% ",p)+this.translate.instant("Closed").toLowerCase();return p<1&&(h=this.translate.instant("Opened")),p>99&&(h=this.translate.instant("Closed")),{control:{...o,icon:{href:o.icon.href,color:p>0?"primary":"dark"}},ui:{name:o.name,room:m&&m.name?m.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:h,color:M.c.getColor(p>0?"primary":"secondary")}}}}clickButton(o,n,a){switch(a&&(a.preventDefault(),a.stopPropagation()),o){case I.W.UP:this.controlService.updateControl(n.control,"up");break;case I.W.UP_OFF:this.controlService.updateControl(n.control,"UpOff");break;case I.W.DOWN:this.controlService.updateControl(n.control,"down");break;case I.W.DOWN_OFF:this.controlService.updateControl(n.control,"DownOff");break;case I.W.FULL_OPEN:this.controlService.updateControl(n.control,"FullUp");break;case I.W.FULL_CLOSE:this.controlService.updateControl(n.control,"FullDown");break;case I.W.SHADE:this.controlService.updateControl(n.control,"shade")}}}return(_=e).\u0275fac=function(o){return new(o||_)(t.Y36(u.sK),t.Y36(s.B))},_.\u0275cmp=t.Xpm({type:_,selectors:[["control-jalousie-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block","long-press","",1,"push-button",3,"onStart","onEnd"],[1,"label"],["translate",""],["expand","block",1,"push-button",3,"click"]],template:function(o,n){1&o&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&o&&(t.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,u.Pi,b,Z.h,O.Ov]}),e})()},8513:(X,R,l)=>{l.d(R,{M:()=>L});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6223),b=l(6089),Z=l(2571),V=l(7383);function N(x,P){if(1&x){const C=t.EpF();t.TgZ(0,"ion-card",1)(1,"ion-card-content",2)(2,"ion-item",3)(3,"ion-toggle",4),t.NdJ("click",function(U){const Q=t.CHM(C).ngIf,H=t.oxw();return t.KtG(H.clickToggle(Q,U))}),t._uU(4),t.qZA()()()()}if(2&x){const C=P.ngIf;t.xp6(3),t.Q6J("ngModel",C.ui.toggle),t.xp6(1),t.hij(" ",C.ui.name," ")}}let J=(()=>{var x;class P{constructor(y,U){this.translate=y,this.controlService=U}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.subControl&&null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.getSubControl$(this.control.serialNr,this.control.uuid,this.subControl.uuid)]).pipe((0,Y.U)(([y,U])=>this.updateVM(y,U))):console.error("SubControl component 'card-switch' not available for rendering.")}updateVM(y,U){let F="1"===U.states.active;return{control:y,subControl:U,ui:{name:U.name,status:{text:this.translate.instant(F?"On":"Off"),color:M.c.getColor(F?"primary":"secondary")},toggle:F}}}clickToggle(y,U){U.preventDefault(),U.stopPropagation(),this.controlService.updateControl(y.subControl,y.ui.toggle?"Off":"On")}}return(x=P).\u0275fac=function(y){return new(y||x)(t.Y36(u.sK),t.Y36(s.B))},x.\u0275cmp=t.Xpm({type:x,selectors:[["card-switch-view"]],inputs:{control:"control",subControl:"subControl"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"item"],["color","primary","mode","ios",1,"toggle",3,"ngModel","click"]],template:function(y,U){1&y&&(t.YNc(0,N,5,2,"ion-card",0),t.ALo(1,"async")),2&y&&t.Q6J("ngIf",t.lcZ(1,1,U.vm$))},dependencies:[O.O5,i.PM,i.FN,i.Ie,i.ho,i.w,A.JJ,A.On,O.Ov]}),P})();var $=l(717);function S(x,P){if(1&x&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&x){const C=t.oxw().ngIf;t.Udp("color",C.ui.status.color),t.xp6(1),t.hij(" ",C.ui.status.text,"")}}function K(x,P){if(1&x){const C=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,S,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(U){const Q=t.CHM(C).ngIf,H=t.oxw(2);return t.KtG(H.clickLightButton(H.buttonType.UP,Q,U))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&x){const C=P.ngIf;t.hYB("routerLink","",C.control.serialNr,"/",C.control.uuid,""),t.xp6(3),t.s9C("color",C.control.icon.color),t.s9C("src",C.control.icon.href),t.xp6(3),t.Oqu(C.ui.name),t.xp6(1),t.Q6J("ngIf",""!==C.ui.status.text)}}function k(x,P){if(1&x&&(t.ynx(0),t.YNc(1,K,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&x){const C=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,C.vm$))}}function D(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const C=t.oxw().ngIf;t.xp6(1),t.AsE("",C.ui.room," \u2022 ",C.ui.category,"")}}function E(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const C=t.oxw().ngIf;t.xp6(1),t.Oqu(C.ui.room)}}function W(x,P){if(1&x&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&x){const C=t.oxw().ngIf;t.xp6(1),t.Oqu(C.ui.category)}}function B(x,P){if(1&x&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&x){const C=t.oxw().ngIf;t.Udp("color",C.ui.status.color),t.xp6(1),t.hij(" ",t.lcZ(2,3,C.ui.status.text),"")}}function T(x,P){if(1&x){const C=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(U){const Q=t.CHM(C).ngIf,H=t.oxw(2);return t.KtG(H.clickLightButton(H.buttonType.UP,Q,U))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,D,2,2,"p",0),t.YNc(11,E,2,1,"p",0),t.YNc(12,W,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,B,3,5,"h2",7),t.qZA()()()()}if(2&x){const C=P.ngIf,y=t.oxw(2);t.hYB("routerLink","",C.control.serialNr,"/",C.control.uuid,""),t.xp6(3),t.s9C("color",C.control.icon.color),t.s9C("src",C.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===y.key),t.xp6(1),t.Q6J("ngIf","room"===y.key),t.xp6(1),t.Q6J("ngIf","category"===y.key),t.xp6(2),t.Oqu(C.ui.name),t.xp6(1),t.Q6J("ngIf",""!==C.ui.status.text)}}function g(x,P){if(1&x&&(t.ynx(0),t.YNc(1,T,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&x){const C=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,C.vm$))}}function _(x,P){if(1&x&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",20),t.qZA()()()),2&x){const C=P.ngIf;t.xp6(3),t.Q6J("text_vm",C),t.xp6(3),t.Q6J("radio_vm",C)}}function e(x,P){if(1&x&&(t.ynx(0),t.YNc(1,_,7,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&x){const C=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,C.vm$))}}function r(x,P){if(1&x&&t._UZ(0,"card-dimmer-view",25),2&x){const C=t.oxw().$implicit,y=t.oxw(4);t.Q6J("control",y.control)("subControl",C)("view",y.viewType.DETAILED)}}function o(x,P){if(1&x&&t._UZ(0,"card-dimmer-view",25),2&x){const C=t.oxw().$implicit,y=t.oxw(4);t.Q6J("control",y.control)("subControl",C)("view",y.viewType.DETAILED)}}function n(x,P){if(1&x&&t._UZ(0,"card-switch-view",26),2&x){const C=t.oxw().$implicit,y=t.oxw(4);t.Q6J("control",y.control)("subControl",C)}}function a(x,P){if(1&x&&(t.TgZ(0,"ion-col",22),t.YNc(1,r,1,3,"card-dimmer-view",23),t.YNc(2,o,1,3,"card-dimmer-view",23),t.YNc(3,n,1,2,"card-switch-view",24),t.qZA()),2&x){const C=P.$implicit;t.xp6(1),t.Q6J("ngIf","Dimmer"===C.type),t.xp6(1),t.Q6J("ngIf","ColorPickerV2"===C.type),t.xp6(1),t.Q6J("ngIf","Switch"===C.type)}}function m(x,P){if(1&x&&(t.TgZ(0,"ion-grid",18)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",19),t.qZA()(),t.TgZ(4,"ion-row"),t.YNc(5,a,4,3,"ion-col",21),t.qZA()()),2&x){const C=P.ngIf;t.xp6(3),t.Q6J("text_vm",C),t.xp6(2),t.Q6J("ngForOf",C.subControls)}}function c(x,P){if(1&x&&(t.ynx(0),t.YNc(1,m,6,2,"ion-grid",17),t.ALo(2,"async"),t.BQk()),2&x){const C=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,C.vm$))}}function p(x,P){if(1&x){const C=t.EpF();t.ynx(0),t.TgZ(1,"ion-segment",14),t.NdJ("ngModelChange",function(U){t.CHM(C);const F=t.oxw();return t.KtG(F.segment=U)})("ionChange",function(){t.CHM(C);const U=t.oxw();return t.KtG(U.updateSegment())}),t.TgZ(2,"ion-segment-button",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-segment-button",16),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,e,3,3,"ng-container",0),t.YNc(9,c,3,3,"ng-container",0),t.BQk()}if(2&x){const C=t.oxw();t.xp6(1),t.Q6J("ngModel",C.segment),t.xp6(2),t.hij(" ",t.lcZ(4,5,"Moods")," "),t.xp6(3),t.hij(" ",t.lcZ(7,7,"Lightzones")," "),t.xp6(2),t.Q6J("ngIf","moods"===C.segment),t.xp6(1),t.Q6J("ngIf","lightzones"===C.segment)}}function h(x,P){if(1&x&&(t.TgZ(0,"ion-select-option",35),t._uU(1),t.qZA()),2&x){const C=P.$implicit;t.Q6J("value",C.name),t.xp6(1),t.Oqu(C.name)}}function d(x,P){1&x&&(t.TgZ(0,"ion-select-option",36),t._uU(1,"Manual"),t.qZA())}function v(x,P){if(1&x){const C=t.EpF();t.TgZ(0,"ion-card",28)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",29),t.TgZ(4,"ion-select",30),t.NdJ("ionChange",function(U){const Q=t.CHM(C).ngIf,H=t.oxw(2);return t.KtG(H.selectChange(Q,U))}),t.ALo(5,"translate"),t.TgZ(6,"div",31)(7,"ion-text",32),t._uU(8),t.qZA()(),t.YNc(9,h,2,2,"ion-select-option",33),t.YNc(10,d,2,0,"ion-select-option",34),t.ALo(11,"translate"),t.qZA()()()()}if(2&x){const C=P.ngIf,y=t.oxw(2);t.xp6(3),t.s9C("color",C.control.icon.color),t.s9C("src",C.control.icon.href),t.xp6(1),t.Udp("color",C.ui.status.color),t.Q6J("cancelText",t.lcZ(5,11,"Cancel"))("interfaceOptions",y.customActionSheetOptions)("ngModel",C.ui.status.text),t.xp6(3),t.s9C("color",C.control.icon.color),t.xp6(1),t.Oqu(C.ui.room),t.xp6(1),t.Q6J("ngForOf",C.ui.radioList),t.xp6(1),t.Q6J("ngIf",C.ui.status.text===t.lcZ(11,13,"Manual"))}}function w(x,P){if(1&x&&(t.ynx(0),t.YNc(1,v,12,15,"ion-card",27),t.ALo(2,"async"),t.BQk()),2&x){const C=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,C.vm$))}}let L=(()=>{var x;class P{constructor(y,U){this.translate=y,this.controlService=U,this.buttonType=I.W,this.viewType=I.G,this.segment="moods",this.moodList=[],this.text="",this.customActionSheetOptions={header:"",cssClass:"actionsheet"}}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([y,U,F])=>this.updateVM(y,U,F))):console.error("Component 'control-light-v2' not available for rendering.")}updateVM(y,U,F){if(!y)return;let ot,Q=F.find(nt=>nt.uuid===y.room&&nt.serialNr===y.serialNr),H=U.find(nt=>nt.uuid===y.category&&nt.serialNr===y.serialNr);if(Array.isArray(y.states.activeMoods)&&(ot=y.states.activeMoods[0]),y.states.moodList&&this.moodList!==y.states.moodList&&(this.moodList=y.states.moodList,this.moveOffUp(this.moodList)),ot&&y.states.moodList&&Array.isArray(this.moodList)){let nt=this.moodList.findIndex(G=>G.id==ot);this.text=this.moodList[nt].name}y.states.activeMoods&&0==y.states.activeMoods.length&&(this.text=this.translate.instant("Manual"));let q=[];return y.subControls&&(q=Object.values(y.subControls).filter(G=>G.isVisible)),this.customActionSheetOptions.header=H.name+" "+(Q&&Q.name)?Q.name:"unknown",{control:{...y,icon:{href:y.icon.href,color:778!==ot&&this.text.length?"primary":"dark"}},ui:{name:y.name===this.translate.instant("Lightcontroller")?Q.name:y.name,room:Q&&Q.name?Q.name:"unknown",category:H&&H.name?H.name:"unknown",radioList:this.moveOffUp(this.moodList),selectedId:ot,status:{text:this.text,color:M.c.getColor(778!==ot&&this.text.length?"primary":"secondary")}},subControls:q}}updateSegment(){}clickLightButton(y,U,F){F.preventDefault(),F.stopPropagation();let Q,H=this.control.states.moodList,ot=U.ui.radioList.length-1;U.ui.selectedId&&U.ui.radioList?(Q=U.ui.radioList.findIndex(q=>q.id==U.ui.selectedId),Q++,Q>ot&&(Q=0)):Q=0,this.controlService.updateControl(U.control,"changeTo/"+String(H[Q].id))}selectChange(y,U){let F=y.ui.radioList,Q=y.ui.radioList.findIndex(H=>H.name==U.detail.value);F[Q]&&F[Q].id!=y.ui.selectedId&&this.controlService.updateControl(y.control,"changeTo/"+String(F[Q].id))}moveOffUp(y){let U=[];for(let F=0;F<y.length;F++)0==F?U[0]=y[y.length-1]:U[F]=y[F-1];return U}}return(x=P).\u0275fac=function(y){return new(y||x)(t.Y36(u.sK),t.Y36(s.B))},x.\u0275cmp=t.Xpm({type:x,selectors:[["control-light-v2-view"]],inputs:{control:"control",view:"view",key:"key"},decls:4,vars:4,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],[3,"ngModel","ngModelChange","ionChange"],["value","moods",1,"segment-button"],["value","lightzones",1,"segment-button"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],[3,"control","subControl","view",4,"ngIf"],[3,"control","subControl",4,"ngIf"],[3,"control","subControl","view"],[3,"control","subControl"],["class","card",4,"ngIf"],[1,"card"],[1,"icon_50",3,"color","src"],["interface","action-sheet",1,"select-no-icon","select-ml",3,"cancelText","interfaceOptions","ngModel","ionChange"],["slot","label"],[3,"color"],[3,"value",4,"ngFor","ngForOf"],["translate","",4,"ngIf"],[3,"value"],["translate",""]],template:function(y,U){1&y&&(t.YNc(0,k,3,3,"ng-container",0),t.YNc(1,g,3,3,"ng-container",0),t.YNc(2,p,10,9,"ng-container",0),t.YNc(3,w,3,3,"ng-container",0)),2&y&&(t.Q6J("ngIf",U.view===U.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",U.view===U.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",U.view===U.viewType.DETAILED),t.xp6(1),t.Q6J("ngIf",U.view===U.viewType.LIST_ITEM_POPUP))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.cJ,i.GO,i.t9,i.n0,i.yW,i.QI,i.YI,A.JJ,A.On,b.rH,u.Pi,Z.W,V.x,J,$.h,O.Ov,u.X$]}),P})()},2356:(X,R,l)=>{l.d(R,{k:()=>B});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(717);function Z(T,g){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function V(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.BQk(),t.qZA()()()}if(2&T){const _=g.ngIf;t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(3),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function N(T,g){if(1&T&&(t.ynx(0),t.YNc(1,V,11,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function J(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.AsE("",_.ui.room," \u2022 ",_.ui.category,"")}}function $(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.room)}}function S(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.category)}}function K(T,g){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function k(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t._UZ(6,"ion-icon",9),t.qZA()()(),t.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),t.YNc(10,J,2,2,"p",0),t.YNc(11,$,2,1,"p",0),t.YNc(12,S,2,1,"p",0),t.TgZ(13,"h1"),t._uU(14),t.qZA(),t.YNc(15,K,2,3,"h2",7),t.qZA()()()()}if(2&T){const _=g.ngIf,e=t.oxw(2);t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(7),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function D(T,g){if(1&T&&(t.ynx(0),t.YNc(1,k,16,9,"ion-card",10),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function E(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",16),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickPushButton(a.buttonType.PUSH,n,r))}),t.TgZ(7,"ion-label",18)(8,"h1",19),t._uU(9,"Push"),t.qZA()()()()()()}if(2&T){const _=g.ngIf;t.xp6(3),t.Q6J("text_vm",_)}}function W(T,g){if(1&T&&(t.ynx(0),t.YNc(1,E,10,1,"ion-grid",14),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}let B=(()=>{var T;class g{constructor(e,r){this.translate=e,this.controlService=r,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([e,r,o])=>this.updateVM(e,r,o))):console.error("Component 'control-pushbutton' not available for rendering.")}updateVM(e,r,o){if(!e)return;let n=o.find(c=>c.uuid===e.room&&c.serialNr===e.serialNr),a=r.find(c=>c.uuid===e.category&&c.serialNr===e.serialNr);return{control:e,ui:{name:e.name,room:n&&n.name?n.name:"unknown",category:a&&a.name?a.name:"unknown",status:{text:"",color:M.c.getColor("secondary")}}}}clickPushButton(e,r,o){o.preventDefault(),o.stopPropagation(),this.controlService.updateControl(r.control,"pulse")}}return(T=g).\u0275fac=function(e){return new(e||T)(t.Y36(u.sK),t.Y36(s.B))},T.\u0275cmp=t.Xpm({type:T,selectors:[["control-pushbutton-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["name","radio-button-off-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(e,r){1&e&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,W,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,u.Pi,b.h,O.Ov]}),g})()},5222:(X,R,l)=>{l.d(R,{d:()=>T});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(7383),Z=l(717);function V(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function N(g,_){if(1&g){const e=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,V,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.MINUS,a,o))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.PLUS,a,o))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&g){const e=_.ngIf;t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(3),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function J(g,_){if(1&g&&(t.ynx(0),t.YNc(1,N,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function $(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.AsE("",e.ui.room," \u2022 ",e.ui.category,"")}}function S(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.room)}}function K(g,_){if(1&g&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.ui.category)}}function k(g,_){if(1&g&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&g){const e=t.oxw().ngIf;t.Udp("color",e.ui.status.color),t.xp6(1),t.hij(" ",e.ui.status.text,"")}}function D(g,_){if(1&g){const e=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.MINUS,a,o))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(o){const a=t.CHM(e).ngIf,m=t.oxw(2);return t.KtG(m.clickRadioButton(m.buttonType.PLUS,a,o))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,$,2,2,"p",0),t.YNc(13,S,2,1,"p",0),t.YNc(14,K,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,k,2,3,"h2",7),t.qZA()()()()}if(2&g){const e=_.ngIf,r=t.oxw(2);t.hYB("routerLink","",e.control.serialNr,"/",e.control.uuid,""),t.xp6(3),t.s9C("color",e.control.icon.color),t.s9C("src",e.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===r.key),t.xp6(1),t.Q6J("ngIf","room"===r.key),t.xp6(1),t.Q6J("ngIf","category"===r.key),t.xp6(2),t.Oqu(e.control.name),t.xp6(1),t.Q6J("ngIf",""!==e.ui.status.text)}}function E(g,_){if(1&g&&(t.ynx(0),t.YNc(1,D,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}function W(g,_){if(1&g&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-radio-list-view",18),t.qZA()()()),2&g){const e=_.ngIf;t.xp6(3),t.Q6J("text_vm",e),t.xp6(3),t.Q6J("radio_vm",e)}}function B(g,_){if(1&g&&(t.ynx(0),t.YNc(1,W,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&g){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}let T=(()=>{var g;class _{constructor(r,o){this.translate=r,this.controlService=o,this.buttonType=I.W,this.viewType=I.G,this.segment="moods"}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([r,o,n])=>this.updateVM(r,o,n))):console.error("Component 'control-radio' not available for rendering.")}updateVM(r,o,n){let a=n.find(d=>d.uuid===r.room&&d.serialNr===r.serialNr),m=o.find(d=>d.uuid===r.category&&d.serialNr===r.serialNr),c=Number(r.states.activeOutput);c||(c=0),this.entries!==r.details.outputs&&(this.entries=r.details.outputs,this.radioList=[{id:0,name:r.details.allOff}].concat(Object.entries(r.details.outputs).map(d=>({id:Number(d[0]),name:String(d[1])}))));let p=this.radioList.findIndex(d=>d.id===c);return{control:r,ui:{name:r.name,room:a&&a.name?a.name:"unknown",category:m&&m.name?m.name:"unknown",radioList:this.radioList,selectedId:c,status:{text:String(this.radioList[p].name),color:M.c.getColor(c>0?"primary":"secondary")}}}}clickRadioButton(r,o,n){n.preventDefault(),n.stopPropagation();let m=o.ui.radioList.length-1,c=o.ui.radioList.findIndex(h=>h.id===o.ui.selectedId);r===I.W.PLUS?c++:c--,c>m?c=0:c<0&&(c=m),o.ui.selectedId=o.ui.radioList[c].id;let p=String(o.ui.radioList[c].id);"0"===p&&(p="reset"),this.controlService.updateControl(o.control,p)}}return(g=_).\u0275fac=function(r){return new(r||g)(t.Y36(u.sK),t.Y36(s.B))},g.\u0275cmp=t.Xpm({type:g,selectors:[["control-radio-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"radio_vm"]],template:function(r,o){1&r&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,B,3,3,"ng-container",0)),2&r&&(t.Q6J("ngIf",o.view===o.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",o.view===o.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,b.x,Z.h,O.Ov]}),_})()},7432:(X,R,l)=>{l.d(R,{B:()=>_});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(6223);let Z=(()=>{var e;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=I.W}sliderChange(n,a){n.control.states.value!=a.detail.value&&this.controlService.updateControl(n.control,String(a.detail.value))}clickSliderButton(n,a,m){m.preventDefault(),m.stopPropagation();let d,c=Number(a.control.details.min),p=Number(a.control.details.max),h=Number(a.control.details.step);d=n===I.W.PLUS?a.ui.slider.position+h:a.ui.slider.position-h,d<c&&(d=c),d>p&&(d=p),this.controlService.updateControl(a.control,String(d))}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(u.sK),t.Y36(s.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["card-slider-view"]],inputs:{slider_vm:"slider_vm"},decls:8,vars:4,consts:[[1,"card"],[1,"card-content"],[1,"item"],[1,"fab-button-slider","icon-slider-left",3,"click"],["name","remove-outline",2,"color","var(--ion-text-color, #2c2c2c)"],["debounce","50",1,"range",3,"min","max","step","ngModel","ionChange"],[1,"fab-button-slider","icon-slider-right",3,"click"],["name","add-outline",2,"color","var(--ion-text-color, #2c2c2c)"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-card",0)(1,"ion-card-content",1)(2,"ion-item",2)(3,"ion-fab-button",3),t.NdJ("click",function(c){return a.clickSliderButton(a.buttonType.MINUS,a.slider_vm,c)}),t._UZ(4,"ion-icon",4),t.qZA(),t.TgZ(5,"ion-range",5),t.NdJ("ionChange",function(c){return a.sliderChange(a.slider_vm,c)}),t.qZA(),t.TgZ(6,"ion-fab-button",6),t.NdJ("click",function(c){return a.clickSliderButton(a.buttonType.PLUS,a.slider_vm,c)}),t._UZ(7,"ion-icon",7),t.qZA()()()()),2&n&&(t.xp6(5),t.s9C("min",a.slider_vm.control.details.min),t.s9C("max",a.slider_vm.control.details.max),t.s9C("step",a.slider_vm.control.details.step),t.Q6J("ngModel",a.slider_vm.ui.slider.position))},dependencies:[i.PM,i.FN,i.W4,i.gu,i.Ie,i.I_,i.QI,b.JJ,b.On]}),r})();var V=l(717);function N(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function J(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,N,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.MINUS,c,a))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.PLUS,c,a))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&e){const o=r.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function $(e,r){if(1&e&&(t.ynx(0),t.YNc(1,J,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function S(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function K(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function k(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function D(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function E(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.MINUS,c,a))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickSliderButton(p.buttonType.PLUS,c,a))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,S,2,2,"p",0),t.YNc(13,K,2,1,"p",0),t.YNc(14,k,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,D,2,3,"h2",7),t.qZA()()()()}if(2&e){const o=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function W(e,r){if(1&e&&(t.ynx(0),t.YNc(1,E,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function B(e,r){if(1&e&&(t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col"),t._UZ(6,"card-slider-view",18),t.qZA()()()),2&e){const o=r.ngIf;t.xp6(3),t.Q6J("text_vm",o),t.xp6(3),t.Q6J("slider_vm",o)}}function T(e,r){if(1&e&&(t.ynx(0),t.YNc(1,B,7,2,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}var g=l(9572).sprintf;let _=(()=>{var e;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([n,a,m])=>this.updateVM(n,a,m))):console.error("Component 'control-slider' not available for rendering.")}updateVM(n,a,m){let c=m.find(w=>w.uuid===n.room&&w.serialNr===n.serialNr),p=a.find(w=>w.uuid===n.category&&w.serialNr===n.serialNr),h="",d=0;return n.states.value&&n.details.format&&(h=g(n.details.format,n.states.value)),n.states.value&&(d=Number(n.states.value)),{control:n,ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",slider:{position:d},status:{text:h,color:M.c.getColor("secondary")}}}}clickSliderButton(n,a,m){m.preventDefault(),m.stopPropagation();let d,c=Number(a.control.details.min),p=Number(a.control.details.max),h=Number(a.control.details.step);d=n===I.W.PLUS?a.ui.slider.position+h:a.ui.slider.position-h,d<c&&(d=c),d>p&&(d=p),this.controlService.updateControl(a.control,String(d))}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(u.sK),t.Y36(s.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["control-slider-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","remove-outline",1,"icon"],["name","add-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[3,"slider_vm"]],template:function(n,a){1&n&&(t.YNc(0,$,3,3,"ng-container",0),t.YNc(1,W,3,3,"ng-container",0),t.YNc(2,T,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[O.O5,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,Z,V.h,O.Ov]}),r})()},7953:(X,R,l)=>{l.d(R,{e:()=>e});var f=l(7027),Y=l(2572),I=l(7398),M=l(6308),t=l(7658),u=l(5879),s=l(9515),O=l(4898),i=l(6814),A=l(6223),b=l(6089),Z=l(717);function V(r,o){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.Udp("color",n.ui.status.color),u.xp6(1),u.hij(" ",n.ui.status.text,"")}}function N(r,o){if(1&r&&(u.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),u._UZ(3,"ion-icon",5),u.TgZ(4,"ion-label",6)(5,"h1"),u._uU(6),u.qZA(),u.YNc(7,V,2,3,"h2",7),u.qZA()()()()),2&r){const n=o.ngIf;u.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),u.xp6(3),u.s9C("color",n.control.icon.color),u.s9C("src",n.control.icon.href),u.xp6(3),u.Oqu(n.control.name),u.xp6(1),u.Q6J("ngIf",""!==n.ui.status.text)}}function J(r,o){if(1&r&&(u.ynx(0),u.YNc(1,N,8,6,"ion-card",1),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}function $(r,o){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.AsE("",n.ui.room," \u2022 ",n.ui.category,"")}}function S(r,o){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.Oqu(n.ui.room)}}function K(r,o){if(1&r&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.Oqu(n.ui.category)}}function k(r,o){if(1&r&&(u.TgZ(0,"h2"),u._uU(1),u.qZA()),2&r){const n=u.oxw().ngIf;u.Udp("color",n.ui.status.color),u.xp6(1),u.hij(" ",n.ui.status.text,"")}}function D(r,o){if(1&r&&(u.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),u._UZ(3,"ion-icon",5)(4,"ion-label"),u.qZA()(),u.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),u.YNc(8,$,2,2,"p",0),u.YNc(9,S,2,1,"p",0),u.YNc(10,K,2,1,"p",0),u.TgZ(11,"h1"),u._uU(12),u.qZA(),u.YNc(13,k,2,3,"h2",7),u.qZA()()()()),2&r){const n=o.ngIf,a=u.oxw(2);u.hYB("routerLink","",n.control.serialNr,"/",n.control.uuid,""),u.xp6(3),u.s9C("color",n.control.icon.color),u.s9C("src",n.control.icon.href),u.xp6(5),u.Q6J("ngIf","home"===a.key),u.xp6(1),u.Q6J("ngIf","room"===a.key),u.xp6(1),u.Q6J("ngIf","category"===a.key),u.xp6(2),u.Oqu(n.control.name),u.xp6(1),u.Q6J("ngIf",""!==n.ui.status.text)}}function E(r,o){if(1&r&&(u.ynx(0),u.YNc(1,D,14,9,"ion-card",8),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}function W(r,o){if(1&r){const n=u.EpF();u.TgZ(0,"ion-item",20)(1,"ion-text",21),u._uU(2,"Ending time service"),u.qZA()(),u.TgZ(3,"ion-datetime",22,23),u.NdJ("ionChange",function(m){u.CHM(n);const c=u.oxw(2).ngIf,p=u.oxw(2);return u.KtG(p.timeChanged(m,c))}),u.TgZ(5,"ion-buttons",24)(6,"ion-button",25),u.NdJ("click",function(){u.CHM(n);const m=u.oxw(4);return u.KtG(m.cancel())}),u._uU(7,"Cancel"),u.qZA(),u.TgZ(8,"ion-button",26),u.NdJ("click",function(){u.CHM(n);const m=u.oxw(4);return u.KtG(m.confirm())}),u._uU(9,"OK"),u.qZA()()()}if(2&r){const n=u.oxw(4);u.xp6(3),u.s9C("locale",n.translate.currentLang),u.Q6J("ngModel",n.servicetime)}}function B(r,o){if(1&r&&(u.TgZ(0,"ion-button",18),u._uU(1),u.TgZ(2,"ion-popover",19),u.YNc(3,W,10,2,"ng-template"),u.qZA()()),2&r){const n=u.oxw().ngIf;u.xp6(1),u.hij(" ",n.ui.button.text," ")}}function T(r,o){if(1&r){const n=u.EpF();u.TgZ(0,"ion-button",27),u._uU(1),u.TgZ(2,"ion-alert",28),u.NdJ("didDismiss",function(m){u.CHM(n);const c=u.oxw().ngIf,p=u.oxw(2);return u.KtG(p.cancelService(m,c))}),u.qZA()()}if(2&r){const n=u.oxw().ngIf,a=u.oxw(2);u.xp6(1),u.hij(" ",n.ui.button.text," "),u.xp6(1),u.MGl("header","",n.ui.button.text,"?"),u.Q6J("buttons",a.cancelButtons)}}function g(r,o){if(1&r&&(u.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),u._UZ(3,"card-text-view",14),u.qZA()(),u.TgZ(4,"ion-row")(5,"ion-col"),u.YNc(6,B,4,1,"ion-button",15),u.YNc(7,T,3,3,"ion-button",16),u.qZA()(),u.TgZ(8,"ion-row")(9,"ion-col")(10,"ion-button",17),u._uU(11," History "),u.qZA()()()()),2&r){const n=o.ngIf;u.xp6(3),u.Q6J("text_vm",n),u.xp6(3),u.Q6J("ngIf",!n.state),u.xp6(1),u.Q6J("ngIf",n.state),u.xp6(3),u.MGl("routerLink","",n.control.uuid,"/sensors")}}function _(r,o){if(1&r&&(u.ynx(0),u.YNc(1,g,12,4,"ion-grid",12),u.ALo(2,"async"),u.BQk()),2&r){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",u.lcZ(2,1,n.vm$))}}let e=(()=>{var r;class o{constructor(a,m){this.translate=a,this.controlService=m,this.buttonType=M.W,this.viewType=M.G,this.cancelButtons=[{text:this.translate.instant("Cancel"),role:"cancel"},{text:"OK",role:"ok"}]}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,Y.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,I.U)(([a,m,c])=>this.updateVM(a,m,c))):console.error("Component 'control-smokealarm' not available for rendering.")}updateVM(a,m,c){let p=c.find(y=>y.uuid===a.room&&y.serialNr===a.serialNr),h=m.find(y=>y.uuid===a.category&&y.serialNr===a.serialNr),d="",v="",w="primary",L=Number(a.states.timeServiceMode)>0,x=L?"Stop alarm suppression":"Start alarm suppression",P=Number(a.states.level);switch(L&&(P=99),P){case 0:d="Everything OK";break;case 1:d="Pre-alarm active",w="danger";break;case 2:d="Main alarm active",w="danger";break;case 99:d="Alarm suppression enabled",v=" ("+a.states.timeServiceMode+"s)",w="warning";break;default:d="Unknown state",w="secondary"}return{control:{...a,icon:{href:"assets/icons/svg/flame-sharp.svg",color:w}},ui:{name:a.name,room:p&&p.name?p.name:"unknown",category:h&&h.name?h.name:"unknown",status:{text:this.translate.instant(d)+v,color:t.c.getColor(w)},button:{text:this.translate.instant(x)}},state:L}}timeChanged(a,m){this.servicetime=a.detail.value;let c=Math.round((new Date(this.servicetime).getTime()-Date.now())/1e3);if(console.log("serviceSec",c),c>1){let p="servicemode/"+String(c);this.controlService.updateControl(m.control,p)}}cancel(){this.datetime.cancel(!0)}cancelService(a,m){"ok"===a.detail.role&&this.controlService.updateControl(m.control,"servicemode/0")}confirm(){this.datetime.confirm(!0)}service(a,m){}showHistory(a,m){}}return(r=o).\u0275fac=function(a){return new(a||r)(u.Y36(s.sK),u.Y36(O.B))},r.\u0275cmp=u.Xpm({type:r,selectors:[["control-smokealarm-view"]],viewQuery:function(a,m){if(1&a&&u.Gf(f.x4,5),2&a){let c;u.iGM(c=u.CRH())&&(m.datetime=c.first)}},inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["class","push-button","expand","block","id","time-popover",4,"ngIf"],["class","push-button","expand","block","id","stop-service",4,"ngIf"],["expand","block","translate","",1,"push-button",3,"routerLink"],["expand","block","id","time-popover",1,"push-button"],["trigger","time-popover","cssClass","width-100"],[1,"item-title"],["translate","",1,"text-center"],["presentation","time",3,"locale","ngModel","ionChange"],["datetime",""],["slot","buttons"],["color","primary","fill","clear","translate","",3,"click"],["color","primary","fill","clear",3,"click"],["expand","block","id","stop-service",1,"push-button"],["trigger","stop-service",3,"header","buttons","didDismiss"]],template:function(a,m){1&a&&(u.YNc(0,J,3,3,"ng-container",0),u.YNc(1,E,3,3,"ng-container",0),u.YNc(2,_,3,3,"ng-container",0)),2&a&&(u.Q6J("ngIf",m.view===m.viewType.LIST_ITEM),u.xp6(1),u.Q6J("ngIf",m.view===m.viewType.FAVORITE),u.xp6(1),u.Q6J("ngIf",m.view===m.viewType.DETAILED))},dependencies:[i.O5,f.Ge,f.YG,f.Sm,f.PM,f.FN,f.Zi,f.wI,f.x4,f.jY,f.gu,f.Ie,f.Q$,f.Nd,f.yW,f.d8,f.QI,f.YI,A.JJ,A.On,b.rH,s.Pi,Z.h,i.Ov],styles:["ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb);--background-rgb: var(--ion-card-background-rgb, 251, 251, 251)}ion-alert[_ngcontent-%COMP%]{--background: var(--ion-card-background, #fbfbfb)}.item-title[_ngcontent-%COMP%]{font-size:18px;margin:0}.text-center[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),o})()},5427:(X,R,l)=>{l.d(R,{z:()=>_});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6223),b=l(6089),Z=l(717);function V(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function N(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item"),t._UZ(3,"ion-icon",4),t.TgZ(4,"ion-label",5)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,V,2,3,"h2",6),t.qZA(),t.TgZ(8,"ion-toggle",7),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickToggle(c,a))}),t.qZA()()()()}if(2&e){const o=r.ngIf;t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(3),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text),t.xp6(1),t.Q6J("ngModel",o.ui.toggle)}}function J(e,r){if(1&e&&(t.ynx(0),t.YNc(1,N,9,7,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function $(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function S(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.room)}}function K(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.Oqu(o.ui.category)}}function k(e,r){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.Udp("color",o.ui.status.color),t.xp6(1),t.hij(" ",o.ui.status.text,"")}}function D(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",11),t._UZ(3,"ion-icon",4)(4,"ion-label",5),t.TgZ(5,"ion-toggle",7),t.NdJ("click",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.clickToggle(c,a))}),t.qZA()()(),t.TgZ(6,"ion-card-content",3)(7,"ion-item",11)(8,"ion-label",12),t.YNc(9,$,2,2,"p",0),t.YNc(10,S,2,1,"p",0),t.YNc(11,K,2,1,"p",0),t.TgZ(12,"h1"),t._uU(13),t.qZA(),t.YNc(14,k,2,3,"h2",6),t.qZA()()()()}if(2&e){const o=r.ngIf,n=t.oxw(2);t.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),t.xp6(3),t.s9C("color",o.control.icon.color),t.s9C("src",o.control.icon.href),t.xp6(2),t.Q6J("ngModel",o.ui.toggle),t.xp6(4),t.Q6J("ngIf","home"===n.key),t.xp6(1),t.Q6J("ngIf","room"===n.key),t.xp6(1),t.Q6J("ngIf","category"===n.key),t.xp6(2),t.Oqu(o.control.name),t.xp6(1),t.Q6J("ngIf",""!==o.ui.status.text)}}function E(e,r){if(1&e&&(t.ynx(0),t.YNc(1,D,15,10,"ion-card",8),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}function W(e,r){if(1&e&&(t.TgZ(0,"div")(1,"ion-item")(2,"ion-radio",18),t._uU(3),t.qZA()()()),2&e){const o=t.oxw().$implicit,n=t.oxw().ngIf;t.xp6(1),t.Gre("radio-item selected-",n.ui.status.text===o.name,""),t.xp6(1),t.s9C("value",o.name),t.xp6(1),t.hij(" ",o.name,"")}}function B(e,r){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,W,4,5,"div",0),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Q6J("ngIf",""!==o.name)}}function T(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-grid",14)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",15),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-radio-group",16),t.NdJ("ionChange",function(a){const c=t.CHM(o).ngIf,p=t.oxw(2);return t.KtG(p.radioChange(c,a))}),t.YNc(7,B,2,1,"div",17),t.qZA()()()()}if(2&e){const o=r.ngIf;t.xp6(3),t.Q6J("text_vm",o),t.xp6(3),t.s9C("value",o.ui.status.text),t.xp6(1),t.Q6J("ngForOf",o.ui.radioList)}}function g(e,r){if(1&e&&(t.ynx(0),t.YNc(1,T,8,3,"ion-grid",13),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.vm$))}}let _=(()=>{var e;class r{constructor(n,a){this.translate=n,this.controlService=a,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([n,a,m])=>this.updateVM(n,a,m))):console.error("Component 'control-switch' not available for rendering.")}updateVM(n,a,m){let c=m.find(v=>v.uuid===n.room&&v.serialNr===n.serialNr),p=a.find(v=>v.uuid===n.category&&v.serialNr===n.serialNr),h="1"===n.states.active;return this.radioList||(this.radioList=[{id:0,name:this.translate.instant("Off")},{id:1,name:this.translate.instant("On")}]),{control:{...n,icon:{href:n.icon.href,color:h?"primary":"dark"}},ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",radioList:this.radioList,selectedId:h?1:0,status:{text:this.translate.instant(h?"On":"Off"),color:M.c.getColor(h?"primary":"secondary")},toggle:h}}}clickToggle(n,a){a.preventDefault(),a.stopPropagation(),this.controlService.updateControl(n.control,n.ui.toggle?"Off":"On")}radioChange(n,a){a.preventDefault(),a.stopPropagation(),n.ui.radioList.findIndex(c=>c.name===a.detail.value)?this.controlService.updateControl(n.control,"On"):this.controlService.updateControl(n.control,"Off")}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(u.sK),t.Y36(s.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["control-switch-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["aria-label","vm.ui.toggle","color","primary","mode","ios",1,"toggle-only",3,"ngModel","click"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"item"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],[1,"radio-group",3,"value","ionChange"],[4,"ngFor","ngForOf"],[1,"radio","radio-text",3,"value"]],template:function(n,a){1&n&&(t.YNc(0,J,3,3,"ng-container",0),t.YNc(1,E,3,3,"ng-container",0),t.YNc(2,g,3,3,"ng-container",0)),2&n&&(t.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[O.sg,O.O5,i.PM,i.FN,i.Zi,i.wI,i.jY,i.gu,i.Ie,i.Q$,i.B7,i.se,i.Nd,i.ho,i.w,i.U5,i.QI,i.YI,A.JJ,A.On,b.rH,Z.h,O.Ov]}),r})()},9249:(X,R,l)=>{l.d(R,{v:()=>_});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(6676),s=l(5879),O=l(9515),i=l(4898),A=l(6814),b=l(7027),Z=l(6089),V=l(717);function N(e,r){if(1&e&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&e){const o=s.oxw().ngIf;s.Udp("color",o.ui.status.color),s.xp6(1),s.hij(" ",o.ui.status.text,"")}}function J(e,r){if(1&e&&(s.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),s._UZ(3,"ion-icon",5),s.TgZ(4,"ion-label",6)(5,"h1"),s._uU(6),s.qZA(),s.YNc(7,N,2,3,"h2",7),s.qZA()()()()),2&e){const o=r.ngIf;s.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),s.xp6(3),s.s9C("color",o.control.icon.color),s.s9C("src",o.control.icon.href),s.xp6(3),s.Oqu(o.control.name),s.xp6(1),s.Q6J("ngIf",""!==o.ui.status.text)}}function $(e,r){if(1&e&&(s.ynx(0),s.YNc(1,J,8,6,"ion-card",1),s.ALo(2,"async"),s.BQk()),2&e){const o=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,o.vm$))}}function S(e,r){if(1&e&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&e){const o=s.oxw().ngIf;s.xp6(1),s.AsE("",o.ui.room," \u2022 ",o.ui.category,"")}}function K(e,r){if(1&e&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&e){const o=s.oxw().ngIf;s.xp6(1),s.Oqu(o.ui.room)}}function k(e,r){if(1&e&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&e){const o=s.oxw().ngIf;s.xp6(1),s.Oqu(o.ui.category)}}function D(e,r){if(1&e&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&e){const o=s.oxw().ngIf;s.Udp("color",o.ui.status.color),s.xp6(1),s.hij(" ",o.ui.status.text,"")}}function E(e,r){if(1&e&&(s.TgZ(0,"ion-card",9)(1,"ion-card-header",10)(2,"ion-item",4),s._UZ(3,"ion-icon",5)(4,"ion-label"),s.qZA()(),s.TgZ(5,"ion-card-content",3)(6,"ion-item",4)(7,"ion-label",11),s.YNc(8,S,2,2,"p",0),s.YNc(9,K,2,1,"p",0),s.YNc(10,k,2,1,"p",0),s.TgZ(11,"h1"),s._uU(12),s.qZA(),s.YNc(13,D,2,3,"h2",7),s.qZA()()()()),2&e){const o=r.ngIf,n=s.oxw(2);s.hYB("routerLink","",o.control.serialNr,"/",o.control.uuid,""),s.xp6(3),s.s9C("color",o.control.icon.color),s.s9C("src",o.control.icon.href),s.xp6(5),s.Q6J("ngIf","home"===n.key),s.xp6(1),s.Q6J("ngIf","room"===n.key),s.xp6(1),s.Q6J("ngIf","category"===n.key),s.xp6(2),s.Oqu(o.control.name),s.xp6(1),s.Q6J("ngIf",""!==o.ui.status.text)}}function W(e,r){if(1&e&&(s.ynx(0),s.YNc(1,E,14,9,"ion-card",8),s.ALo(2,"async"),s.BQk()),2&e){const o=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,o.vm$))}}function B(e,r){if(1&e&&(s.TgZ(0,"ion-grid",13)(1,"ion-row")(2,"ion-col"),s._UZ(3,"card-text-view",14),s.qZA()()()),2&e){const o=r.ngIf;s.xp6(3),s.Q6J("text_vm",o)}}function T(e,r){if(1&e&&(s.ynx(0),s.YNc(1,B,4,1,"ion-grid",12),s.ALo(2,"async"),s.BQk()),2&e){const o=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,o.vm$))}}var g=l(9572).sprintf;let _=(()=>{var e;class r{constructor(n,a){this.translate=n,this.controlService=a,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([n,a,m])=>this.updateVM(n,a,m))):console.error("Component 'control-text-state' not available for rendering.")}updateVM(n,a,m){if(!n)return;let c=m.find(v=>v.uuid===n.room&&v.serialNr===n.serialNr),p=a.find(v=>v.uuid===n.category&&v.serialNr===n.serialNr),h=this.processControl(n);return{control:n,ui:{name:n.name,room:c&&c.name?c.name:"unknown",category:p&&p.name?p.name:"unknown",status:{text:h.text,color:h.color}}}}processControl(n){let a={text:"",color:M.c.getColor("secundary")};switch(n.type){case"InfoOnlyText":a.text=n.states.text?g(n.details.format,n.states.text):"";break;case"InfoOnlyDigital":let m="1"===n.states.active;a.text=m?n.details.text.on:n.details.text.off,a.color=m?n.details.color.on:n.details.color.off;break;case"TextState":a.text=n.states.textAndIcon?n.states.textAndIcon:"";break;case"InfoOnlyAnalog":switch(n.details.format){case"<v.u>":let c=new Date(1e3*Number(n.states.value)+1230768e6);a.text=t(c).format("DD-MM-YYYY HH:MM").toString();break;case"<v.t>":let p=Number(n.states.value)/60,h=Math.floor(p/1440),d=Math.floor(p%1440/60),v=Math.floor(p%1440%60);a.text=h+"d "+d+"h "+v+"m";break;case"<v.d>":let w=new Date(1e3*Number(n.states.value)+1230768e6);a.text=t(w).format("DD:MM:YYYY").toString();break;case"<v.x>":a.text=n.states.value?"1":"0";break;case"<v.j>":n.details.format="%f";case"<v.i>":n.details.format="%f";case"<v.c>":n.details.format="#%6h";case"<v.m>":n.details.format="%d";case"<v>":n.details.format="%d";case"<v.1>":n.details.format="%.1f";case"<v.2>":n.details.format="%.2f";case"<v.3>":n.details.format="%.3f";default:n.states.value&&n.details.format&&(a.text=g(n.details.format,n.states.value))}}return a}}return(e=r).\u0275fac=function(n){return new(n||e)(s.Y36(O.sK),s.Y36(i.B))},e.\u0275cmp=s.Xpm({type:e,selectors:[["control-text-state-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"]],template:function(n,a){1&n&&(s.YNc(0,$,3,3,"ng-container",0),s.YNc(1,W,3,3,"ng-container",0),s.YNc(2,T,3,3,"ng-container",0)),2&n&&(s.Q6J("ngIf",a.view===a.viewType.LIST_ITEM),s.xp6(1),s.Q6J("ngIf",a.view===a.viewType.FAVORITE),s.xp6(1),s.Q6J("ngIf",a.view===a.viewType.DETAILED))},dependencies:[A.O5,b.PM,b.FN,b.Zi,b.wI,b.jY,b.gu,b.Ie,b.Q$,b.Nd,b.YI,Z.rH,V.h,A.Ov]}),r})()},9460:(X,R,l)=>{l.d(R,{y:()=>B});var f=l(2572),Y=l(7398),I=l(6308),M=l(7658),t=l(5879),u=l(9515),s=l(4898),O=l(6814),i=l(7027),A=l(6089),b=l(717);function Z(T,g){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function V(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),t._UZ(3,"ion-icon",5),t.TgZ(4,"ion-label",6)(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,Z,2,3,"h2",7),t.qZA(),t.ynx(8),t.TgZ(9,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t._UZ(12,"ion-icon",10),t.qZA(),t.BQk(),t.qZA()()()}if(2&T){const _=g.ngIf;t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(3),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function N(T,g){if(1&T&&(t.ynx(0),t.YNc(1,V,13,6,"ion-card",1),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function J(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.AsE("",_.ui.room," \u2022 ",_.ui.category,"")}}function $(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.room)}}function S(T,g){if(1&T&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.xp6(1),t.Oqu(_.ui.category)}}function K(T,g){if(1&T&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&T){const _=t.oxw().ngIf;t.Udp("color",_.ui.status.color),t.xp6(1),t.hij(" ",_.ui.status.text,"")}}function k(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-item",4),t._UZ(3,"ion-icon",5)(4,"ion-label"),t.TgZ(5,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-fab-button",8),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t._UZ(8,"ion-icon",10),t.qZA()()(),t.TgZ(9,"ion-card-content",3)(10,"ion-item",4)(11,"ion-label",14),t.YNc(12,J,2,2,"p",0),t.YNc(13,$,2,1,"p",0),t.YNc(14,S,2,1,"p",0),t.TgZ(15,"h1"),t._uU(16),t.qZA(),t.YNc(17,K,2,3,"h2",7),t.qZA()()()()}if(2&T){const _=g.ngIf,e=t.oxw(2);t.hYB("routerLink","",_.control.serialNr,"/",_.control.uuid,""),t.xp6(3),t.s9C("color",_.control.icon.color),t.s9C("src",_.control.icon.href),t.xp6(9),t.Q6J("ngIf","home"===e.key),t.xp6(1),t.Q6J("ngIf","room"===e.key),t.xp6(1),t.Q6J("ngIf","category"===e.key),t.xp6(2),t.Oqu(_.control.name),t.xp6(1),t.Q6J("ngIf",""!==_.ui.status.text)}}function D(T,g){if(1&T&&(t.ynx(0),t.YNc(1,k,18,9,"ion-card",11),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}function E(T,g){if(1&T){const _=t.EpF();t.TgZ(0,"ion-grid",16)(1,"ion-row")(2,"ion-col"),t._UZ(3,"card-text-view",17),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",18),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.DOWN,n,r))}),t.TgZ(7,"ion-label",19)(8,"h1",20),t._uU(9,"Down"),t.qZA()()()(),t.TgZ(10,"ion-col")(11,"ion-button",18),t.NdJ("click",function(r){const n=t.CHM(_).ngIf,a=t.oxw(2);return t.KtG(a.clickButton(a.buttonType.UP,n,r))}),t.TgZ(12,"ion-label",19)(13,"h1",20),t._uU(14,"Up"),t.qZA()()()()()()}if(2&T){const _=g.ngIf;t.xp6(3),t.Q6J("text_vm",_)}}function W(T,g){if(1&T&&(t.ynx(0),t.YNc(1,E,15,1,"ion-grid",15),t.ALo(2,"async"),t.BQk()),2&T){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,_.vm$))}}let B=(()=>{var T;class g{constructor(e,r){this.translate=e,this.controlService=r,this.buttonType=I.W,this.viewType=I.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([e,r,o])=>this.updateVM(e,r,o))):console.error("Component 'control-up-down-digital' not available for rendering.")}updateVM(e,r,o){if(!e)return;let n=o.find(c=>c.uuid===e.room&&c.serialNr===e.serialNr),a=r.find(c=>c.uuid===e.category&&c.serialNr===e.serialNr);return{control:e,ui:{name:e.name,room:n&&n.name?n.name:"unknown",category:a&&a.name?a.name:"unknown",status:{text:"",color:M.c.getColor("secondary")}}}}clickButton(e,r,o){switch(o.preventDefault(),o.stopPropagation(),e){case I.W.UP:this.controlService.updateControl(r.control,"PulseUp");break;case I.W.DOWN:this.controlService.updateControl(r.control,"PulseDown")}}}return(T=g).\u0275fac=function(e){return new(e||T)(t.Y36(u.sK),t.Y36(s.B))},T.\u0275cmp=t.Xpm({type:T,selectors:[["control-up-down-digital-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["size","small",1,"fab-button",3,"click"],["name","chevron-down-outline",1,"icon"],["name","chevron-up-outline",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(e,r){1&e&&(t.YNc(0,N,3,3,"ng-container",0),t.YNc(1,D,3,3,"ng-container",0),t.YNc(2,W,3,3,"ng-container",0)),2&e&&(t.Q6J("ngIf",r.view===r.viewType.LIST_ITEM),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.FAVORITE),t.xp6(1),t.Q6J("ngIf",r.view===r.viewType.DETAILED))},dependencies:[O.O5,i.YG,i.PM,i.FN,i.Zi,i.wI,i.W4,i.jY,i.gu,i.Ie,i.Q$,i.Nd,i.YI,A.rH,u.Pi,b.h,O.Ov]}),g})()},3415:(X,R,l)=>{l.d(R,{b:()=>g});var f=l(2572),Y=l(7398);const M=(0,l(2726).fo)("Browser",{web:()=>l.e(3671).then(l.bind(l,3671)).then(_=>new _.BrowserWeb)});var t=l(6308),u=l(7658),s=l(5879),O=l(9515),i=l(4898),A=l(6814),b=l(7027),Z=l(6089),V=l(717);function N(_,e){if(1&_&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.Udp("color",r.ui.status.color),s.xp6(1),s.hij(" ",r.ui.status.text,"")}}function J(_,e){if(1&_){const r=s.EpF();s.TgZ(0,"ion-card",2)(1,"ion-card-content",3)(2,"ion-item",4),s._UZ(3,"ion-icon",5),s.TgZ(4,"ion-label",6)(5,"h1"),s._uU(6),s.qZA(),s.YNc(7,N,2,3,"h2",7),s.qZA(),s.ynx(8),s.TgZ(9,"ion-fab-button",8),s.NdJ("click",function(n){const m=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,m,n))}),s._UZ(10,"ion-icon",9),s.qZA(),s.BQk(),s.qZA()()()}if(2&_){const r=e.ngIf;s.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),s.xp6(3),s.s9C("color",r.control.icon.color),s.s9C("src",r.control.icon.href),s.xp6(3),s.Oqu(r.control.name),s.xp6(1),s.Q6J("ngIf",""!==r.ui.status.text)}}function $(_,e){if(1&_&&(s.ynx(0),s.YNc(1,J,11,6,"ion-card",1),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}function S(_,e){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.AsE("",r.ui.room," \u2022 ",r.ui.category,"")}}function K(_,e){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.Oqu(r.ui.room)}}function k(_,e){if(1&_&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.xp6(1),s.Oqu(r.ui.category)}}function D(_,e){if(1&_&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&_){const r=s.oxw().ngIf;s.Udp("color",r.ui.status.color),s.xp6(1),s.hij(" ",r.ui.status.text,"")}}function E(_,e){if(1&_){const r=s.EpF();s.TgZ(0,"ion-card",11)(1,"ion-card-header",12)(2,"ion-item",4),s._UZ(3,"ion-icon",5)(4,"ion-label"),s.TgZ(5,"ion-fab-button",8),s.NdJ("click",function(n){const m=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,m,n))}),s._UZ(6,"ion-icon",9),s.qZA()()(),s.TgZ(7,"ion-card-content",3)(8,"ion-item",4)(9,"ion-label",13),s.YNc(10,S,2,2,"p",0),s.YNc(11,K,2,1,"p",0),s.YNc(12,k,2,1,"p",0),s.TgZ(13,"h1"),s._uU(14),s.qZA(),s.YNc(15,D,2,3,"h2",7),s.qZA()()()()}if(2&_){const r=e.ngIf,o=s.oxw(2);s.hYB("routerLink","",r.control.serialNr,"/",r.control.uuid,""),s.xp6(3),s.s9C("color",r.control.icon.color),s.s9C("src",r.control.icon.href),s.xp6(7),s.Q6J("ngIf","home"===o.key),s.xp6(1),s.Q6J("ngIf","room"===o.key),s.xp6(1),s.Q6J("ngIf","category"===o.key),s.xp6(2),s.Oqu(r.control.name),s.xp6(1),s.Q6J("ngIf",""!==r.ui.status.text)}}function W(_,e){if(1&_&&(s.ynx(0),s.YNc(1,E,16,9,"ion-card",10),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}function B(_,e){if(1&_){const r=s.EpF();s.TgZ(0,"ion-grid",15)(1,"ion-row")(2,"ion-col"),s._UZ(3,"card-text-view",16),s.qZA()(),s.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",17),s.NdJ("click",function(n){const m=s.CHM(r).ngIf,c=s.oxw(2);return s.KtG(c.clickPushButton(c.buttonType.PUSH,m,n))}),s.TgZ(7,"ion-label",18)(8,"h1",19),s._uU(9,"Open link"),s.qZA()()()()()()}if(2&_){const r=e.ngIf;s.xp6(3),s.Q6J("text_vm",r)}}function T(_,e){if(1&_&&(s.ynx(0),s.YNc(1,B,10,1,"ion-grid",14),s.ALo(2,"async"),s.BQk()),2&_){const r=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,r.vm$))}}let g=(()=>{var _;class e{constructor(o,n){this.translate=o,this.controlService=n,this.buttonType=t.W,this.viewType=t.G}ngOnInit(){this.initVM()}ngOnDestroy(){}initVM(){null!=this.control?this.vm$=(0,f.a)([this.controlService.getControl$(this.control.serialNr,this.control.uuid),this.controlService.categories$,this.controlService.rooms$]).pipe((0,Y.U)(([o,n,a])=>this.updateVM(o,n,a))):console.error("Component 'control-webpage' not available for rendering.")}updateVM(o,n,a){let m=a.find(h=>h.uuid===o.room&&h.serialNr===o.serialNr),c=n.find(h=>h.uuid===o.category&&h.serialNr===o.serialNr);return{control:o,ui:{name:o.name,room:m&&m.name?m.name:"unknown",category:c&&c.name?c.name:"unknown",status:{text:"Web Link",color:u.c.getColor("secondary")}}}}clickPushButton(o,n,a){a.preventDefault(),a.stopPropagation();let m=n.control.details.url_hd;m||(m=n.control.details.url),console.log("url:",m),M.open({url:m})}}return(_=e).\u0275fac=function(o){return new(o||_)(s.Y36(O.sK),s.Y36(i.B))},_.\u0275cmp=s.Xpm({type:_,selectors:[["control-webpage-view"]],inputs:{control:"control",view:"view",key:"key"},decls:3,vars:3,consts:[[4,"ngIf"],["class","card",3,"routerLink",4,"ngIf"],[1,"card",3,"routerLink"],[1,"card-content"],[1,"item"],[1,"icon",3,"color","src"],[1,"label","label-listitem"],[3,"color",4,"ngIf"],["horizontal","end","size","small",1,"fab-button",3,"click"],["src","assets/icons/svg/external-link.svg",1,"icon"],["class","card card-fav",3,"routerLink",4,"ngIf"],[1,"card","card-fav",3,"routerLink"],[1,"card-header"],[1,"label","label-fav"],["class","grid-center",4,"ngIf"],[1,"grid-center"],[3,"text_vm"],["expand","block",1,"push-button",3,"click"],[1,"label"],["translate",""]],template:function(o,n){1&o&&(s.YNc(0,$,3,3,"ng-container",0),s.YNc(1,W,3,3,"ng-container",0),s.YNc(2,T,3,3,"ng-container",0)),2&o&&(s.Q6J("ngIf",n.view===n.viewType.LIST_ITEM),s.xp6(1),s.Q6J("ngIf",n.view===n.viewType.FAVORITE),s.xp6(1),s.Q6J("ngIf",n.view===n.viewType.DETAILED))},dependencies:[A.O5,b.YG,b.PM,b.FN,b.Zi,b.wI,b.W4,b.jY,b.gu,b.Ie,b.Q$,b.Nd,b.YI,Z.rH,O.Pi,V.h,A.Ov]}),e})()},6592:(X,R,l)=>{l.d(R,{Y:()=>O});var f=l(6814),Y=l(7027),I=l(6223),M=l(6089),t=l(9515),u=l(577),s=l(5879);let O=(()=>{var i;class A{}return(i=A).\u0275fac=function(Z){return new(Z||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[f.ez,Y.Pc,I.u5,M.Bz,t.aw,u.o,Y.Pc,M.Bz]}),A})()}}]);